import './in-video-renderer.css';function e(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach(function(e){o(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function o(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var n=Object.defineProperty,r=(e,t,o)=>((e,t,o)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o)(e,"symbol"!=typeof t?t+"":t,o);class i extends Error{constructor(){super(...arguments),r(this,"name","InvalidTargetElementException"),r(this,"message","Invalid target element.")}}class a{constructor(e){r(this,"logger"),this.logger=e}invalidBid(){this.logger.warn("Invalid bid.")}unsupportedNativeAsset(){this.logger.warn("This native asset is not supported.")}missingAdTemplate(){this.logger.warn("Ad template is missing.")}invalidNativeVideoContainer(){this.logger.warn("Native video container is invalid.")}invalidTargetElement(){this.logger.warn("Invalid target element.")}}let s=class{warn(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.warn("[InRenderer.js]",t)}};class l extends Error{constructor(){super(...arguments),r(this,"name","InvalidBidException"),r(this,"message","Invalid bid object.")}}const d=e=>"string"==typeof e,c=()=>{let e,t;const o=new Promise((o,n)=>{e=o,t=n});return o.resolve=e,o.reject=t,o},u=e=>null==e?"":""+e,p=/###/g,f=e=>e&&e.indexOf("###")>-1?e.replace(p,"."):e,m=e=>!e||d(e),g=(e,t,o)=>{const n=d(t)?t.split("."):t;let r=0;for(;r<n.length-1;){if(m(e))return{};const t=f(n[r]);!e[t]&&o&&(e[t]=new o),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++r}return m(e)?{}:{obj:e,k:f(n[r])}},h=(e,t,o)=>{const{obj:n,k:r}=g(e,t,Object);if(void 0!==n||1===t.length)return void(n[r]=o);let i=t[t.length-1],a=t.slice(0,t.length-1),s=g(e,a,Object);for(;void 0===s.obj&&a.length;)i="".concat(a[a.length-1],".").concat(i),a=a.slice(0,a.length-1),s=g(e,a,Object),null!=s&&s.obj&&typeof s.obj["".concat(s.k,".").concat(i)]<"u"&&(s.obj=void 0);s.obj["".concat(s.k,".").concat(i)]=o},y=(e,t)=>{const{obj:o,k:n}=g(e,t);if(o&&Object.prototype.hasOwnProperty.call(o,n))return o[n]},v=(e,t,o)=>{for(const n in t)"__proto__"!==n&&"constructor"!==n&&(n in e?d(e[n])||e[n]instanceof String||d(t[n])||t[n]instanceof String?o&&(e[n]=t[n]):v(e[n],t[n],o):e[n]=t[n]);return e},b=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const _=e=>d(e)?e.replace(/[&<>"'\/]/g,e=>w[e]):e;const R=[" ",",","?","!",";"],S=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const o=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,o),this.regExpQueue.push(e),o}}(20),C=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const n=t.split(o);let r=e;for(let e=0;e<n.length;){if(!r||"object"!=typeof r)return;let t,i="";for(let a=e;a<n.length;++a)if(a!==e&&(i+=o),i+=n[a],t=r[i],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&a<n.length-1)continue;e+=a-e+1;break}r=t}return r},k=e=>null==e?void 0:e.replace("_","-"),L={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var o,n;null==(n=null==(o=null==console?void 0:console[e])?void 0:o.apply)||n.call(o,console,t)}};class T{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||L,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,o,n){return n&&!this.debug?null:(d(e[0])&&(e[0]="".concat(o).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new T(this.logger,t({prefix:"".concat(this.prefix,":").concat(e,":")},this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new T(this.logger,e)}}var O=new T;class A{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const o=this.observers[e].get(t)||0;this.observers[e].set(t,o+1)}),this}off(e,t){if(this.observers[e]){if(!t)return void delete this.observers[e];this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(e=>{let[t,n]=e;for(let e=0;e<n;e++)t(...o)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(t=>{let[n,r]=t;for(let t=0;t<r;t++)n.apply(n,[e,...o])})}}class E extends A{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,o){var n,r;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,s=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],o&&(Array.isArray(o)?l.push(...o):d(o)&&a?l.push(...o.split(a)):l.push(o)));const c=y(this.data,l);return!c&&!t&&!o&&e.indexOf(".")>-1&&(e=l[0],t=l[1],o=l.slice(2).join(".")),!c&&s&&d(o)?C(null==(r=null==(n=this.data)?void 0:n[e])?void 0:r[t],o,a):c}addResource(e,t,o,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator;let a=[e,t];o&&(a=a.concat(i?o.split(i):o)),e.indexOf(".")>-1&&(a=e.split("."),n=t,t=a[1]),this.addNamespaces(t),h(this.data,a,n),r.silent||this.emit("added",e,t,o,n)}addResources(e,t,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const n in o)(d(o[n])||Array.isArray(o[n]))&&this.addResource(e,t,n,o[n],{silent:!0});n.silent||this.emit("added",e,t,o)}addResourceBundle(e,o,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},s=[e,o];e.indexOf(".")>-1&&(s=e.split("."),r=n,n=o,o=s[1]),this.addNamespaces(o);let l=y(this.data,s)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?v(l,n,i):l=t(t({},l),n),h(this.data,s,l),a.silent||this.emit("added",e,o,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var P={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,o,n,r){return e.forEach(e=>{var i,a;t=null!==(i=null==(a=this.processors[e])?void 0:a.process(t,o,n,r))&&void 0!==i?i:t}),t}};const V={},N=e=>!d(e)&&"boolean"!=typeof e&&"number"!=typeof e;class x extends A{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,o)=>{e.forEach(e=>{t[e]&&(o[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=O.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const o=this.resolve(e,t);return void 0!==(null==o?void 0:o.res)}extractFromKey(e,t){let o=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===o&&(o=":");const n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const i=o&&e.indexOf(o)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,o)=>{t=t||"",o=o||"";const n=R.filter(e=>t.indexOf(e)<0&&o.indexOf(e)<0);if(0===n.length)return!0;const r=S.getRegExp("(".concat(n.map(e=>"?"===e?"\\?":e).join("|"),")"));let i=!r.test(e);if(!i){const t=e.indexOf(o);t>0&&!r.test(e.substring(0,t))&&(i=!0)}return i})(e,o,n));if(i&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:d(r)?[r]:r};const i=e.split(o);(o!==n||o===n&&this.options.ns.indexOf(i[0])>-1)&&(r=i.shift()),e=i.join(n)}return{key:e,namespaces:d(r)?[r]:r}}translate(e,o,n){if("object"!=typeof o&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof o&&(o=t({},o)),o||(o={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const r=void 0!==o.returnDetails?o.returnDetails:this.options.returnDetails,i=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,{key:a,namespaces:s}=this.extractFromKey(e[e.length-1],o),l=s[s.length-1],c=o.lng||this.language,u=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==c?void 0:c.toLowerCase())){if(u){const e=o.nsSeparator||this.options.nsSeparator;return r?{res:"".concat(l).concat(e).concat(a),usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(o)}:"".concat(l).concat(e).concat(a)}return r?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(o)}:a}const p=this.resolve(e,o);let f=null==p?void 0:p.res;const m=(null==p?void 0:p.usedKey)||a,g=(null==p?void 0:p.exactUsedKey)||a,h=void 0!==o.joinArrays?o.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,v=void 0!==o.count&&!d(o.count),b=x.hasDefaultValue(o),w=v?this.pluralResolver.getSuffix(c,o.count,o):"",_=o.ordinal&&v?this.pluralResolver.getSuffix(c,o.count,{ordinal:!1}):"",R=v&&!o.ordinal&&0===o.count,S=R&&o["defaultValue".concat(this.options.pluralSeparator,"zero")]||o["defaultValue".concat(w)]||o["defaultValue".concat(_)]||o.defaultValue;let C=f;y&&!f&&b&&(C=S);const k=N(C),L=Object.prototype.toString.apply(C);if(!(y&&C&&k&&["[object Number]","[object Function]","[object RegExp]"].indexOf(L)<0)||d(h)&&Array.isArray(C))if(y&&d(h)&&Array.isArray(f))f=f.join(h),f&&(f=this.extendTranslation(f,e,o,n));else{let r=!1,s=!1;!this.isValidLookup(f)&&b&&(r=!0,f=S),this.isValidLookup(f)||(s=!0,f=a);const d=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:f,u=b&&S!==f&&this.options.updateMissing;if(s||r||u){if(this.logger.log(u?"updateKey":"missingKey",c,l,a,u?S:f),i){const e=this.resolve(a,t(t({},o),{},{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(o.lng||this.language):e.push(o.lng||this.language);const r=(e,t,n)=>{var r;const i=b&&n!==f?n:d;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,i,u,o):null!=(r=this.backendConnector)&&r.saveMissing&&this.backendConnector.saveMissing(e,l,t,i,u,o),this.emit("missingKey",e,l,t,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,o);R&&o["defaultValue".concat(this.options.pluralSeparator,"zero")]&&t.indexOf("".concat(this.options.pluralSeparator,"zero"))<0&&t.push("".concat(this.options.pluralSeparator,"zero")),t.forEach(t=>{r([e],a+t,o["defaultValue".concat(t)]||S)})}):r(e,a,S))}f=this.extendTranslation(f,e,o,p,n),s&&f===a&&this.options.appendNamespaceToMissingKey&&(f="".concat(l,":").concat(a)),(s||r)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l,":").concat(a):a,r?f:void 0))}else{if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,C,t(t({},o),{},{ns:s})):"key '".concat(a," (").concat(this.language,")' returned an object instead of string.");return r?(p.res=e,p.usedParams=this.getUsedParamsDetails(o),p):e}if(i){const e=Array.isArray(C),n=e?[]:{},r=e?g:m;for(const e in C)if(Object.prototype.hasOwnProperty.call(C,e)){const a="".concat(r).concat(i).concat(e);n[e]=b&&!f?this.translate(a,t(t({},o),{},{defaultValue:N(S)?S[e]:void 0,joinArrays:!1,ns:s})):this.translate(a,t(t({},o),{},{joinArrays:!1,ns:s})),n[e]===a&&(n[e]=C[e])}f=n}}return r?(p.res=f,p.usedParams=this.getUsedParamsDetails(o),p):f}extendTranslation(e,o,n,r,i){var a,s,l=this;if(null!=(a=this.i18nFormat)&&a.parse)e=this.i18nFormat.parse(e,t(t({},this.options.interpolation.defaultVariables),n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(t(t({},n),{},{interpolation:t(t({},this.options.interpolation),n.interpolation)}));const a=d(e)&&(void 0!==(null==(s=null==n?void 0:n.interpolation)?void 0:s.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(a){const t=e.match(this.interpolator.nestingRegexp);c=t&&t.length}let u=n.replace&&!d(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=t(t({},this.options.interpolation.defaultVariables),u)),e=this.interpolator.interpolate(e,u,n.lng||this.language||r.usedLng,n),a){const t=e.match(this.interpolator.nestingRegexp);c<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(null==i?void 0:i[0])!==t[0]||n.context?l.translate(...t,o):(l.logger.warn("It seems you are nesting recursively key: ".concat(t[0]," in key: ").concat(o[0])),null)},n)),n.interpolation&&this.interpolator.reset()}const c=n.postProcess||this.options.postProcess,u=d(c)?[c]:c;return null!=e&&null!=u&&u.length&&!1!==n.applyPostProcessor&&(e=P.handle(u,e,o,this.options&&this.options.postProcessPassResolved?t({i18nResolved:t(t({},r),{},{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e){let t,o,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(t))return;const s=this.extractFromKey(e,a),l=s.key;o=l;let c=s.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==a.count&&!d(a.count),p=u&&!a.ordinal&&0===a.count,f=void 0!==a.context&&(d(a.context)||"number"==typeof a.context)&&""!==a.context,m=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);c.forEach(e=>{var s,d;this.isValidLookup(t)||(i=e,!V["".concat(m[0],"-").concat(e)]&&null!=(s=this.utils)&&s.hasLoadedNamespace&&!(null!=(d=this.utils)&&d.hasLoadedNamespace(i))&&(V["".concat(m[0],"-").concat(e)]=!0,this.logger.warn('key "'.concat(o,'" for languages "').concat(m.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(o=>{var i;if(this.isValidLookup(t))return;r=o;const s=[l];if(null!=(i=this.i18nFormat)&&i.addLookupKeys)this.i18nFormat.addLookupKeys(s,l,o,e,a);else{let e;u&&(e=this.pluralResolver.getSuffix(o,a.count,a));const t="".concat(this.options.pluralSeparator,"zero"),n="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(u&&(s.push(l+e),a.ordinal&&0===e.indexOf(n)&&s.push(l+e.replace(n,this.options.pluralSeparator)),p&&s.push(l+t)),f){const o="".concat(l).concat(this.options.contextSeparator).concat(a.context);s.push(o),u&&(s.push(o+e),a.ordinal&&0===e.indexOf(n)&&s.push(o+e.replace(n,this.options.pluralSeparator)),p&&s.push(o+t))}}let d;for(;d=s.pop();)this.isValidLookup(t)||(n=d,t=this.getResource(o,e,d,a))}))})}),{res:t,usedKey:o,exactUsedKey:n,usedLng:r,usedNS:i}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,o){var n;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null!=(n=this.i18nFormat)&&n.getResource?this.i18nFormat.getResource(e,t,o,r):this.resourceStore.getResource(e,t,o,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!d(e.replace);let r=n?e.replace:e;if(n&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r=t(t({},this.options.interpolation.defaultVariables),r)),!n){r=t({},r);for(const e of o)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t===o.substring(0,12)&&void 0!==e[o])return!0;return!1}}class I{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=O.create("languageUtils")}getScriptPartFromCode(e){if(!(e=k(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length||(t.pop(),"x"===t[t.length-1].toLowerCase())?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(!(e=k(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(d(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const o=this.formatLanguageCode(e);(!this.options.supportedLngs||this.isSupportedCode(o))&&(t=o)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const o=this.getLanguagePartFromCode(e);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(e=>e===o?e:e.indexOf("-")<0&&o.indexOf("-")<0||!(e.indexOf("-")>0&&o.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===o||0===e.indexOf(o)&&o.length>1)?void 0:e)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),d(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let o=e[t];return o||(o=e[this.getScriptPartFromCode(t)]),o||(o=e[this.formatLanguageCode(t)]),o||(o=e[this.getLanguagePartFromCode(t)]),o||(o=e.default),o||[]}toResolveHierarchy(e,t){const o=this.getFallbackCodes(t||this.options.fallbackLng||[],e),n=[],r=e=>{e&&(this.isSupportedCode(e)?n.push(e):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return d(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(e))):d(e)&&r(this.formatLanguageCode(e)),o.forEach(e=>{n.indexOf(e)<0&&r(this.formatLanguageCode(e))}),n}}const M={zero:0,one:1,two:2,few:3,many:4,other:5},B={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class D{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=O.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=k("dev"===e?"en":e),n=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:o,type:n});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let i;try{i=new Intl.PluralRules(o,{type:n})}catch(o){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),B;if(!e.match(/-|_/))return B;const n=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(n,t)}return this.pluralRulesCache[r]=i,i}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.getRule(e,t);return o||(o=this.getRule("dev",t)),(null==o?void 0:o.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,o).map(e=>"".concat(t).concat(e))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.getRule(e,t);return o||(o=this.getRule("dev",t)),o?o.resolvedOptions().pluralCategories.sort((e,t)=>M[e]-M[t]).map(e=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(e)):[]}getSuffix(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.getRule(e,o);return n?"".concat(this.options.prepend).concat(o.ordinal?"ordinal".concat(this.options.prepend):"").concat(n.select(t)):(this.logger.warn("no plural rule found for: ".concat(e)),this.getSuffix("dev",t,o))}}const F=function(e,t,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=((e,t,o)=>{const n=y(e,o);return void 0!==n?n:y(t,o)})(e,t,o);return!i&&r&&d(o)&&(i=C(e,o,n),void 0===i&&(i=C(t,o,n))),i},U=e=>e.replace(/\$/g,"$$$$");class q{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=O.create("interpolator"),this.options=t,this.format=(null==(e=null==t?void 0:t.interpolation)?void 0:e.format)||(e=>e),this.init(t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:o,useRawValueToEscape:n,prefix:r,prefixEscaped:i,suffix:a,suffixEscaped:s,formatSeparator:l,unescapeSuffix:d,unescapePrefix:c,nestingPrefix:u,nestingPrefixEscaped:p,nestingSuffix:f,nestingSuffixEscaped:m,nestingOptionsSeparator:g,maxReplaces:h,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:_,this.escapeValue=void 0===o||o,this.useRawValueToEscape=void 0!==n&&n,this.prefix=r?b(r):i||"{{",this.suffix=a?b(a):s||"}}",this.formatSeparator=l||",",this.unescapePrefix=d?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=u?b(u):p||b("$t("),this.nestingSuffix=f?b(f):m||b(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=h||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,"".concat(this.prefix,"(.+?)").concat(this.suffix)),this.regexpUnescape=e(this.regexpUnescape,"".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix)),this.nestingRegexp=e(this.nestingRegexp,"".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix))}interpolate(e,o,n,r){var i;let a,s,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},p=e=>{if(e.indexOf(this.formatSeparator)<0){const i=F(o,c,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,t(t(t({},r),o),{},{interpolationkey:e})):i}const i=e.split(this.formatSeparator),a=i.shift().trim(),s=i.join(this.formatSeparator).trim();return this.format(F(o,c,a,this.options.keySeparator,this.options.ignoreJSONStructure),s,n,t(t(t({},r),o),{},{interpolationkey:a}))};this.resetRegExp();const f=(null==r?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,m=void 0!==(null==(i=null==r?void 0:r.interpolation)?void 0:i.skipOnVariables)?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>U(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?U(this.escape(e)):U(e)}].forEach(t=>{for(l=0;a=t.regex.exec(e);){const o=a[1].trim();if(s=p(o),void 0===s)if("function"==typeof f){const t=f(e,a,r);s=d(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,o))s="";else{if(m){s=a[0];continue}this.logger.warn("missed to pass in variable ".concat(o," for interpolating ").concat(e)),s=""}else!d(s)&&!this.useRawValueToEscape&&(s=u(s));const n=t.safeValue(s);if(e=e.replace(a[0],n),m?(t.regex.lastIndex+=s.length,t.regex.lastIndex-=a[0].length):t.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,o){let n,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(e,o)=>{var n;const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const a=e.split(new RegExp("".concat(r,"[ ]*{")));let s="{".concat(a[1]);e=a[0],s=this.interpolate(s,i);const l=s.match(/'/g),d=s.match(/"/g);((null!==(n=null==l?void 0:l.length)&&void 0!==n?n:0)%2==0&&!d||d.length%2!=0)&&(s=s.replace(/'/g,'"'));try{i=JSON.parse(s),o&&(i=t(t({},o),i))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(r).concat(s)}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let l=[];i=t({},a),i=i.replace&&!d(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map(e=>e.trim());n[1]=e.shift(),l=e,c=!0}if(r=o(s.call(this,n[1].trim(),i),i),r&&n[0]===e&&!d(r))return r;d(r)||(r=u(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),c&&(r=l.reduce((e,o)=>this.format(e,o,a.lng,t(t({},a),{},{interpolationkey:n[1].trim()})),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}const j=e=>{const o={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a=t(t({},a),{},{[i.interpolationkey]:void 0}));const s=r+JSON.stringify(a);let l=o[s];return l||(l=e(k(r),i),o[s]=l),l(n)}};class H{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=O.create("formatter"),this.options=e,this.formats={number:j((e,o)=>{const n=new Intl.NumberFormat(e,t({},o));return e=>n.format(e)}),currency:j((e,o)=>{const n=new Intl.NumberFormat(e,t(t({},o),{},{style:"currency"}));return e=>n.format(e)}),datetime:j((e,o)=>{const n=new Intl.DateTimeFormat(e,t({},o));return e=>n.format(e)}),relativetime:j((e,o)=>{const n=new Intl.RelativeTimeFormat(e,t({},o));return e=>n.format(e,o.range||"day")}),list:j((e,o)=>{const n=new Intl.ListFormat(e,t({},o));return e=>n.format(e)})},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=j(t)}format(e,o,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=o.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(e=>e.indexOf(")")>-1)){const e=i.findIndex(e=>e.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce((e,o)=>{var i;const{formatName:a,formatOptions:s}=(e=>{let t=e.toLowerCase().trim();const o={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const r=n[1].substring(0,n[1].length-1);"currency"===t&&r.indexOf(":")<0?o.currency||(o.currency=r.trim()):"relativetime"===t&&r.indexOf(":")<0?o.range||(o.range=r.trim()):r.split(";").forEach(e=>{if(e){const[t,...n]=e.split(":"),r=n.join(":").trim().replace(/^'+|'+$/g,""),i=t.trim();o[i]||(o[i]=r),"false"===r&&(o[i]=!1),"true"===r&&(o[i]=!0),isNaN(r)||(o[i]=parseInt(r,10))}})}return{formatName:t,formatOptions:o}})(o);if(this.formats[a]){let o=e;try{const l=(null==(i=null==r?void 0:r.formatParams)?void 0:i[r.interpolationkey])||{},d=l.locale||l.lng||r.locale||r.lng||n;o=this.formats[a](e,d,t(t(t({},s),r),l))}catch(e){this.logger.warn(e)}return o}return this.logger.warn("there was no format function for ".concat(a)),e},e)}}class z extends A{constructor(e,t,o){var n,r;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=o,this.languageUtils=o.languageUtils,this.options=i,this.logger=O.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],null==(r=null==(n=this.backend)?void 0:n.init)||r.call(n,o,i.backend,i)}queueLoad(e,t,o,n){const r={},i={},a={},s={};return e.forEach(e=>{let n=!0;t.forEach(t=>{const a="".concat(e,"|").concat(t);!o.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===i[a]&&(i[a]=!0):(this.state[a]=1,n=!1,void 0===i[a]&&(i[a]=!0),void 0===r[a]&&(r[a]=!0),void 0===s[t]&&(s[t]=!0)))}),n||(a[e]=!0)}),(Object.keys(r).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(r),pending:Object.keys(i),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(s)}}loaded(e,t,o){const n=e.split("|"),r=n[0],i=n[1];t&&this.emit("failedLoading",r,i,t),!t&&o&&this.store.addResourceBundle(r,i,o,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&o&&(this.state[e]=0);const a={};this.queue.forEach(o=>{((e,t,o)=>{const{obj:n,k:r}=g(e,t,Object);n[r]=n[r]||[],n[r].push(o)})(o.loaded,[r],i),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(o,e),t&&o.errors.push(t),0===o.pendingCount&&!o.done&&(Object.keys(o.loaded).forEach(e=>{a[e]||(a[e]={});const t=o.loaded[e];t.length&&t.forEach(t=>{void 0===a[e][t]&&(a[e][t]=!0)})}),o.done=!0,o.errors.length?o.callback(o.errors):o.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(e=>!e.done)}read(e,t,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:o,tried:n,wait:r,callback:i});this.readingCalls++;const a=(a,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&s&&n<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,o,n+1,2*r,i)},r):i(a,s)},s=this.backend[o].bind(this.backend);if(2!==s.length)return s(e,t,a);try{const o=s(e,t);o&&"function"==typeof o.then?o.then(e=>a(null,e)).catch(a):a(null,o)}catch(e){a(e)}}prepareLoading(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();d(e)&&(e=this.languageUtils.toResolveHierarchy(e)),d(t)&&(t=[t]);const r=this.queueLoad(e,t,o,n);if(!r.toLoad.length)return r.pending.length||n(),null;r.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,o){this.prepareLoading(e,t,{},o)}reload(e,t,o){this.prepareLoading(e,t,{reload:!0},o)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o=e.split("|"),n=o[0],r=o[1];this.read(n,r,"read",void 0,void 0,(o,i)=>{o&&this.logger.warn("".concat(t,"loading namespace ").concat(r," for language ").concat(n," failed"),o),!o&&i&&this.logger.log("".concat(t,"loaded namespace ").concat(r," for language ").concat(n),i),this.loaded(e,o,i)})}saveMissing(e,o,n,r,i){var a,s,l,d,c;let u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(null==(s=null==(a=this.services)?void 0:a.utils)||!s.hasLoadedNamespace||null!=(d=null==(l=this.services)?void 0:l.utils)&&d.hasLoadedNamespace(o)){if(null!=n&&""!==n){if(null!=(c=this.backend)&&c.create){const a=t(t({},u),{},{isUpdate:i}),s=this.backend.create.bind(this.backend);if(s.length<6)try{let t;t=5===s.length?s(e,o,n,r,a):s(e,o,n,r),t&&"function"==typeof t.then?t.then(e=>p(null,e)).catch(p):p(null,t)}catch(e){p(e)}else s(e,o,n,r,p,a)}!e||!e[0]||this.store.addResource(e[0],o,n,r)}}else this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const W=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),d(e[1])&&(t.defaultValue=e[1]),d(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const o=e[3]||e[2];Object.keys(o).forEach(e=>{t[e]=o[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),K=e=>{var t,o;return d(e.ns)&&(e.ns=[e.ns]),d(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),d(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null==(o=null==(t=e.supportedLngs)?void 0:t.indexOf)?void 0:o.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},G=()=>{};class X extends A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=K(e),this.services={},this.logger=O,this.modules={external:[]},o=this,Object.getOwnPropertyNames(Object.getPrototypeOf(o)).forEach(e=>{"function"==typeof o[e]&&(o[e]=o[e].bind(o))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}var o}init(){var e=this;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof o&&(n=o,o={}),null==o.defaultNS&&o.ns&&(d(o.ns)?o.defaultNS=o.ns:o.ns.indexOf("translation")<0&&(o.defaultNS=o.ns[0]));const r=W();this.options=t(t(t({},r),this.options),K(o)),this.options.interpolation=t(t({},r.interpolation),this.options.interpolation),void 0!==o.keySeparator&&(this.options.userDefinedKeySeparator=o.keySeparator),void 0!==o.nsSeparator&&(this.options.userDefinedNsSeparator=o.nsSeparator);const i=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?O.init(i(this.modules.logger),this.options):O.init(null,this.options),t=this.modules.formatter?this.modules.formatter:H;const o=new I(this.options);this.store=new E(this.options.resources,this.options);const n=this.services;n.logger=O,n.resourceStore=this.store,n.languageUtils=o,n.pluralResolver=new D(o,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),t&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(n.formatter=i(t),n.formatter.init(n,this.options),this.options.interpolation.format=n.formatter.format.bind(n.formatter)),n.interpolator=new q(this.options),n.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},n.backendConnector=new z(i(this.modules.backend),n.resourceStore,n,this.options),n.backendConnector.on("*",function(t){for(var o=arguments.length,n=new Array(o>1?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];e.emit(t,...n)}),this.modules.languageDetector&&(n.languageDetector=i(this.modules.languageDetector),n.languageDetector.init&&n.languageDetector.init(n,this.options.detection,this.options)),this.modules.i18nFormat&&(n.i18nFormat=i(this.modules.i18nFormat),n.i18nFormat.init&&n.i18nFormat.init(this)),this.translator=new x(this.services,this.options),this.translator.on("*",function(t){for(var o=arguments.length,n=new Array(o>1?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];e.emit(t,...n)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,n||(n=G),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const a=c(),s=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(t),n(e,t)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?s():setTimeout(s,0),a}loadResources(e){var t,o;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;const r=d(e)?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==r?void 0:r.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return n();const e=[],i=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};r?i(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>i(e)),null==(o=null==(t=this.options.preload)?void 0:t.forEach)||o.call(t,e=>i(e)),this.services.backendConnector.load(e,this.options.ns,e=>{!e&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(e)})}else n(null)}reloadResources(e,t,o){const n=c();return"function"==typeof e&&(o=e,e=void 0),"function"==typeof t&&(o=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),o||(o=G),this.services.backendConnector.reload(e,t,e=>{n.resolve(),o(e)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&P.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,t){var o=this;this.isLanguageChangingTo=e;const n=c();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(e,i)=>{i?(r(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,n.resolve(function(){return o.t(...arguments)}),t&&t(e,function(){return o.t(...arguments)})},a=t=>{var o,n;!e&&!t&&this.services.languageDetector&&(t=[]);const a=d(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),null==(n=null==(o=this.services.languageDetector)?void 0:o.cacheUserLanguage)||n.call(o,a)),this.loadResources(a,e=>{i(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),n}getFixedT(e,o,n){var r=this;const i=function(e,o){let a;if("object"!=typeof o){for(var s=arguments.length,l=new Array(s>2?s-2:0),d=2;d<s;d++)l[d-2]=arguments[d];a=r.options.overloadTranslationOptionHandler([e,o].concat(l))}else a=t({},o);a.lng=a.lng||i.lng,a.lngs=a.lngs||i.lngs,a.ns=a.ns||i.ns,""!==a.keyPrefix&&(a.keyPrefix=a.keyPrefix||n||i.keyPrefix);const c=r.options.keySeparator||".";let u;return u=a.keyPrefix&&Array.isArray(e)?e.map(e=>"".concat(a.keyPrefix).concat(c).concat(e)):a.keyPrefix?"".concat(a.keyPrefix).concat(c).concat(e):e,r.t(u,a)};return d(e)?i.lng=e:i.lngs=e,i.ns=o,i.keyPrefix=n,i}t(){for(var e,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return null==(e=this.translator)?void 0:e.translate(...o)}exists(){for(var e,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return null==(e=this.translator)?void 0:e.exists(...o)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const o=t.lng||this.resolvedLanguage||this.languages[0],n=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===o.toLowerCase())return!0;const i=(e,t)=>{const o=this.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===o||0===o||2===o};if(t.precheck){const e=t.precheck(this,i);if(void 0!==e)return e}return!!(this.hasResourceBundle(o,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(o,e)&&(!n||i(r,e)))}loadNamespaces(e,t){const o=c();return this.options.ns?(d(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{o.resolve(),t&&t(e)}),o):(t&&t(),Promise.resolve())}loadLanguages(e,t){const o=c();d(e)&&(e=[e]);const n=this.options.preload||[],r=e.filter(e=>n.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return r.length?(this.options.preload=n.concat(r),this.loadResources(e=>{o.resolve(),t&&t(e)}),o):(t&&t(),Promise.resolve())}dir(e){var t,o;if(e||(e=this.resolvedLanguage||((null==(t=this.languages)?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";const n=(null==(o=this.services)?void 0:o.languageUtils)||new I(W());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new X(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r=t(t(t({},this.options),e),{},{isClone:!0}),i=new X(r);if((void 0!==e.debug||void 0!==e.prefix)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(e=>{i[e]=this[e]}),i.services=t({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const e=Object.keys(this.store.data).reduce((e,o)=>(e[o]=t({},this.store.data[o]),Object.keys(e[o]).reduce((n,r)=>(n[r]=t({},e[o][r]),n),{})),{});i.store=new E(e,r),i.services.resourceStore=i.store}return i.translator=new x(i.services,r),i.translator.on("*",function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];i.emit(e,...o)}),i.init(r,o),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const J=X.createInstance();J.createInstance=X.createInstance,J.createInstance,J.dir,J.init,J.loadResources,J.reloadResources,J.use,J.changeLanguage,J.getFixedT,J.t,J.exists,J.setDefaultNamespace,J.hasLoadedNamespace,J.loadNamespaces,J.loadLanguages;var Q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Y(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var o=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(o,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),o}const{slice:Z,forEach:ee}=[];const te=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,oe={create(e,t,o,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};o&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+60*o*1e3)),n&&(r.domain=n),document.cookie=function(e,t){const o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"},n=encodeURIComponent(t);let r="".concat(e,"=").concat(n);if(o.maxAge>0){const e=o.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");r+="; Max-Age=".concat(Math.floor(e))}if(o.domain){if(!te.test(o.domain))throw new TypeError("option domain is invalid");r+="; Domain=".concat(o.domain)}if(o.path){if(!te.test(o.path))throw new TypeError("option path is invalid");r+="; Path=".concat(o.path)}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");r+="; Expires=".concat(o.expires.toUTCString())}if(o.httpOnly&&(r+="; HttpOnly"),o.secure&&(r+="; Secure"),o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o.partitioned&&(r+="; Partitioned"),r}(e,t,r)},read(e){const t="".concat(e,"="),o=document.cookie.split(";");for(let e=0;e<o.length;e++){let n=o[e];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var ne={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return oe.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:o,cookieMinutes:n,cookieDomain:r,cookieOptions:i}=t;o&&typeof document<"u"&&oe.create(o,e,n,r,i)}},re={name:"querystring",lookup(e){var t;let o,{lookupQuerystring:n}=e;if(typeof window<"u"){let{search:e}=window.location;!window.location.search&&(null==(t=window.location.hash)?void 0:t.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const r=e.substring(1).split("&");for(let e=0;e<r.length;e++){const t=r[e].indexOf("=");t>0&&r[e].substring(0,t)===n&&(o=r[e].substring(t+1))}}return o}},ie={name:"hash",lookup(e){var t;let o,{lookupHash:n,lookupFromHashIndex:r}=e;if(typeof window<"u"){const{hash:e}=window.location;if(e&&e.length>2){const i=e.substring(1);if(n){const e=i.split("&");for(let t=0;t<e.length;t++){const r=e[t].indexOf("=");r>0&&e[t].substring(0,r)===n&&(o=e[t].substring(r+1))}}if(o)return o;if(!o&&r>-1){const o=e.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?null==(t=o["number"==typeof r?r:0])?void 0:t.replace("/",""):void 0}}}return o}};let ae=null;const se=()=>{if(null!==ae)return ae;try{if(ae=typeof window<"u"&&null!==window.localStorage,!ae)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){ae=!1}return ae};var le={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&se())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:o}=t;o&&se()&&window.localStorage.setItem(o,e)}};let de=null;const ce=()=>{if(null!==de)return de;try{if(de=typeof window<"u"&&null!==window.sessionStorage,!de)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){de=!1}return de};var ue={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&ce())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:o}=t;o&&ce()&&window.sessionStorage.setItem(o,e)}},pe={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:e,userLanguage:o,language:n}=navigator;if(e)for(let o=0;o<e.length;o++)t.push(e[o]);o&&t.push(o),n&&t.push(n)}return t.length>0?t:void 0}},fe={name:"htmlTag",lookup(e){let t,{htmlTag:o}=e;const n=o||(typeof document<"u"?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},me={name:"path",lookup(e){var t;let{lookupFromPathIndex:o}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?null==(t=n["number"==typeof o?o:0])?void 0:t.replace("/",""):void 0}},ge={name:"subdomain",lookup(e){var t,o;let{lookupFromSubdomainIndex:n}=e;const r="number"==typeof n?n+1:1,i=typeof window<"u"&&(null==(o=null==(t=window.location)?void 0:t.hostname)?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(i)return i[r]}};let he=!1;try{document.cookie,he=!0}catch(e){}const ye=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];he||ye.splice(1,1);class ve{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return ee.call(Z.call(arguments,1),t=>{if(t)for(const o in t)void 0===e[o]&&(e[o]=t[o])}),e}(t,this.options||{},{order:ye,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=o,this.addDetector(ne),this.addDetector(re),this.addDetector(le),this.addDetector(ue),this.addDetector(pe),this.addDetector(fe),this.addDetector(me),this.addDetector(ge),this.addDetector(ie)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let o=this.detectors[e].lookup(this.options);o&&"string"==typeof o&&(o=[o]),o&&(t=t.concat(o))}}),t=t.filter(e=>{return null!=e&&!("string"==typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(e=>e.test(t)));var t}).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}ve.type="languageDetector";const be=Y(ve),we={LearnMore:"Learn More",Replay:"Replay"},_e={LearnMore:"",Replay:""},Re="in_renderer_i18n";J.use(be).init({fallbackLng:"en",detection:{lookupCookie:Re,lookupLocalStorage:Re,lookupSessionStorage:Re},resources:{en:{translation:we},ja:{translation:_e}}});const Se=J;var Ce={exports:{}};
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */const ke=Y(Ce.exports=function(){function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,r=void 0,i=void 0,a=function(e,t){b[n]=e,b[n+1]=t,2===(n+=2)&&(i?i(w):R())};function s(e){i=e}function l(e){a=e}var d=typeof window<"u"?window:void 0,c=d||{},u=c.MutationObserver||c.WebKitMutationObserver,p=typeof self>"u"&&typeof process<"u"&&"[object process]"==={}.toString.call(process),f=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function m(){return function(){return process.nextTick(w)}}function g(){return typeof r<"u"?function(){r(w)}:v()}function h(){var e=0,t=new u(w),o=document.createTextNode("");return t.observe(o,{characterData:!0}),function(){o.data=e=++e%2}}function y(){var e=new MessageChannel;return e.port1.onmessage=w,function(){return e.port2.postMessage(0)}}function v(){var e=setTimeout;return function(){return e(w,1)}}var b=new Array(1e3);function w(){for(var e=0;e<n;e+=2)(0,b[e])(b[e+1]),b[e]=void 0,b[e+1]=void 0;n=0}function _(){try{var e=Function("return this")().require("vertx");return r=e.runOnLoop||e.runOnContext,g()}catch(e){return v()}}var R=void 0;function S(e,t){var o=this,n=new this.constructor(L);void 0===n[k]&&K(n);var r=o._state;if(r){var i=arguments[r-1];a(function(){return j(r,n,i,o._result)})}else U(o,n,e,t);return n}function C(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var o=new t(L);return M(o,e),o}R=p?m():u?h():f?y():void 0===d?_():v();var k=Math.random().toString(36).substring(2);function L(){}var T=void 0,O=1,A=2;function E(){return new TypeError("You cannot resolve a promise with itself")}function P(){return new TypeError("A promises callback cannot return that same promise.")}function V(e,t,o,n){try{e.call(t,o,n)}catch(e){return e}}function N(e,t,o){a(function(e){var n=!1,r=V(o,t,function(o){n||(n=!0,t!==o?M(e,o):D(e,o))},function(t){n||(n=!0,F(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&r&&(n=!0,F(e,r))},e)}function x(e,t){t._state===O?D(e,t._result):t._state===A?F(e,t._result):U(t,void 0,function(t){return M(e,t)},function(t){return F(e,t)})}function I(e,o,n){o.constructor===e.constructor&&n===S&&o.constructor.resolve===C?x(e,o):void 0===n?D(e,o):t(n)?N(e,o,n):D(e,o)}function M(t,o){if(t===o)F(t,E());else if(e(o)){var n=void 0;try{n=o.then}catch(e){return void F(t,e)}I(t,o,n)}else D(t,o)}function B(e){e._onerror&&e._onerror(e._result),q(e)}function D(e,t){e._state===T&&(e._result=t,e._state=O,0!==e._subscribers.length&&a(q,e))}function F(e,t){e._state===T&&(e._state=A,e._result=t,a(B,e))}function U(e,t,o,n){var r=e._subscribers,i=r.length;e._onerror=null,r[i]=t,r[i+O]=o,r[i+A]=n,0===i&&e._state&&a(q,e)}function q(e){var t=e._subscribers,o=e._state;if(0!==t.length){for(var n=void 0,r=void 0,i=e._result,a=0;a<t.length;a+=3)n=t[a],r=t[a+o],n?j(o,n,r,i):r(i);e._subscribers.length=0}}function j(e,o,n,r){var i=t(n),a=void 0,s=void 0,l=!0;if(i){try{a=n(r)}catch(e){l=!1,s=e}if(o===a)return void F(o,P())}else a=r;o._state!==T||(i&&l?M(o,a):!1===l?F(o,s):e===O?D(o,a):e===A&&F(o,a))}function H(e,t){try{t(function(t){M(e,t)},function(t){F(e,t)})}catch(t){F(e,t)}}var z=0;function W(){return z++}function K(e){e[k]=z++,e._state=void 0,e._result=void 0,e._subscribers=[]}function G(){return new Error("Array Methods must be provided an Array")}var X=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(L),this.promise[k]||K(this.promise),o(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&D(this.promise,this._result))):F(this.promise,G())}return e.prototype._enumerate=function(e){for(var t=0;this._state===T&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var o=this._instanceConstructor,n=o.resolve;if(n===C){var r=void 0,i=void 0,a=!1;try{r=e.then}catch(e){a=!0,i=e}if(r===S&&e._state!==T)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(o===te){var s=new o(L);a?F(s,i):I(s,e,r),this._willSettleAt(s,t)}else this._willSettleAt(new o(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,o){var n=this.promise;n._state===T&&(this._remaining--,e===A?F(n,o):this._result[t]=o),0===this._remaining&&D(n,this._result)},e.prototype._willSettleAt=function(e,t){var o=this;U(e,void 0,function(e){return o._settledAt(O,t,e)},function(e){return o._settledAt(A,t,e)})},e}();function J(e){return new X(this,e).promise}function Y(e){var t=this;return o(e)?new t(function(o,n){for(var r=e.length,i=0;i<r;i++)t.resolve(e[i]).then(o,n)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}function $(e){var t=new this(L);return F(t,e),t}function Z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[k]=W(),this._result=this._state=void 0,this._subscribers=[],L!==t&&("function"!=typeof t&&Z(),this instanceof e?H(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var o=this,n=o.constructor;return t(e)?o.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):o.then(e,e)},e}();function oe(){var e=void 0;if(typeof Q<"u")e=Q;else if(typeof self<"u")e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var o=null;try{o=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===o&&!t.cast)return}e.Promise=te}return te.prototype.then=S,te.all=J,te.race=Y,te.resolve=C,te.reject=$,te._setScheduler=s,te._setAsap=l,te._asap=a,te.polyfill=oe,te.Promise=te,te}());"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const o=Object(e);for(let e=1;e<arguments.length;e++){const t=arguments[e];if(null!=t)for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])}return o},writable:!0,configurable:!0}),function(){if("function"==typeof globalThis.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}e.prototype=globalThis.Event.prototype,globalThis.CustomEvent=e}(),typeof globalThis.Element<"u"&&typeof globalThis.CharacterData<"u"&&typeof globalThis.DocumentType<"u"&&[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}),ke.polyfill(),typeof window<"u"&&!window.dashjs&&(window.dashjs={skipAutoCreate:!0,isDefaultSubject:!0});const Le=[function(e,t){const o={AdStarted:()=>e.onStartVpaidAd,AdStopped:()=>e.onStopVpaidAd,AdSkipped:()=>e.onSkipVpaidAd,AdLoaded:()=>e.onVpaidAdLoaded,AdLinearChange:()=>e.onVpaidAdLinearChange,AdSizeChange:()=>e.onVpaidAdSizeChange,AdExpandedChange:()=>e.onVpaidAdExpandedChange,AdSkippableStateChange:()=>e.onVpaidAdSkippableStateChange,AdDurationChange:()=>e.onVpaidAdDurationChange,AdRemainingTimeChange:()=>e.onVpaidAdRemainingTimeChange,AdVolumeChange:()=>e.onVpaidAdVolumeChange,AdImpression:()=>e.onVpaidAdImpression,AdClickThru:()=>e.onVpaidAdClickThru,AdInteraction:()=>e.onVpaidAdInteraction,AdVideoStart:()=>e.onVpaidAdVideoStart,AdVideoFirstQuartile:()=>e.onVpaidAdVideoFirstQuartile,AdVideoMidpoint:()=>e.onVpaidAdVideoMidpoint,AdVideoThirdQuartile:()=>e.onVpaidAdVideoThirdQuartile,AdVideoComplete:()=>e.onVpaidAdVideoComplete,AdUserAcceptInvitation:()=>e.onVpaidAdUserAcceptInvitation,AdUserMinimize:()=>e.onVpaidAdUserMinimize,AdUserClose:()=>e.onVpaidAdUserClose,AdPaused:()=>e.onVpaidAdPaused,AdPlaying:()=>e.onVpaidAdPlaying,AdError:()=>e.onVpaidAdError,AdLog:()=>e.onVpaidAdLog};e.checkVPAIDInterface=e=>{const t=e;return!!(t.handshakeVersion&&"function"==typeof t.handshakeVersion&&t.initAd&&"function"==typeof t.initAd&&t.startAd&&"function"==typeof t.startAd&&t.stopAd&&"function"==typeof t.stopAd&&t.skipAd&&"function"==typeof t.skipAd&&t.resizeAd&&"function"==typeof t.resizeAd&&t.pauseAd&&"function"==typeof t.pauseAd&&t.resumeAd&&"function"==typeof t.resumeAd&&t.expandAd&&"function"==typeof t.expandAd&&t.collapseAd&&"function"==typeof t.collapseAd&&t.subscribe&&"function"==typeof t.subscribe&&t.unsubscribe&&"function"==typeof t.unsubscribe)},e.onVpaidAdPaused=()=>{e.vpaidTimeoutTimerClear(),e.debugMessage("onAdPaused")},e.onVpaidAdPlaying=()=>{e.vpaidTimeoutTimerClear(),e.debugMessage("onAdPlaying")},e.onVpaidAdError=t=>{e.debugMessage("onAdError: "+t),e.vpaidTimeoutTimerClear(),e.onVpaidEnded()},e.onVpaidAdLog=t=>{e.debugMessage("onAdLog: "+t)},e.onVpaidAdUserAcceptInvitation=()=>{e.debugMessage("onAdUserAcceptInvitation")},e.onVpaidAdUserMinimize=()=>{e.debugMessage("onAdUserMinimize")},e.onVpaidAdUserClose=()=>{e.debugMessage("onAdUserClose")},e.onVpaidAdSkippableStateChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad Skippable State Changed to: "+e.vpaidAdUnit.getAdSkippableState())},e.onVpaidAdExpandedChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad Expanded Changed to: "+e.vpaidAdUnit.getAdExpanded())},e.getVpaidAdExpanded=()=>{if(e.debugMessage("getAdExpanded"),e.vpaidAdUnit)return e.vpaidAdUnit.getAdExpanded()},e.getVpaidAdSkippableState=()=>{if(e.debugMessage("getAdSkippableState"),e.vpaidAdUnit)return e.vpaidAdUnit.getAdSkippableState()},e.onVpaidAdSizeChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad size changed to: w="+e.vpaidAdUnit.getAdWidth()+" h="+e.vpaidAdUnit.getAdHeight())},e.onVpaidAdDurationChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad Duration Changed to: "+e.vpaidAdUnit.getAdDuration())},e.onVpaidAdRemainingTimeChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad Remaining Time Changed to: "+e.vpaidAdUnit.getAdRemainingTime())},e.getVpaidAdRemainingTime=()=>{if(e.debugMessage("getAdRemainingTime"),e.vpaidAdUnit)return e.vpaidAdUnit.getAdRemainingTime()},e.onVpaidAdImpression=()=>{e.debugMessage("Ad Impression"),e.trackSingleEvent("impression")},e.onVpaidAdClickThru=(t,o,n)=>{e.debugMessage("Clickthrough portion of the ad was clicked"),n&&window.open(e.vastOptions.clickthroughUrl),e.pauseVpaidAd(),e.callUris(e.vastOptions.clicktracking)},e.onVpaidAdInteraction=t=>{e.debugMessage("A non-clickthrough event has occured")},e.onVpaidAdVideoStart=()=>{e.debugMessage("Video 0% completed"),e.trackSingleEvent("start")},e.onVpaidAdVideoFirstQuartile=()=>{e.debugMessage("Video 25% completed"),e.trackSingleEvent("firstQuartile")},e.onVpaidAdVideoMidpoint=()=>{e.debugMessage("Video 50% completed"),e.trackSingleEvent("midpoint")},e.onVpaidAdVideoThirdQuartile=()=>{e.debugMessage("Video 75% completed"),e.trackSingleEvent("thirdQuartile")},e.onVpaidAdVideoComplete=()=>{e.debugMessage("Video 100% completed"),e.trackSingleEvent("complete")},e.onVpaidAdLinearChange=()=>{const t=e.domRef.wrapper.getElementsByClassName("fluid_vpaidNonLinear_ad")[0],o=e.domRef.wrapper.querySelector(".close_button"),n=t.getAttribute("adlistid");if(e.debugMessage("Ad linear has changed: "+e.vpaidAdUnit.getAdLinear()),!e.vpaidAdUnit.getAdLinear())return;e.backupMainVideoContentTime(n.split("_")[0]),e.isCurrentlyPlayingAd=!0,o&&o.remove(),t.className="fluid_vpaid_slot",e.domRef.player.loop=!1,e.domRef.player.removeAttribute("controls");const r=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress");for(let t=0;t<r.length;t++)r[t].style.backgroundColor=e.displayOptions.layoutControls.adProgressColor;e.toggleLoader(!1)},e.getVpaidAdLinear=()=>(e.debugMessage("getAdLinear"),e.vpaidAdUnit.getAdLinear()),e.isAdLinear=t=>{try{return e.getVpaidAdLinear()}catch(o){return e.debugMessage("Error calling getAdLinear(), handshake -> initAd() must be set before calling getAdLinear(). Falling back to VAST metadata: "+o),t.adType&&"linear"===t.adType.toLowerCase()}},e.startVpaidAd=()=>{e.debugMessage("startAd"),e.vpaidTimeoutTimerStart(),e.vpaidAdUnit.startAd()},e.onVpaidAdLoaded=()=>{e.debugMessage("ad has been loaded"),e.vpaidTimeoutTimerClear(),e.startVpaidAd()},e.onStartVpaidAd=()=>{e.debugMessage("Ad has started"),e.vpaidTimeoutTimerClear()},e.stopVpaidAd=()=>{e.vpaidTimeoutTimerStart(),e.vpaidAdUnit.stopAd()},e.hardStopVpaidAd=t=>{e.vpaidAdUnit&&(e.vpaidAdUnit.stopAd(),e.vpaidAdUnit=null);const o=e.domRef.wrapper.getElementsByClassName("fluid_vpaid_iframe"),n=e.domRef.wrapper.getElementsByClassName("fluid_vpaid_slot"),r=e.domRef.wrapper.getElementsByClassName("fluid_vpaidNonLinear_ad");for(let e=0;e<o.length;e++)o[e].getAttribute("adListId")!==t.id&&o[e].remove();for(let e=0;e<n.length;e++)n[e].getAttribute("adListId")!==t.id&&n[e].remove();for(let e=0;e<r.length;e++)r[e].getAttribute("adListId")!==t.id&&r[e].remove()},e.onStopVpaidAd=()=>{e.debugMessage("Ad has stopped"),e.vpaidTimeoutTimerClear(),e.onVpaidEnded()},e.onSkipVpaidAd=()=>{e.debugMessage("Ad was skipped"),e.vpaidTimeoutTimerClear(),e.onVpaidEnded()},e.skipVpaidAd=()=>{e.vpaidTimeoutTimerStart(),e.vpaidAdUnit&&(e.vpaidAdUnit.skipAd(),e.vpaidTimeoutTimerClear(),e.onVpaidEnded())},e.setVpaidAdVolume=t=>{e.vpaidAdUnit&&e.vpaidAdUnit.setAdVolume(t)},e.getVpaidAdVolume=()=>{if(e.vpaidAdUnit)return e.vpaidAdUnit.getAdVolume()},e.onVpaidAdVolumeChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad Volume has changed to - "+e.vpaidAdUnit.getAdVolume())},e.resizeVpaidAuto=()=>{if(null!==e.vastOptions&&e.vastOptions.vpaid&&e.vastOptions.linear){const t=e.domRef.player.offsetWidth,o=e.domRef.player.offsetHeight,n=e.fullscreenMode?"fullscreen":"normal";e.resizeVpaidAd(t,o,n)}},e.resizeVpaidAd=(t,o,n)=>{e.vpaidAdUnit&&e.vpaidAdUnit.resizeAd(t,o,n)},e.pauseVpaidAd=()=>{e.vpaidTimeoutTimerStart(),e.vpaidAdUnit&&e.vpaidAdUnit.pauseAd()},e.resumeVpaidAd=()=>{e.vpaidTimeoutTimerStart(),e.vpaidAdUnit&&e.vpaidAdUnit.resumeAd()},e.expandVpaidAd=()=>{e.vpaidAdUnit&&e.vpaidAdUnit.expandAd()},e.collapseVpaidAd=()=>{e.vpaidAdUnit&&e.vpaidAdUnit.collapseAd()},e.vpaidTimeoutTimerClear=()=>{e.vpaidTimer&&clearTimeout(e.vpaidTimer)},e.vpaidTimeoutTimerStart=()=>{e.vpaidTimeoutTimerClear(),e.vpaidTimer=setTimeout(function(){e.announceLocalError("901"),e.onVpaidEnded()},e.displayOptions.vastOptions.vpaidTimeout)},e.vpaidCallbackListenersAttach=()=>{for(let t in o)e.vpaidAdUnit.subscribe(o[t](),t,e)},e.vpaidCallbackListenersDetach=()=>{if(e.vpaidAdUnit)for(let t in o)e.vpaidAdUnit.unsubscribe(o[t](),t,e)},e.loadVpaid=(t,o)=>{const n=document.createElement("iframe");n.id="fp_"+t.id+"_fluid_vpaid_iframe",n.className="fluid_vpaid_iframe",n.setAttribute("adListId",t.id),n.setAttribute("frameborder","0"),e.domRef.player.parentNode.insertBefore(n,e.domRef.player.nextSibling);const r=document.createElement("script");r.src=o,n.contentWindow.document.head.append(r),e.tempVpaidCounter=0,e.getVPAIDAdInterval=setInterval(function(){if(n&&n.contentWindow){const o=n.contentWindow.getVPAIDAd;if(o&&"function"==typeof o)e.vpaidAdUnit&&e.hardStopVpaidAd(t),e.vpaidAdUnit=o(),clearInterval(e.getVPAIDAdInterval),e.checkVPAIDInterface(e.vpaidAdUnit)&&(e.isAdLinear(t)?(e.isCurrentlyPlayingAd=!0,e.switchPlayerToVpaidMode(t)):(e.debugMessage("non linear vpaid ad is loaded"),e.loadVpaidNonlinearAssets(t)));else{if(e.tempVpaidCounter++,e.tempVpaidCounter>=20)return clearInterval(e.getVPAIDAdInterval),e.rollsById[t.rollListId].error=!0,e.playMainVideoWhenVpaidFails(403),!1;e.debugMessage(e.tempVpaidCounter)}}},100),e.destructors.push(()=>clearInterval(e.getVPAIDAdInterval))},e.onVpaidEnded=t=>{if(t&&t.stopImmediatePropagation(),!e.vpaidAdUnit)return;const o=e.domRef.wrapper.querySelector(".fluid_vpaid_slot");e.vpaidCallbackListenersDetach(),e.vpaidAdUnit=null,clearInterval(e.getVPAIDAdInterval),o&&o.remove(),e.checkForNextAd()},e.playMainVideoWhenVpaidFails=t=>{const o=e.domRef.wrapper.querySelector(".fluid_vpaid_slot");o&&o.remove(),clearInterval(e.getVPAIDAdInterval),e.playMainVideoWhenVastFails(t)}},function(e,o){function n(e){for(const t of e)if(void 0===t.data.attributes.sequence)return[t];return[]}async function r(o,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];var d,c,u,p;const f=t(t({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),{},{children:[]}),{responseXML:m}=await e.sendRequestAsync(o,!0,e.displayOptions.vastOptions.vastTimeout),g=Array.from(m.getElementsByTagName("Ad"));for(const o of g){const m=e.getVastAdTagUriFromWrapper(o),g=void 0!==o.attributes.sequence,h={data:o},y=(o.getElementsByTagName("Linear").length?"linear":o.getElementsByTagName("NonLinearAds").length&&"nonLinear")||"";if(m&&s<=a&&l){const[i]=o.getElementsByTagName("Wrapper"),l=i.attributes.followAdditionalWrappers&&["false","0"].includes(i.attributes.followAdditionalWrappers.value),d=i.attributes.allowMultipleAds&&["true","1"].includes(i.attributes.allowMultipleAds.value),c=i.attributes.fallbackOnNoAd&&["true","1"].includes(i.attributes.fallbackOnNoAd.value);try{const e=await r(m,a,t(t({tagType:"wrapper"},h),{},{fallbackOnNoAd:c}),s+1,!l);e.fallbackOnNoAd=c,(!d||g)&&(e.children=n(e.children)),f.children.push(e)}catch(t){f.children.push({tagType:"wrapper",fallbackOnNoAd:c,httpError:!0}),e.debugMessage("Error when loading Wrapper, will trigger fallback if available",t)}}else if(!m)if("nonLinear"===y)f.children.push(t({tagType:"inLine"},h));else if(Array.from(o.getElementsByTagName("MediaFiles")).length){const e=null==(d=Array.from(o.getElementsByTagName("MediaFiles"))[0])?void 0:d.getElementsByTagName("MediaFile"),n=null==(c=e[0])?void 0:c.textContent.trim();("VPAID"===e[0].getAttribute("apiFramework")||await i(n))&&f.children.push(t({tagType:"inLine"},h))}else if(Array.from(o.getElementsByTagName("AdParameters")).length){const e=Array.from(o.getElementsByTagName("AdParameters"));for(const o of e)try{const e=JSON.parse(o.textContent.trim()),n=null!=(u=null==e?void 0:e.videos)&&u.length?null==(p=null==e?void 0:e.videos[0])?void 0:p.url:"";await i(n)&&f.children.push(t({tagType:"inLine"},h))}catch(e){console.error("Error parsing media file URL:",e)}}}return f}async function i(e){if(!e)return!1;try{const t=await fetch(e);if(!t.ok||-1===t.headers.get("content-type").indexOf("video"))return!1;const o=document.createElement("video");return o.src=e,""!==await o.canPlayType(t.headers.get("content-type"))}catch(e){return console.error("Failed to load media file:",e),!1}}function a(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=[...arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],e.data];return Array.isArray(e.children)&&e.children.length&&e.children.forEach(e=>a(e,o,n)),"inLine"===e.tagType&&o.push(t(t({},e),{},{wrappers:n.filter(Boolean)})),o}e.setCTAFromVast=(t,o)=>{if(e.displayOptions.vastOptions.adCTATextVast&&t){const n=e.extractNodeDataByTagName(t,"MobileText"),r=e.extractNodeDataByTagName(t,"PCText"),i=e.extractNodeDataByTagName(t,"DisplayUrl")||e.extractNodeDataByTagName(t,"Link"),a=e.extractNodeDataByTagName(t,"Tracking"),s=window.matchMedia("(max-width: 768px)").matches;(r||n)&&a&&(o.titleCTA={text:s?n||r:r||n,link:i||null,tracking:a})}},e.getClickThroughUrlFromLinear=t=>{const o=t.getElementsByTagName("VideoClicks");if(o.length){const t=o[0].getElementsByTagName("ClickThrough");if(t.length)return e.extractNodeData(t[0])}return!1},e.getVastAdTagUriFromWrapper=t=>{const o=t.getElementsByTagName("Wrapper");if(typeof o<"u"&&o.length){const t=o[0].getElementsByTagName("VASTAdTagURI");if(t.length)return e.extractNodeData(t[0])}return!1},e.hasInLine=e=>{const t=e.getElementsByTagName("InLine");return typeof t<"u"&&t.length},e.hasVastAdTagUri=e=>{const t=e.getElementsByTagName("VASTAdTagURI");return typeof t<"u"&&t.length},e.getClickThroughUrlFromNonLinear=t=>{let o="";if(t.getElementsByTagName("NonLinear").length){const n=t.getElementsByTagName("NonLinearClickThrough");n.length&&(o=e.extractNodeData(n[0]))}return o},e.getTrackingFromLinear=e=>{const t=e.getElementsByTagName("TrackingEvents");return t.length?t[0].getElementsByTagName("Tracking"):[]},e.getDurationFromLinear=t=>{const o=t.getElementsByTagName("Duration");if(o.length&&typeof o[0].childNodes[0]<"u"){const t=e.extractNodeData(o[0]);return e.convertTimeStringToSeconds(t)}return!1},e.getDurationFromNonLinear=t=>{let o=0;const n=t.getElementsByTagName("NonLinear");return n.length&&typeof n[0].getAttribute("minSuggestedDuration")<"u"&&(o=e.convertTimeStringToSeconds(n[0].getAttribute("minSuggestedDuration"))),o},e.getDimensionFromNonLinear=e=>{const t={width:null,height:null},o=e.getElementsByTagName("NonLinear");return o.length&&(typeof o[0].getAttribute("width")<"u"&&(t.width=o[0].getAttribute("width")),typeof o[0].getAttribute("height")<"u"&&(t.height=o[0].getAttribute("height"))),t},e.getCreativeTypeFromStaticResources=e=>{let t="";const o=e.getElementsByTagName("NonLinear");return o.length&&typeof o[0].childNodes[0]<"u"&&(t=o[0].getElementsByTagName("StaticResource")[0].getAttribute("creativeType")),t.toLowerCase()},e.getMediaFilesFromLinear=e=>{const t=e.getElementsByTagName("MediaFiles");return t.length?t[0].getElementsByTagName("MediaFile"):[]},e.getStaticResourcesFromNonLinear=e=>{let t=[];const o=e.getElementsByTagName("NonLinear");return o.length&&(t=o[0].getElementsByTagName("StaticResource")),t},e.extractNodeDataByTagName=(t,o)=>{const n=t.getElementsByTagName(o);return n&&n.length?e.extractNodeData(n[0]):null},e.extractNodeData=e=>{let t="";for(let o=0;o<e.childNodes.length;o++){const n=e.childNodes[o];8===n.nodeType||3===n.nodeType&&/^\s*$/.test(n.nodeValue)||(t+=n.nodeValue)}return t.replace(/(^\s+|\s+$)/g,"")},e.getAdParametersFromLinear=t=>{const o=t.getElementsByTagName("AdParameters");let n=null;return o.length&&(n=e.extractNodeData(o[0])),n},e.getMediaFileListFromLinear=t=>{const o=[],n=e.getMediaFilesFromLinear(t);if(!n.length)return o;for(let t=0;t<n.length;t++){let r=n[t].getAttribute("mediaType");r||(r="2D"),o.push({src:e.extractNodeData(n[t]),type:n[t].getAttribute("type"),apiFramework:n[t].getAttribute("apiFramework"),codec:n[t].getAttribute("codec"),id:n[t].getAttribute("codec"),fileSize:n[t].getAttribute("fileSize"),delivery:n[t].getAttribute("delivery"),width:n[t].getAttribute("width"),height:n[t].getAttribute("height"),mediaType:r.toLowerCase()})}return o},e.getIconClickThroughFromLinear=t=>{const o=t.getElementsByTagName("IconClickThrough");return o.length?e.extractNodeData(o[0]):""},e.getStaticResourceFromNonLinear=t=>{let o;const n=e.getStaticResourcesFromNonLinear(t);for(let t=0;t<n.length;t++)if(n[t].getAttribute("type")||(o=e.extractNodeData(n[t])),n[t].getAttribute("type")===e.displayOptions.staticResource)return e.extractNodeData(n[t]);return o},e.registerTrackingEvents=(t,o)=>{const n=e.getTrackingFromLinear(t);let r="",i=0;for(let t=0;t<n.length;t++)switch(r=n[t].getAttribute("event"),r){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":typeof o.tracking[r]>"u"&&(o.tracking[r]=[]),typeof o.stopTracking[r]>"u"&&(o.stopTracking[r]=[]),o.tracking[r].push(n[t].textContent.trim()),o.stopTracking[r]=!1;break;case"progress":typeof o.tracking[r]>"u"&&(o.tracking[r]=[]),i=e.convertTimeStringToSeconds(n[t].getAttribute("offset")),typeof o.tracking[r][i]>"u"&&(o.tracking[r][i]={elements:[],stopTracking:!1}),o.tracking[r][i].elements.push(n[t].textContent.trim())}},e.registerClickTracking=(e,t)=>{if(e&&e.length)for(let o=0;o<e.length;o++)""!==e[o]&&t.clicktracking.push(e[o])},e.registerViewableImpressionEvents=(t,o)=>{if(t.length)for(let n=0;n<t.length;n++){const r=e.extractNodeData(t[n]);o.viewImpression.push(r)}},e.registerImpressionEvents=(t,o)=>{if(t.length)for(let n=0;n<t.length;n++){const r=e.extractNodeData(t[n]);o.impression.push(r)}},e.registerErrorEvents=(e,t)=>{typeof e<"u"&&null!==e&&1===e.length&&1===e[0].childNodes.length&&(t.errorUrl=e[0].childNodes[0].nodeValue)},e.announceError=t=>{if(typeof e.vastOptions.errorUrl>"u"||!e.vastOptions.errorUrl)return;const o=typeof t<"u"?parseInt(t):900,n=e.vastOptions.errorUrl.replace("[ERRORCODE]",o);e.callUris([n])},e.getClickTrackingEvents=t=>{const o=[],n=t.getElementsByTagName("VideoClicks");if(!n.length)return;const r=n[0].getElementsByTagName("ClickTracking");if(r.length){for(let t=0;t<r.length;t++){const n=e.extractNodeData(r[t]);o.push(n)}return o}},e.getNonLinearClickTrackingEvents=t=>{const o=[];if(!t.getElementsByTagName("NonLinear").length)return;const n=t.getElementsByTagName("NonLinearClickTracking");if(n.length){for(let t=0;t<n.length;t++){const r=e.extractNodeData(n[t]);o.push(r)}return o}},e.callUris=e=>{for(let t=0;t<e.length;t++)(new Image).src=e[t]},e.recalculateAdDimensions=()=>{const t=e.domRef.player,o=e.domRef.wrapper.querySelector(".vast_clickthrough_layer");o&&(o.style.width=t.offsetWidth+"px",o.style.height=t.offsetHeight+"px");const n=e.checkFullscreenSupport(),r=e.domRef.wrapper.querySelector(".fluid_control_fullscreen"),i=e.domRef.wrapper.querySelector(".context_option_fullscreen");if(n)null===document[n.isFullscreen]?e.fullscreenOff(r,i):e.fullscreenOn(r,i);else{const t=e.domRef.wrapper;-1!==t.className.search(/\bpseudo_fullscreen\b/g)?(t.className+=" pseudo_fullscreen",e.fullscreenOn(r,i)):(t.className=t.className.replace(/\bpseudo_fullscreen\b/g,""),e.fullscreenOff(r,i))}},e.prepareVast=t=>{let o=e.findRoll(t);for(let t=0;t<o.length;t++){const n=o[t];!0!==e.rollsById[n].vastLoaded&&!0!==e.rollsById[n].error&&e.processVastWithRetries(e.rollsById[n])}},e.playMainVideoWhenVastFails=t=>{e.debugMessage("playMainVideoWhenVastFails called"),e.domRef.player.removeEventListener("loadedmetadata",e.switchPlayerToVastMode),e.domRef.player.pause(),e.toggleLoader(!1),e.displayOptions.vastOptions.vastAdvanced.noVastVideoCallback(),!e.vastOptions||typeof e.vastOptions.errorUrl>"u"?e.announceLocalError(t):e.announceError(t),e.switchToMainVideo()},e.switchPlayerToVastMode=()=>{},e.processVastWithRetries=t=>{let o=t.vastTag;const n=t.id;e.domRef.player.addEventListener("adId_"+n,e[t.roll]);const r=function(i,a){if(i&&Array.isArray(a)&&!e.displayOptions.vastOptions.allowVPAID&&a.some(e=>e.vpaid)&&(a=a.filter(e=>!0!==e.vpaid),e.announceLocalError("103","VPAID not allowed, so skipping this VAST tag.")),i&&Array.isArray(a)&&a.length){e.adPool[n]=[],a.forEach((t,o)=>{if(t.id=n+"_AD"+o,t.rollListId=n,"linear"===t.adType){typeof t.iconClick<"u"&&null!==t.iconClick&&t.iconClick.length&&(t.landingPage=t.iconClick);const o=e.getSupportedMediaFileObject(t.mediaFileList);o&&(t.mediaType=o.mediaType)}if(t.adType=t.adType?t.adType:"unknown",e.adPool[n].push(Object.assign({},t)),e.hasTitle()){e.domRef.wrapper.querySelector(".fp_title").style.display="none"}e.rollsById[n].ads.push(t)}),e.rollsById[n].vastLoaded=!0;const t=document.createEvent("Event");t.initEvent("adId_"+n,!1,!0),e.domRef.player.dispatchEvent(t),e.displayOptions.vastOptions.vastAdvanced.vastLoadedCallback()}else e.announceLocalError("101"),t.hasOwnProperty("fallbackVastTags")&&t.fallbackVastTags.length>0?(o=t.fallbackVastTags.shift(),e.processUrl(o,r,n)):("preRoll"===t.roll&&e.preRollFail(t),e.rollsById[n].error=!0)};e.processUrl(o,r,n)},e.processUrl=(t,o,n)=>{e.resolveVastTag(t,0,{tracking:[],stopTracking:[],impression:[],viewImpression:[],clicktracking:[],vastLoaded:!1},o,n)},e.resolveVastTag=(o,n,i,s,l)=>{if(!o||""===o)return s(!1);r(o,e.displayOptions.vastOptions.maxAllowedVastTagRedirects).then(o=>{try{const n=o.children.some(e=>"wrapper"===e.tagType&&e.fallbackOnNoAd&&(!/"tagType":"ad"/.test(JSON.stringify(e))||e.httpError));n&&e.debugMessage("Error on VAST Wrapper, triggering fallbackOnNoAd. Ad tree:",o),o=a(o).map(o=>function(t){var o,n,r,i,a,s,l,d;const c=t.data;if(!c)return;const u=Array.from(c.getElementsByTagName("Creative"));if(u.length)for(let p=0;p<u.length;p++){const f=u[p];try{if("linear"===t.adType){const u=f.getElementsByTagName("Linear")[0];if(!e.hasVastAdTagUri(c)&&e.hasInLine(c))if(t.adFinished=!1,t.vpaid=!1,t.skipoffset=e.convertTimeStringToSeconds(u.getAttribute("skipoffset")),t.clickthroughUrl=e.getClickThroughUrlFromLinear(u),t.duration=e.getDurationFromLinear(u),t.mediaFileList=e.getMediaFileListFromLinear(u),t.adParameters=e.getAdParametersFromLinear(u),t.iconClick=t.iconClick||e.getIconClickThroughFromLinear(u),null!=(o=null==t?void 0:t.mediaFileList)&&o.length&&"VPAID"===(null==(n=t.mediaFileList[0])?void 0:n.apiFramework))t.vpaid=!0;else if((null==(r=null==t?void 0:t.mediaFileList)||!r.length)&&null!=t&&t.adParameters){try{const e=JSON.parse(null==(i=null==t?void 0:t.adParameters)?void 0:i.trim());e&&(t.mediaFileList=[{src:null!=(a=null==e?void 0:e.videos)&&a.length?null==(s=null==e?void 0:e.videos[0])?void 0:s.url:"",type:null!=(l=null==e?void 0:e.videos)&&l.length?null==(d=null==e?void 0:e.videos[0])?void 0:d.mimetype:""}])}catch(e){console.error("Error parsing media file URL:",e)}t.adParameters=null}}if("nonLinear"===t.adType){const o=f.getElementsByTagName("NonLinearAds")[0];!e.hasVastAdTagUri(c)&&e.hasInLine(c)&&(t.vpaid=!1,t.clickthroughUrl=e.getClickThroughUrlFromNonLinear(o),t.duration=e.getDurationFromNonLinear(o),t.dimension=e.getDimensionFromNonLinear(o),t.staticResource=e.getStaticResourceFromNonLinear(o),t.creativeType=e.getCreativeTypeFromStaticResources(o),t.adParameters=e.getAdParametersFromLinear(o),t.adParameters&&(t.vpaid=!0))}break}catch(e){f.firstElementChild&&!("Linear"===f.firstElementChild.tagName||"NonLinearAds"===f.firstElementChild.tagName)&&console.warn("Skipping "+f.firstElementChild.tagName+", this might not be supported yet."),console.error(e)}}return t}(function(o,n){const r=t(t({},o),JSON.parse(JSON.stringify(n)));return r.adType=(r.data.getElementsByTagName("Linear").length?"linear":r.data.getElementsByTagName("NonLinearAds").length&&"nonLinear")||"unknown",[...r.wrappers||[],r.data].filter(Boolean).forEach(t=>{const o=t.getElementsByTagName("Impression");null!==o&&e.registerImpressionEvents(o,r);const n=t.getElementsByTagName("Viewable");null!==n&&e.registerViewableImpressionEvents(n,r);const i=t.getElementsByTagName("Error");null!==i&&e.registerErrorEvents(i,r);const[a]=t.getElementsByTagName("TitleCTA");a&&e.setCTAFromVast(a,r),e.registerTrackingEvents(t,r);const s="linear"===r.adType?e.getClickTrackingEvents(t):e.getNonLinearClickTrackingEvents(t);e.registerClickTracking(s,r)}),r.sequence=r.data.attributes.sequence?Number(r.data.attributes.sequence.value):null,r.played=!1,r}(o,i)));const r=function(t,o,n,r){const{adPod:i}=t.filter(e=>!!e.sequence).sort((e,t)=>e.sequence-t.sequence).reduce((e,t)=>(e.adPod.length<n&&e.totalDuration+t.duration<=o&&e.adPod.push(t),e),{adPod:[],totalDuration:0}),a=t.filter(e=>!e.sequence&&e.duration<o),s=i.map(e=>e.adType).slice(0,-1).every(e=>"linear"===e);return i.length>0&&!r&&s?(e.debugMessage("Playing valid adPod",i),i):(e.debugMessage("Trying to play single ad, adBuffet:",a),a.length>0?[a[0]]:[])}(o,e.rollsById[l].maxTotalDuration||Number.MAX_SAFE_INTEGER,e.rollsById[l].maxTotalQuantity||Number.MAX_SAFE_INTEGER,n);r&&r.length?s(!0,r):s(!1)}catch(e){s(!1)}}).catch(()=>s(!1))},e.setVastList=()=>{const t={},o={preRoll:[],postRoll:[],midRoll:[],onPauseRoll:[]},n={id:null,roll:null,vastLoaded:!1,error:!1,adText:null,adTextPosition:null};let r=0;const i=function(e){let t=!1;return"midRoll"===e.roll&&typeof e.timer>"u"&&(t=!0),t},a=function(t){let o=!1;return t.vastTag||(e.announceLocalError(102,'"vastTag" property is missing from adList.'),o=!0),t.roll||(e.announceLocalError(102,'"roll" is missing from adList.'),o=!0),-1===e.availableRolls.indexOf(t.roll)&&(e.announceLocalError(102,"Only "+e.availableRolls.join(",")+" rolls are supported."),o=!0),t.size&&-1===e.supportedNonLinearAd.indexOf(t.size)&&(e.announceLocalError(102,"Only "+e.supportedNonLinearAd.join(",")+" size are supported."),o=!0),o};if(e.displayOptions.vastOptions.hasOwnProperty("adList"))for(let o in e.displayOptions.vastOptions.adList){let s=e.displayOptions.vastOptions.adList[o];if(a(s)){e.announceLocalError(102,"Wrong adList parameters.");continue}const l="ID"+r;t[l]=Object.assign({},n),t[l]=Object.assign(t[l],e.displayOptions.vastOptions.adList[o]),"midRoll"===s.roll&&(t[l].error=i("midRoll")),t[l].id=l,t[l].ads=[],r++}Object.keys(t).map(function(e){switch(t[e].roll.toLowerCase()){case"preRoll".toLowerCase():o.preRoll.push(t[e]);break;case"midRoll".toLowerCase():o.midRoll.push(t[e]);break;case"postRoll".toLowerCase():o.postRoll.push(t[e]);break;case"onPauseRoll".toLowerCase():o.onPauseRoll.push(t[e]);break;default:console.error("".concat(t[e].roll.toLowerCase()," is not a recognized roll"))}}),e.adGroupedByRolls=o,e.rollsById=t},e.onVastAdEnded=t=>{t&&t.stopImmediatePropagation(),e.vastOptions.adFinished=!0,e.deleteVastAdElements(),e.checkForNextAd()},e.vastLogoBehaviour=t=>{if(!e.displayOptions.layoutControls.logo.showOverAds){const o=e.domRef.wrapper.querySelector(".logo_holder");if(!o)return;o.style.display=t?"none":"inline"}},e.deleteVastAdElements=()=>{e.removeClickthrough(),e.removeSkipButton(),e.removeAdCountdown(),e.removeAdPlayingText(),e.removeCTAButton(),e.vastLogoBehaviour(!1)}},function(e,t){function o(){e.vrViewer.onWindowResize()}e.createCardboardJoystickButton=t=>{const o=e.domRef.wrapper.querySelector(".fluid_vr_joystick_panel"),n=document.createElement("div");return n.className="fluid_vr_button fluid_vr_joystick_"+t,o.appendChild(n),n},e.cardboardRotateLeftRight=t=>{const o=e.vrROTATION_POSITION,n=-e.vrROTATION_POSITION,r={val:t<1?o:n};new TWEEN.Tween(r).to({val:0},e.vrROTATION_SPEED).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){e.vrViewer.OrbitControls.rotateLeft(r.val)}).start()},e.cardboardRotateUpDown=t=>{const o=e.vrROTATION_POSITION,n=-e.vrROTATION_POSITION,r={val:t<1?o:n};new TWEEN.Tween(r).to({val:0},e.vrROTATION_SPEED).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(function(){e.vrViewer.OrbitControls.rotateUp(r.val)}).start()},e.createCardboardJoystick=()=>{const t=e.domRef.wrapper.querySelector(".fluid_vr_container"),o=document.createElement("div");o.className="fluid_vr_joystick_panel",t.appendChild(o);const n=e.createCardboardJoystickButton("up"),r=e.createCardboardJoystickButton("left"),i=e.createCardboardJoystickButton("right"),a=e.createCardboardJoystickButton("down"),s=e.createCardboardJoystickButton("zoomdefault"),l=e.createCardboardJoystickButton("zoomin"),d=e.createCardboardJoystickButton("zoomout");n.addEventListener("click",function(){e.cardboardRotateUpDown(1)}),a.addEventListener("click",function(){e.cardboardRotateUpDown(0)}),i.addEventListener("click",function(){e.cardboardRotateLeftRight(0)}),r.addEventListener("click",function(){e.cardboardRotateLeftRight(1)}),s.addEventListener("click",function(){e.vrViewer.camera.fov=60,e.vrViewer.camera.updateProjectionMatrix()}),d.addEventListener("click",function(){e.vrViewer.camera.fov*=1.1,e.vrViewer.camera.updateProjectionMatrix()}),l.addEventListener("click",function(){e.vrViewer.camera.fov*=.9,e.vrViewer.camera.updateProjectionMatrix()})},e.cardBoardResize=()=>{e.domRef.player.removeEventListener("theatreModeOn",o),e.domRef.player.addEventListener("theatreModeOn",o),e.domRef.player.removeEventListener("theatreModeOff",o),e.domRef.player.addEventListener("theatreModeOff",o)},e.cardBoardSwitchToNormal=()=>{const t=e.domRef.wrapper.querySelector(".fluid_vr_joystick_panel"),o=e.domRef.player;let n=o.parentNode.getElementsByClassName("fluid_controls_container");e.vrViewer.enableEffect(PANOLENS.MODES.NORMAL),e.vrViewer.onWindowResize(),e.vrMode=!1;const r=Array.from(n),i=r.findIndex(e=>e.classList.contains("fluid_vr2_controls_container"));if(-1!==i){const e=n[i],t=r.find((e,t)=>t!==i);o.parentNode.removeChild(e),null==t||t.classList.remove("fluid_vr_controls_container")}e.displayOptions.layoutControls.showCardBoardJoystick&&t&&(t.style.display="block");e.domRef.wrapper.querySelector(".fluid_control_volume_container").style.display="block";const a=e.domRef.wrapper.querySelector(".ad_countdown"),s=e.domRef.wrapper.querySelector(".fluid_ad_cta"),l=e.domRef.wrapper.querySelector(".fluid_ad_playing"),d=e.domRef.wrapper.querySelector(".skip_button");a&&(a.style.display="block"),s&&(s.style.display="block"),l&&(l.style.display="block"),d&&(d.style.display="block")},e.cardBoardHideDefaultControls=()=>{const t=e.domRef.wrapper.querySelector(".fluid_vr_joystick_panel"),o=e.domRef.wrapper.querySelector(".fluid_initial_play"),n=e.domRef.wrapper.querySelector(".fluid_control_volume_container");e.displayOptions.layoutControls.showCardBoardJoystick&&t&&(t.style.display="none"),o&&(e.domRef.wrapper.querySelector(".fluid_initial_play").style.display="none",e.domRef.wrapper.querySelector(".fluid_initial_play_button_container").style.opacity="1"),n.style.display="none"},e.cardBoardCreateVRControls=()=>{const t=e.domRef.wrapper.querySelector(".fluid_controls_container").cloneNode(!0);t.removeAttribute("id"),t.querySelectorAll("*").forEach(function(e){e.removeAttribute("id")}),t.classList.add("fluid_vr2_controls_container"),e.domRef.player.parentNode.insertBefore(t,e.domRef.player.nextSibling),e.copyEvents(t)},e.cardBoardSwitchToVR=()=>{const t=e.domRef.wrapper.querySelector(".fluid_controls_container");e.vrViewer.enableEffect(PANOLENS.MODES.CARDBOARD),e.vrViewer.onWindowResize(),e.vrViewer.disableReticleControl(),e.vrMode=!0,t.classList.add("fluid_vr_controls_container"),e.cardBoardHideDefaultControls(),e.cardBoardCreateVRControls();const o=e.domRef.wrapper.querySelector(".ad_countdown"),n=e.domRef.wrapper.querySelector(".fluid_ad_cta"),r=e.domRef.wrapper.querySelector(".fluid_ad_playing"),i=e.domRef.wrapper.querySelector(".skip_button");o&&(o.style.display="none"),n&&(n.style.display="none"),r&&(r.style.display="none"),i&&(i.style.display="none")},e.cardBoardMoveTimeInfo=()=>{const t=e.domRef.wrapper.querySelector(".fluid_control_duration"),o=e.domRef.wrapper.querySelector(".fluid_controls_container");t.classList.add("cardboard_time"),o.appendChild(t),e.controlDurationUpdate=function(){const t=e.formatTime(e.domRef.player.currentTime),o=e.formatTime(e.currentVideoDuration),n=e.domRef.player.parentNode.getElementsByClassName("fluid_control_duration");let r="";if(e.isCurrentlyPlayingAd){r="<span class='ad_timer_prefix'>AD : </span>"+t+" / "+o;for(let e=0;e<n.length;e++)n[e].classList.add("ad_timer_prefix")}else{r=t+" / "+o;for(let e=0;e<n.length;e++)n[e].classList.remove("ad_timer_prefix")}for(let e=0;e<n.length;e++)n[e].innerHTML=r}},e.cardBoardAlterDefaultControls=()=>{e.cardBoardMoveTimeInfo()},e.createCardboardView=()=>{const t=document.createElement("div");t.className="fluid_vr_container",e.domRef.player.parentNode.insertBefore(t,e.domRef.player.nextSibling),PANOLENS.VideoPanorama.prototype.pauseVideo=function(){},PANOLENS.VideoPanorama.prototype.playVideo=function(){},e.vrPanorama=new PANOLENS.VideoPanorama("",{videoElement:e.domRef.player,autoplay:e.displayOptions.layoutControls.autoPlay,loop:!!e.displayOptions.layoutControls.loop}),e.vrViewer=new PANOLENS.Viewer({container:t,controlBar:!0,controlButtons:[],enableReticle:!1}),e.vrViewer.add(e.vrPanorama),e.vrViewer.enableEffect(PANOLENS.MODES.NORMAL),e.vrViewer.onWindowResize(),("Android"===e.getMobileOs().userOs||"iOS"===e.getMobileOs().userOs)&&e.vrViewer.enableControl(1),e.cardBoardAlterDefaultControls(),e.cardBoardResize(),e.vrViewer.initialCameraPosition=JSON.parse(JSON.stringify(e.vrViewer.camera.position)),e.displayOptions.layoutControls.showCardBoardJoystick&&("Android"===e.getMobileOs().userOs||"iOS"===e.getMobileOs().userOs||e.createCardboardJoystick(),e.vrViewer.OrbitControls.noZoom=!0),e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_cardboard",function(){e.vrMode?e.cardBoardSwitchToNormal():e.cardBoardSwitchToVR()})},e.createCardboard=()=>{e.displayOptions.layoutControls.showCardBoardView&&(e.domRef.wrapper.querySelector(".fluid_control_cardboard").style.display="inline-block",window.PANOLENS?e.createCardboardView():import("./panolens.module-DzIQNSzo.mjs").then(t=>{window.PANOLENS=t,e.createCardboardView()}))}},function(e,t){function o(t){const o=e.domRef.wrapper.querySelector(".fluid_control_subtitles");let n=!1;for(let e=0;e<o.children.length;e++)"block"===o.children[e].style.display&&(n=!0,o.children[e].style.display="none");n||e.openCloseSubtitlesSwitch()}function n(){e.renderSubtitles()}e.subtitleSizeLevels=[50,75,100,150,200],e.currentSubtitleSizeIndex=e.subtitleSizeLevels.indexOf(100),e.subtitleFetchParse=t=>{e.sendRequest(t.url,!1,e.displayOptions.vastOptions.vastTimeout,function(){const t=this;if(4===t.readyState&&200!==t.status||4!==t.readyState||200!==t.status)return;const o=t.responseText,n=new WebVTT.Parser(window,WebVTT.StringDecoder()),r=[];n.oncue=function(e){r.push(e)},n.onregion=function(e){},n.parse(o),n.flush(),e.subtitlesData=r})},e.createSubtitlesSwitch=()=>{const t="OFF";if(e.subtitlesData=[],!e.displayOptions.layoutControls.subtitlesEnabled)return void(e.domRef.wrapper.querySelector(".fluid_control_subtitles").style.display="none");const r=[];r.push({label:t,url:"na",lang:t});const i=e.domRef.player.querySelectorAll("track");[].forEach.call(i,function(e){"metadata"===e.kind&&e.src&&r.push({label:e.label,url:e.src,lang:e.srclang,default:e.default})}),e.subtitlesTracks=r;const a=e.domRef.wrapper.querySelector(".fluid_control_subtitles");a.style.display="inline-block";let s=!1;const l=document.createElement("div");l.className="fluid_subtitles_list",l.style.display="none",e.addSubtitleSizeControls(l,a);let d=!1;const c=!!e.subtitlesTracks.find(e=>e.default);e.subtitlesTracks.forEach(function(o){let n="";const r=e.displayOptions.layoutControls.subtitlesOnByDefault;(!d&&(r&&o.default||!c&&o.label!==t||1===e.subtitlesTracks.length)||!r&&o.label===t)&&(n="subtitle_selected",e.subtitleFetchParse(o),d=!0);const i=document.createElement("div");i.className="fluid_subtitle_list_item",i.innerHTML='<span class="subtitle_button_icon '+n+'"></span>'+o.label,i.addEventListener("click",function(o){o.stopPropagation();const n=this,r=e.domRef.wrapper.getElementsByClassName("subtitle_button_icon");for(let e=0;e<r.length;e++)r[e].className=r[e].className.replace("subtitle_selected","");n.firstChild.className+=" subtitle_selected",e.subtitlesTracks.forEach(function(o){o.label===n.innerText.replace(/(\r\n\t|\n|\r\t)/gm,"")&&(o.label===t?e.subtitlesData=[]:e.subtitleFetchParse(o))}),e.openCloseSubtitlesSwitch()}),l.appendChild(i),s=!0}),s?(a.appendChild(l),a.removeEventListener("click",o),a.addEventListener("click",o)):e.domRef.wrapper.querySelector(".fluid_control_subtitles").style.display="none",e.domRef.player.removeEventListener("timeupdate",n),e.domRef.player.addEventListener("timeupdate",n)},e.addSubtitleSizeControls=(t,o)=>{const n=e.createSubtitleSizeButton(),r=e.createSubtitleSizeMenu();r.style.display="none",t.appendChild(n),o.appendChild(r)},e.renderSubtitles=()=>{const t=e.domRef.player;let o=Math.floor(t.currentTime),n=!1,r=e.domRef.wrapper.querySelector(".fluid_subtitles_container");if(e.isCurrentlyPlayingAd)r.innerHTML="";else{for(let t=0;t<e.subtitlesData.length;t++)o>=e.subtitlesData[t].startTime&&o<=e.subtitlesData[t].endTime&&(r.innerHTML="",r.appendChild(WebVTT.convertCueToDOMTree(window,e.subtitlesData[t].text)),n=!0);n||(r.innerHTML="")}},e.openCloseSubtitlesSwitch=()=>{const t=e.domRef.wrapper.querySelector(".fluid_subtitles_list");if(e.isCurrentlyPlayingAd)t.style.display="none";else{if("none"===t.style.display){t.style.display="block";const e=function(o){t.removeEventListener("mouseleave",e),t.style.display="none"};t.addEventListener("mouseleave",e)}else t.style.display="none";e.setMenusMaxHeight()}},e.createSubtitles=()=>{const t=document.createElement("div");t.className="fluid_subtitles_container",e.domRef.player.parentNode.insertBefore(t,e.domRef.player.nextSibling),e.displayOptions.layoutControls.subtitlesEnabled&&import("./browser-index-Tim88xTn.mjs").then(e=>e.b).then(t=>{window.WebVTT=t.WebVTT||t.default.WebVTT,e.createSubtitlesSwitch()})},e.resizeSubtitles=t=>{const o=t/100;e.domRef.wrapper.querySelector(".fluid_subtitles_container").style.fontSize="".concat(o,"em")},e.adjustSubtitleSizeByOperation=t=>{if("+"===t&&e.currentSubtitleSizeIndex<e.subtitleSizeLevels.length-1)e.currentSubtitleSizeIndex++;else{if(!("-"===t&&e.currentSubtitleSizeIndex>0))return;e.currentSubtitleSizeIndex--}const o=e.subtitleSizeLevels[e.currentSubtitleSizeIndex];e.resizeSubtitles(o),e.updateSubtitleSizeMenuSelection()},e.updateSubtitleSizeMenuSelection=()=>{const t=e.domRef.wrapper.querySelector(".fluid_subtitle_size_menu");if(!t)return;const o=t.querySelectorAll(".subtitle_button_icon");for(let e=0;e<o.length;e++)o[e].className=o[e].className.replace("subtitle_size_selected","");const n=Array.from(t.querySelectorAll(".fluid_subtitle_size_button")).filter(e=>!e.classList.contains("fluid_sub_menu_button"));if(n[e.currentSubtitleSizeIndex]){const t=n[e.currentSubtitleSizeIndex].querySelector(".subtitle_button_icon");t&&(t.className+=" subtitle_size_selected")}},e.createSubtitleSizeButton=()=>{const t=document.createElement("div");return t.className="fluid_subtitle_list_item fluid_sub_menu_button arrow-right",t.innerHTML="Font Size",t.addEventListener("click",t=>{t.stopPropagation(),e.toggleSubtitleSizeMenu(),e.openCloseSubtitlesSwitch()}),t},e.createSubtitleSizeMenu=()=>{const t=document.createElement("div");t.className="fluid_subtitle_size_menu";const o=e.createBackButtonForSubtitleSizeMenu();return t.appendChild(o),e.subtitleSizeLevels.forEach((o,n)=>{const r=document.createElement("div");r.className="fluid_subtitle_size_button";const i=100===o;r.innerHTML='<span class="subtitle_button_icon '+(i?"subtitle_size_selected":"")+'"></span>'+o+"%",r.addEventListener("click",t=>{t.stopPropagation(),e.toggleSubtitleSizeMenu(),e.resizeSubtitles(o),e.currentSubtitleSizeIndex=n,e.updateSubtitleSizeMenuSelection()}),t.appendChild(r)}),t},e.createBackButtonForSubtitleSizeMenu=()=>{const t=document.createElement("div");return t.className="fluid_subtitle_size_button fluid_sub_menu_button arrow-left",t.innerHTML="Font Size",t.addEventListener("click",t=>{t.stopPropagation(),e.toggleSubtitleSizeMenu(),e.openCloseSubtitlesSwitch()}),t},e.toggleSubtitleSizeMenu=()=>{const t=e.domRef.wrapper.querySelector(".fluid_subtitle_size_menu"),o=function(e){t.removeEventListener("mouseleave",o),t.style.display="none"};"block"===t.style.display?(t.style.display="none",t.removeEventListener("mouseleave",o)):(t.style.display="block",t.addEventListener("mouseleave",o)),e.setMenusMaxHeight()},e.setMenusMaxHeight=()=>{const t=e.domRef.wrapper.offsetHeight-e.domRef.wrapper.querySelector(".fluid_controls_container").offsetHeight,o=e.domRef.wrapper.querySelector(".fluid_subtitle_size_menu"),n=e.domRef.wrapper.querySelector(".fluid_subtitles_list");o.style.maxHeight="".concat(t,"px"),n.style.maxHeight="".concat(t,"px")},e.repositionSubtitlesContainer=t=>{e.domRef.wrapper.querySelector(".fluid_subtitles_container").style.bottom=t}},function(e,t){e.setupThumbnailPreviewVtt=()=>{e.sendRequest(e.displayOptions.layoutControls.timelinePreview.file,!1,e.displayOptions.vastOptions.vastTimeout,function(){const t=this;if(4===t.readyState&&200!==t.status||4!==t.readyState||200!==t.status)return;const o=t.responseText,n=(new window.WebVTTParser).parse(o);e.timelinePreviewData=function(t){if(!(typeof t.cues<"u"&&t.cues.length))return[];const o=[];let n=null,r=null;for(let i=0;i<t.cues.length;i++){n=t.cues[i].text.split("#");let a,s=0,l=0,d=122.5,c=69;2===n.length&&0===n[1].indexOf("xywh=")&&(r=n[1].substring(5),r=r.split(","),4===r.length&&(e.displayOptions.layoutControls.timelinePreview.spriteImage=!0,s=parseInt(r[0]),l=parseInt(r[1]),d=parseInt(r[2]),c=parseInt(r[3]))),e.displayOptions.layoutControls.timelinePreview.spriteRelativePath&&-1!==e.displayOptions.layoutControls.timelinePreview.file.indexOf("/")&&(typeof e.displayOptions.layoutControls.timelinePreview.sprite>"u"||""===e.displayOptions.layoutControls.timelinePreview.sprite)?(a=e.displayOptions.layoutControls.timelinePreview.file.substring(0,e.displayOptions.layoutControls.timelinePreview.file.lastIndexOf("/")),a+="/"+n[0]):a=e.displayOptions.layoutControls.timelinePreview.sprite?e.displayOptions.layoutControls.timelinePreview.sprite:n[0],o.push({startTime:t.cues[i].startTime,endTime:t.cues[i].endTime,image:a,x:s,y:l,w:d,h:c})}return o}(n)})},e.generateTimelinePreviewTags=()=>{const t=e.domRef.wrapper.querySelector(".fluid_controls_progress_container"),o=document.createElement("div");o.className="fluid_timeline_preview_container",o.style.display="none",o.style.position="absolute",t.appendChild(o);const n=document.createElement("div");n.className="fluid_timeline_preview_container_shadow",n.style.position="absolute",n.style.display="none",n.style.opacity=1,t.appendChild(n)},e.getThumbnailCoordinates=t=>{if(e.timelinePreviewData.length)for(let o=0;o<e.timelinePreviewData.length;o++)if(t>=e.timelinePreviewData[o].startTime&&t<=e.timelinePreviewData[o].endTime)return e.timelinePreviewData[o];return!1},e.drawTimelinePreview=t=>{const o=e.domRef.wrapper.querySelector(".fluid_timeline_preview_container"),n=e.domRef.wrapper.querySelector(".fluid_timeline_preview_container_shadow"),r=e.domRef.wrapper.querySelector(".fluid_controls_progress_container"),i=r.clientWidth;if(e.isCurrentlyPlayingAd)return void("none"!==o.style.display&&(o.style.display="none"));const a=e.getEventOffsetX(t,r);let s=null;if(i){s=e.currentVideoDuration*a/i;const t=e.getThumbnailCoordinates(s);n.style.width=i+"px",n.style.display="block",!1!==t?(o.style.width=t.w+"px",o.style.height=t.h+"px",n.style.height=t.h+"px",o.style.background="url("+t.image+") no-repeat scroll -"+t.x+"px -"+t.y+"px",o.style.left=a-t.w/2+"px",o.style.display="block",e.displayOptions.layoutControls.timelinePreview.spriteImage||(o.style.backgroundSize="contain")):o.style.display="none"}},e.setupThumbnailPreview=()=>{let t=e.displayOptions.layoutControls.timelinePreview;if(!t||!t.type)return;let o="mousemove",n="mouseleave";if(e.mobileInfo.userOs&&(o="touchmove",n="touchend"),e.domRef.wrapper.querySelector(".fluid_controls_progress_container").addEventListener(o,e.drawTimelinePreview.bind(e),!1),e.domRef.wrapper.querySelector(".fluid_controls_progress_container").addEventListener(n,function(t){const o=e.domRef.wrapper.querySelector(".fluid_controls_progress_container");typeof t.clientX<"u"&&o.contains(document.elementFromPoint(t.clientX,t.clientY))||(e.domRef.wrapper.querySelector(".fluid_timeline_preview_container").style.display="none",e.domRef.wrapper.querySelector(".fluid_timeline_preview_container_shadow").style.display="none")},!1),e.generateTimelinePreviewTags(),"VTT"===t.type&&"string"==typeof t.file)import("./webvtt-B40-cwOh.mjs").then(t=>{window.WebVTTParser=t.default,e.setupThumbnailPreviewVtt()});else{if("static"!==t.type||"object"!=typeof t.frames)throw"Invalid thumbnail-preview - type must be VTT or static";t.spriteImage=!0,e.timelinePreviewData=t.frames}e.showTimeOnHover=!1}},function(e,t){const o="2.0";e.renderLinearAd=(t,n)=>{e.toggleLoader(!1),e.hideLiveIndicator(),e.isLiveStream=null,e.vastOptions=t,n&&e.backupMainVideoContentTime(t.rollListId);const r=()=>{if(e.adFinished)return void e.domRef.player.removeEventListener("timeupdate",r);const t=Math.floor(e.domRef.player.currentTime);0!==e.vastOptions.duration&&e.scheduleTrackingEvent(t,e.vastOptions.duration),t>=e.vastOptions.duration-1&&0!==e.vastOptions.duration&&(e.domRef.player.removeEventListener("timeupdate",r),e.adFinished=!0)};(t=>{e.switchPlayerToVpaidMode=t=>{e.debugMessage("starting function switchPlayerToVpaidMode");const n="fp_"+t.id+"_fluid_vpaid_iframe",r={};r.AdParameters=t.adParameters;const i=document.createElement("div");i.className="fluid_vpaid_slot",i.setAttribute("adListId",t.id),e.domRef.player.parentNode.insertBefore(i,n.nextSibling);const a={slot:i,videoSlot:e.domRef.player,videoSlotCanAutoPlay:!0},s=e.vpaidAdUnit.handshakeVersion(o);if(1===e.compareVersion(o,s))return t.error=!0,e.playMainVideoWhenVpaidFails(403),!1;!1!==e.vastOptions.skipoffset&&e.addSkipButton(),e.domRef.player.loop=!1,e.domRef.player.removeAttribute("controls"),e.vpaidCallbackListenersAttach();const l=e.fullscreenMode?"fullscreen":"normal",d=e.domRef.player.offsetWidth,c=e.domRef.player.offsetHeight;e.vpaidAdUnit.initAd(d,c,l,3e3,r,a);const u=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress");for(let t=0;t<u.length;t++)u[t].style.backgroundColor=e.displayOptions.layoutControls.adProgressColor;e.toggleLoader(!1),t.played=!0,e.adFinished=!1},e.switchPlayerToVastMode=()=>{if(e.vastOptions.duration||(e.vastOptions.duration="streaming"===n.delivery?1/0:e.domRef.player.duration),e.displayOptions.layoutControls.showCardBoardView)t.landingPage?e.addCTAButton(t.landingPage):e.addCTAButton(t.clickthroughUrl);else{let o=[void 0,!0].includes(e.displayOptions.vastOptions.adClickable);void 0!==e.rollsById[t.rollListId].adClickable&&(o=e.rollsById[t.rollListId].adClickable),o&&e.addClickthroughLayer(),e.addCTAButton(t.landingPage)}!1!==e.vastOptions.skipoffset&&e.addSkipButton(),e.domRef.player.loop=!1,e.addAdCountdown(),e.domRef.player.removeAttribute("controls"),e.vastLogoBehaviour(!0);const o=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress");for(let t=0;t<o.length;t++)o[t].style.backgroundColor=e.displayOptions.layoutControls.adProgressColor;if(e.rollsById[t.rollListId].adText||t.adText){const o=t.adText?t.adText:e.rollsById[t.rollListId].adText;e.addAdPlayingText(o)}if(e.positionTextElements(t),e.toggleLoader(!1),t.played=!0,e.adFinished=!1,e.domRef.player.play(),e.trackSingleEvent("impression"),e.domRef.player.removeEventListener("loadedmetadata",e.switchPlayerToVastMode),e.vrMode){const t=e.domRef.wrapper.querySelector(".ad_countdown"),o=e.domRef.wrapper.querySelector(".fluid_ad_cta"),n=e.domRef.wrapper.querySelector(".fluid_ad_playing"),r=e.domRef.wrapper.querySelector(".skip_button");t&&(t.style.display="none"),o&&(o.style.display="none"),n&&(n.style.display="none"),r&&(r.style.display="none")}},e.domRef.player.pause(),e.detachStreamers();const n=e.getSupportedMediaFileObject(e.vastOptions.mediaFileList);if(e.displayOptions.layoutControls.showCardBoardView&&"360"!==t.mediaType)return t.error=!0,e.playMainVideoWhenVastFails(403),!1;const r=e.vastOptions.vpaid;if(!r&&n.isUnsuportedHls)import("./hls-DdVBxpbO.mjs").then(t=>{window.Hls=t.default;const o=new Hls({debug:typeof FP_DEBUG<"u"&&!0===FP_DEBUG,startPosition:0,p2pConfig:{logLevel:!1},enableWebVTT:!1,enableCEA708Captions:!1});o.attachMedia(e.domRef.player),o.loadSource(n.src),e.isCurrentlyPlayingAd=!0,o.once(Hls.Events.LEVEL_LOADED,function(t,o){e.isLiveStream=!!o.details.live,o.details.live?e.showLiveIndicator():e.hideLiveIndicator()}),e.hlsPlayer=o,e.domRef.player.addEventListener("loadedmetadata",e.switchPlayerToVastMode),e.domRef.player.addEventListener("ended",()=>{o.detachMedia(),o.destroy(),e.hlsPlayer=!1,e.onVastAdEnded()}),e.domRef.player.play()});else if(r)e.loadVpaid(t,n.src),e.displayOptions.vastOptions.showProgressbarMarkers&&e.hideAdMarkers();else{if(!1===n.src)return t.error=!0,e.playMainVideoWhenVastFails(403),!1;e.domRef.player.addEventListener("loadedmetadata",e.switchPlayerToVastMode),e.domRef.player.src=n.src,e.isCurrentlyPlayingAd=!0,e.displayOptions.vastOptions.showProgressbarMarkers&&e.hideAdMarkers(),e.domRef.player.load(),e.domRef.player.addEventListener("ended",e.onVastAdEnded)}})(t),e.domRef.player.addEventListener("timeupdate",r)},e.playRoll=t=>{const o=[];for(let e=0;e<t.length;e++)o.push(t[e]);if(e.temporaryAdPods=o,null!==e.vastOptions&&"linear"===e.vastOptions.adType.toLowerCase())return;const n=e.getNextAdPod();null!==n&&e.renderLinearAd(n,!0);const r=e.rollsById[n.rollListId].roll;e.currentMediaSourceType=r},e.backupMainVideoContentTime=t=>{switch(e.rollsById[t].roll){case"midRoll":e.domRef.player.mainVideoCurrentTime=e.domRef.player.currentTime-1;break;case"postRoll":e.domRef.player.mainVideoCurrentTime=e.mainVideoDuration,e.autoplayAfterAd=!1,e.domRef.player.currentTime=e.mainVideoDuration;break;case"preRoll":if(e.domRef.player.currentTime>0||e.domRef.player.safariPlayheadPosition){var o;const t=null!==(o=e.domRef.player.safariPlayheadPosition)&&void 0!==o?o:e.domRef.player.currentTime;e.domRef.player.mainVideoCurrentTime=t-1}}},e.getSupportedMediaFileObject=t=>{let o=null,n=!1;if(t.length)for(let r=0;r<t.length;r++){if("VPAID"===t[r].apiFramework){o=t[r],n=!0;break}{const i=e.getMediaFileTypeSupportLevel(t[r].type);if(("maybe"===i||"probably"===i)&&(o=t[r],n=!0),"probably"===i)break;"no"===i&&"streaming"===t[r].delivery&&("application/vnd.apple.mpegurl"===t[r].type||"application/x-mpegURL"===t[r].type)&&(o=t[r],o.isUnsuportedHls=!0,n=!0)}}return!1!==n&&o},e.getMediaFileTypeSupportLevel=e=>{if(null===e)return null;return document.createElement("video").canPlayType(e)||"no"},e.scheduleTrackingEvent=(t,o)=>{0===t&&(e.trackSingleEvent("start"),e.observe(),e.domRef.player.timeInView=0),e.domRef.player.inView&&(e.domRef.player.timeInView>2?e.trackSingleEvent("viewImpression"):e.domRef.player.timeInView+=t),typeof e.vastOptions.tracking.progress<"u"&&e.vastOptions.tracking.progress.length&&typeof e.vastOptions.tracking.progress[t]<"u"&&e.trackSingleEvent("progress",t),t===Math.floor(o/4)&&e.trackSingleEvent("firstQuartile"),t===Math.floor(o/2)&&e.trackSingleEvent("midpoint"),t===Math.floor(3*o/4)&&e.trackSingleEvent("thirdQuartile"),t>=o-1&&e.trackSingleEvent("complete")},e.trackSingleEvent=(t,o)=>{if(typeof e.vastOptions>"u"||null===e.vastOptions)return;let n=[];switch(n.length=0,t){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":!1===e.vastOptions.stopTracking[t]&&(null!==e.vastOptions.tracking[t]&&(n=e.vastOptions.tracking[t]),e.vastOptions.stopTracking[t]=!0);break;case"progress":e.vastOptions.tracking.progress[o].elements.forEach(function(t,r){!1===e.vastOptions.tracking.progress[o].stopTracking&&e.vastOptions.tracking.progress[o].elements.length&&(n=e.vastOptions.tracking.progress[o].elements),e.vastOptions.tracking.progress[o].stopTracking=!0});break;case"impression":typeof e.vastOptions.impression<"u"&&null!==e.vastOptions.impression&&typeof e.vastOptions.impression.length<"u"&&(n=e.vastOptions.impression);break;case"viewImpression":if(!0===e.vastOptions.stopTracking.viewImpression)break;typeof e.vastOptions.viewImpression<"u"&&null!==e.vastOptions.viewImpression&&typeof e.vastOptions.viewImpression.length<"u"&&(n=e.vastOptions.viewImpression,e.vastOptions.stopTracking.viewImpression=!0)}e.callUris(n)},e.completeNonLinearStatic=t=>{e.closeNonLinear(t.id),!1===e.adFinished&&(e.adFinished=!0,e.trackSingleEvent("complete")),clearInterval(e.nonLinearTracking)},e.createNonLinearStatic=t=>{if(e.vastOptions=t,e.createBoard(t),!0===e.rollsById[t.rollListId].error||!0===t.error)return void e.announceLocalError(101);e.adFinished=!1;let o=!!e.rollsById[t.rollListId].nonLinearDuration&&e.rollsById[t.rollListId].nonLinearDuration;e.vastOptions.vpaid||(e.trackSingleEvent("start"),o=o||e.vastOptions.duration,e.nonLinearTracking=setInterval(function(){if(!0===e.adFinished)return;const t=Math.floor(e.domRef.player.currentTime);e.scheduleTrackingEvent(t,o),t>=o-1&&(e.adFinished=!0)},400),e.destructors.push(()=>clearInterval(e.nonLinearTracking)));const n=parseInt(e.getCurrentTime())+parseInt(o);e.scheduleTask({time:n,closeStaticAd:t,rollListId:t.rollListId})},e.createVpaidNonLinearBoard=t=>{e.loadVpaidNonlinearAssets=function(t){e.vastOptions=t,e.debugMessage("starting function switchPlayerToVpaidMode");const n=t.vAlign?t.vAlign:e.nonLinearVerticalAlign,r=t.vpaidNonLinearCloseButton?t.vpaidNonLinearCloseButton:e.vpaidNonLinearCloseButton,i="fp_"+t.id+"_fluid_vpaid_iframe",a={};a.AdParameters=t.adParameters;const s=document.createElement("div");s.id="fluid_vpaidNonLinear_"+t.id,s.className="fluid_vpaidNonLinear_"+n,s.className+=" fluid_vpaidNonLinear_ad",s.setAttribute("adListId",t.id);let l=Math.min(468,e.domRef.player.offsetWidth),d=Math.min(60,Math.floor(e.domRef.player.offsetHeight/4));if(typeof t.size<"u"){const e=t.size.split("x");l=e[0],d=e[1]}else t.dimension.width&&t.dimension.height&&(l=t.dimension.width,d=t.dimension.height);if(s.style.width="100%",s.style.height=d+"px",r){const o=document.createElement("div");o.className="fluid_vpaidNonLinear_frame",o.style.width=l+"px",o.style.height=d+"px",s.appendChild(o);const n=document.createElement("div");n.className="close_button",n.innerHTML="",n.title=e.displayOptions.layoutControls.closeButtonCaption;const[r]=t.id.split("_");n.onclick=function(t){if(e.hardStopVpaidAd(""),typeof t.stopImmediatePropagation<"u"&&t.stopImmediatePropagation(),e.adFinished=!0,"onPauseRoll"===e.rollsById[r].roll&&e.onPauseRollAdPods[0]){const t=e.onPauseRollAdPods[0];e.createBoard(t),e.currentOnPauseRollAd=e.onPauseRollAdPods[0],delete e.onPauseRollAdPods[0]}return!1},o.appendChild(n)}const c=document.createElement("iframe");c.id=e.videoPlayerId+"non_linear_vapid_slot_iframe",c.className="fluid_vpaid_nonlinear_slot_iframe",c.setAttribute("width",l+"px"),c.setAttribute("height",d+"px"),c.setAttribute("sandbox","allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"),c.setAttribute("frameborder","0"),c.setAttribute("scrolling","no"),c.setAttribute("marginwidth","0"),c.setAttribute("marginheight","0"),s.appendChild(c),e.domRef.player.parentNode.insertBefore(s,i.nextSibling);const u=c.contentWindow.document.createElement("div");c.contentWindow.document.body.appendChild(u),e.vastOptions.slotIframe=c,e.vastOptions.slotFrame=undefined;const p={slot:u,videoSlot:e.domRef.player,videoSlotCanAutoPlay:!0};e.debugMessage(t);const f=e.vpaidAdUnit.handshakeVersion(o);if(1===e.compareVersion(o,f))return t.error=!0,e.playMainVideoWhenVpaidFails(403),!1;e.domRef.player.loop=!1,e.domRef.player.removeAttribute("controls"),e.vpaidCallbackListenersAttach();const m=e.fullscreenMode?"fullscreen":"normal";e.vpaidAdUnit.initAd(l,d,m,3e3,a,p),e.toggleLoader(!1),t.played=!0,e.adFinished=!1},e.loadVpaid(t,t.staticResource),e.debugMessage("create non linear vpaid")},e.createNonLinearBoard=t=>{t.played=!0;const o=document.createElement("div"),n=e.rollsById[t.rollListId].vAlign?e.rollsById[t.rollListId].vAlign:e.nonLinearVerticalAlign,r=new Image;r.src=t.staticResource,r.id="fluid_nonLinear_imgCreative_"+t.id+"_"+e.videoPlayerId,r.onerror=function(){e.rollsById[t.rollListId].error=!0,e.announceError(500)},r.onload=function(){const o=e.domRef.player.clientWidth;let n,i,a,s;if(typeof e.rollsById[t.rollListId].size<"u"?(n=e.rollsById[t.rollListId].size.split("x")[0],i=e.rollsById[t.rollListId].size.split("x")[1]):t.dimension.width&&t.dimension.height?(n=t.dimension.width,i=t.dimension.height):(n=r.width,i=r.height),n>o?(a=o-5,s=i*a/n):(a=n,s=i),"onPauseRoll"!==e.rollsById[t.rollListId].roll){const o=e.domRef.wrapper.querySelector("#fluid_nonLinear_"+t.id);o&&(o.style.display="")}const l=e.domRef.wrapper.querySelector("#"+r.id);l.width=a,l.height=s,e.trackSingleEvent("impression")},o.id="fluid_nonLinear_"+t.id,o.className="fluid_nonLinear_"+n,o.className+=" fluid_nonLinear_ad",o.innerHTML=r.outerHTML,o.style.display="none",o.onclick=function(){typeof t.clickthroughUrl<"u"&&window.open(t.clickthroughUrl),typeof t.clicktracking<"u"&&e.callUris([t.clicktracking])},typeof t.clickthroughUrl<"u"&&(o.style.cursor="pointer");const i=document.createElement("div");i.className="close_button",i.innerHTML="",i.title=e.displayOptions.layoutControls.closeButtonCaption;const a=t.rollListId;i.onclick=function(t){if(this.parentElement.remove(),typeof t.stopImmediatePropagation<"u"&&t.stopImmediatePropagation(),e.adFinished=!0,clearInterval(e.nonLinearTracking),"onPauseRoll"===e.rollsById[a].roll&&e.onPauseRollAdPods[0]){const t=e.onPauseRollAdPods[0];e.createBoard(t),e.currentOnPauseRollAd=e.onPauseRollAdPods[0],delete e.onPauseRollAdPods[0]}return!1},o.appendChild(i),e.domRef.player.parentNode.insertBefore(o,e.domRef.player.nextSibling)},e.createBoard=t=>{if(t.vpaid)e.hardStopVpaidAd(""),e.createVpaidNonLinearBoard(t);else{if(typeof t.staticResource>"u"||-1===e.supportedStaticTypes.indexOf(t.creativeType))return t.error=!0,void(!e.vastOptions||typeof e.vastOptions.errorUrl>"u"?e.announceLocalError(503):e.announceError(503));e.createNonLinearBoard(t)}},e.closeNonLinear=t=>{const o=e.domRef.wrapper.querySelector("#fluid_nonLinear_"+t+", #fluid_vpaidNonLinear_"+t);o&&o.remove()},e.rollGroupContainsLinear=t=>{let o=!1;for(let n=0;n<t.length;n++)if(e.rollsById[t[n].id].adType&&"linear"===e.rollsById[t[n].id].adType){o=!0;break}return o},e.rollGroupContainsNonlinear=t=>{let o=!1;for(let n=0;n<t.length;n++)if("nonlinear"===e.rollsById[t[n].id].adType.toLowerCase()){o=!0;break}return o},e.preRollFail=()=>{const t=e.preRollAdPodsLength;e.preRollVastResolved++,e.preRollVastResolved===t&&e.preRollAdsPlay()},e.preRollSuccess=()=>{const t=e.preRollAdPodsLength;e.preRollVastResolved++,e.preRollVastResolved===t&&e.preRollAdsPlay()},e.preRollAdsPlay=()=>{const t=e.preRollAdPods,o={linear:[],nonLinear:[]};e.firstPlayLaunched=!0;for(let n=0;n<t.length;n++)e.rollsById[t[n]].ads.forEach(t=>{!0!==t.played&&("linear"===t.adType&&o.linear.push(t),"nonLinear"===t.adType&&(o.nonLinear.push(t),e.scheduleTask({time:0,playRoll:"midRoll",rollListId:t.rollListId})))});o.linear.length>0?(e.toggleLoader(!1),e.playRoll(o.linear)):e.playMainVideoWhenVastFails(900)},e.preRoll=t=>{const o=t.vastObj;e.domRef.player.removeEventListener(t.type,e.preRoll);const n=[];n[0]=t.type.replace("adId_",""),!0!==e.rollsById[n[0]].played&&(e.preRollAdPods.push(n[0]),e.preRollSuccess(o))},e.createAdMarker=(t,o)=>{const n=e.domRef.wrapper.querySelector(".fluid_controls_ad_markers_holder"),r=document.createElement("div");r.className="fluid_controls_ad_marker fluid_controls_ad_marker_"+t,r.dataset.adListId=t,r.style.left=o/e.mainVideoDuration*100+"%",e.isCurrentlyPlayingAd&&(r.style.display="none"),n.appendChild(r)},e.hideAdMarker=t=>{const o=e.domRef.wrapper.querySelector("fluid_controls_ad_marker_"+t);o&&(o.style.display="none")},e.showAdMarkers=()=>{const t=e.domRef.wrapper.querySelector(".fluid_controls_ad_markers_holder").getElementsByClassName("fluid_controls_ad_marker");for(let o=0;o<t.length;++o){const n=t[o],r=n.dataset.adListId;!1===e.rollsById[r].played&&(n.style.display="")}},e.hideAdMarkers=()=>{const t=e.domRef.wrapper.querySelector(".fluid_controls_ad_markers_holder").getElementsByClassName("fluid_controls_ad_marker");for(let e=0;e<t.length;++e){t[e].style.display="none"}},e.midRoll=t=>{e.domRef.player.removeEventListener(t.type,e.midRoll);const o=t.type.replace("adId_","");if(!0===e.rollsById[o].played)return;let n=e.rollsById[o].timer;"string"==typeof n&&-1!==n.indexOf("%")&&(n=n.replace("%",""),n=Math.floor(e.mainVideoDuration/100*n)),e.displayOptions.vastOptions.showProgressbarMarkers&&"nonLinear"===e.rollsById[o].adType&&e.createAdMarker(o,n),e.scheduleTask({time:n,playRoll:"midRoll",rollListId:o})},e.postRoll=t=>{e.domRef.player.removeEventListener(t.type,e.postRoll);const o=t.type.replace("adId_","");e.scheduleTask({time:Math.floor(e.mainVideoDuration),playRoll:"postRoll",rollListId:o})},e.onPauseRoll=t=>{e.domRef.player.removeEventListener(t.type,e.onPauseRoll);const o=t.type.replace("adId_","");e.rollsById[o].ads.forEach(t=>{if("nonLinear"===t.adType){if(!0===e.rollsById[t.rollListId].error||!0===t.error)return void e.announceLocalError(101);if(e.domRef.wrapper.getElementsByClassName("fluid_nonLinear_ad")[0])e.onPauseRollAdPods.push(o);else{e.createBoard(t),e.currentOnPauseRollAd=o;let n="";for(const t of e.domRef.wrapper.children)t.id==="fluid_nonLinear_"+o&&(n=t);n&&(n.style.display="none")}}})},e.hasValidOnPauseAd=()=>{const t=e.findRoll("onPauseRoll");return 0!==t.length&&e.rollsById[t[0]]&&!1===e.rollsById[t[0]].error&&e.rollsById[t[0]].ads.length&&!0!==e.rollsById[t[0]].ads[0].error},e.toggleOnPauseAd=()=>{if(e.toggleLoader(!1),e.hasValidOnPauseAd()&&!e.isCurrentlyPlayingAd){const t=e.findRoll("onPauseRoll"),o=e.rollsById[t].ads[0];e.vastOptions=o;let n="";for(const t of e.domRef.wrapper.children)t.id==="fluid_nonLinear_"+o.id&&(n=t);n&&e.domRef.player.paused?setTimeout(function(){n.style.display="flex",o.played=!1,e.trackingOnPauseNonLinearAd(o,"start")},500):n&&!e.domRef.player.paused&&(n.style.display="none",e.adFinished=!0,e.trackingOnPauseNonLinearAd(o,"complete"))}},e.trackingOnPauseNonLinearAd=(t,o)=>{!0!==e.rollsById[t.rollListId].error&&!0!==t.error?(e.vastOptions=t,e.trackSingleEvent(o)):e.announceLocalError(101)},e.getLinearAdsFromKeyTime=t=>{const o=[];for(let n=0;n<t.length;n++)!1===e.rollsById[t[n].adListId].played&&o.push(t[n].adListId);return o},e.adKeytimePlay=t=>{if(!e.timerPool[t]||e.isCurrentlyPlayingAd)return;const o=e.timerPool[t].closeStaticAd.length,n=e.timerPool[t].linear.length,r=e.timerPool[t].nonLinear.length,i=e.timerPool[t].loadVast.length;if([o,n,r,i].every(e=>0===e))delete e.timerPool[t];else{if(o>0){for(let n=0;n<o;n++){const o=e.timerPool[t].closeStaticAd[n];!0===o.played&&e.completeNonLinearStatic(o)}e.timerPool[t].closeStaticAd=[]}if(n>0&&e.timerPool[t].linear.length>0)return e.playRoll(e.timerPool[t].linear),void(e.timerPool[t].linear=[]);if(r>0)for(let o=0;o<r;o++){const n=e.timerPool[t].nonLinear[o],r=n.rollListId;if(e.adPool[r],!1===n.played&&!e.displayOptions.layoutControls.showCardBoardView)return e.createNonLinearStatic(n),e.displayOptions.vastOptions.showProgressbarMarkers&&e.hideAdMarker(r),void e.timerPool[t].nonLinear.splice(o,1)}i>0&&(e.timerPool[t].loadVast.forEach(t=>{"postRoll"===t.roll&&t.voidPostRollTasks||("postRoll"===t.roll&&(t.voidPostRollTasks=!0),e.debugMessage("Handling on-demand VAST load for roll ".concat(t.id)),e.processVastWithRetries(t))}),e.timerPool[t].loadVast=[])}},e.adTimer=()=>{e.isTimer||(e.isTimer=!e.isTimer,e.timer=setInterval(function(){const t=Math.floor(e.getCurrentTime());e.adKeytimePlay(t)},800),e.destructors.push(()=>e.timer))},e.scheduleTask=t=>{t.time>e.mainVideoDuration||t.time<0||Number.isNaN(t.time)?console.warn("Scheduled task has invalid time",t.time,". Check your configuration."):(e.debugMessage("Scheduling task",t),e.timerPool.hasOwnProperty(t.time)||(e.timerPool[t.time]={linear:[],nonLinear:[],closeStaticAd:[],loadVast:[]}),t.rollListId&&e.rollsById[t.rollListId].ads.filter(e=>{let{adType:o}=e;return 0!==t.time||"linear"!==o}).forEach(o=>{t.hasOwnProperty("playRoll")&&"linear"===o.adType?e.timerPool[t.time].linear.push(o):t.hasOwnProperty("playRoll")&&"nonLinear"===o.adType?e.timerPool[t.time].nonLinear.push(o):t.hasOwnProperty("closeStaticAd")&&e.timerPool[t.time].closeStaticAd.push(o)}),t.loadVast&&e.timerPool[t.time].loadVast.push(t.roll))},e.scheduleOnDemandRolls=()=>{[...e.findRoll("midRoll")||[],...e.findRoll("postRoll")||[]].map(t=>e.rollsById[t]).filter(e=>!0!==e.vastLoaded&&!0!==e.error).forEach(t=>{if("midRoll"===t.roll){"string"==typeof t.timer&&(t.timer=Math.floor(e.mainVideoDuration/100*t.timer.replace("%","")),e.debugMessage("Replaced midRoll from percentage to timer value ".concat(t.timer," seconds")));const o=t.timer-e.displayOptions.vastOptions.vastTimeout/1e3;o<=Number(e.getCurrentTime())?(e.debugMessage("Loading Mid Roll VAST immediately as it needs to be played soon"),e.processVastWithRetries(t)):e.scheduleTask({loadVast:!0,time:o,roll:t})}else{const o=parseInt(e.mainVideoDuration),n=e.displayOptions.vastOptions.vastTimeout/1e3;t.voidPostRollTasks=!1;for(let r=1;r<=n;r++)e.scheduleTask({loadVast:!0,time:o-r,roll:t})}})},e.switchToMainVideo=()=>{e.debugMessage("starting main video"),e.hideLiveIndicator(),e.isLiveStream=null,e.domRef.player.src=e.originalSrc,e.currentMediaSourceType="source",e.initialiseStreamers(),e.hlsPlayer&&!e.hlsPlayer.config.autoStartLoad&&e.hlsPlayer.startLoad();const t=typeof e.domRef.player.mainVideoCurrentTime<"u"?Math.floor(e.domRef.player.mainVideoCurrentTime):0;if(e.domRef.player.hasOwnProperty("currentTime")&&(e.domRef.player.currentTime=t),e.displayOptions.layoutControls.loop&&(e.domRef.player.loop=!0),e.setCurrentTimeAndPlay(t,e.autoplayAfterAd),e.isCurrentlyPlayingAd=!1,e.deleteVastAdElements(),e.adFinished=!0,e.displayOptions.vastOptions.vastAdvanced.vastVideoEndedCallback(),e.vastOptions=null,e.setBuffering(),null!==e.domRef.wrapper.querySelector(".fluid_controls_progress_container")){const t=e.displayOptions.layoutControls.primaryColor?e.displayOptions.layoutControls.primaryColor:"white",o=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress");for(let e=0;e<o.length;e++)o[e].style.backgroundColor=t}if(e.domRef.player.removeEventListener("ended",e.onVastAdEnded),e.displayOptions.vastOptions.showProgressbarMarkers&&e.showAdMarkers(),e.hasTitle()){e.domRef.wrapper.querySelector(".fp_title").style.display="inline"}},e.getNextAdPod=()=>e.temporaryAdPods.length>0?e.temporaryAdPods.shift():null,e.checkForNextAd=()=>{const t=e.getNextAdPod();null===t?(e.switchToMainVideo(),e.vastOptions=null,e.adFinished=!0):(e.domRef.player.removeEventListener("ended",e.onVastAdEnded),e.isCurrentlyPlayingAd=!1,e.vastOptions=null,e.adFinished=!0,e.renderLinearAd(t,!1))},e.addSkipButton=()=>{const t=document.createElement("div");t.className="skip_button skip_button_disabled",e.vastOptions.skipoffset>0&&(t.innerHTML=e.displayOptions.vastOptions.skipButtonCaption.replace("[seconds]",e.vastOptions.skipoffset)),e.domRef.wrapper.appendChild(t),0===e.vastOptions.skipoffset&&e.decreaseSkipOffset(),e.domRef.player.addEventListener("timeupdate",e.decreaseSkipOffset,!1)},e.addAdCountdown=()=>{if(e.isCurrentlyPlayingAd&&e.hlsPlayer||e.currentVideoDuration===1/0)return;const t=e.domRef.wrapper,o=document.createElement("div"),n=e.pad(parseInt(e.currentVideoDuration/60))+":"+e.pad(parseInt(e.currentVideoDuration%60)),r=parseInt(n);o.className="ad_countdown",o.innerHTML="<span class='ad_timer_prefix'>Ad - </span>"+r,t.appendChild(o),e.domRef.player.addEventListener("timeupdate",e.decreaseAdCountdown,!1),t.addEventListener("mouseover",function(){o.style.display="none"},!1)},e.decreaseAdCountdown=function(){const t=parseInt(e.currentVideoDuration)-parseInt(e.domRef.player.currentTime),o=e.domRef.wrapper.querySelector(".ad_countdown");o&&isNaN(t)?o.parentNode.removeChild(o):o?o.innerHTML="<span class='ad_timer_prefix'>Ad - </span> "+e.pad(parseInt(t/60))+":"+e.pad(parseInt(t%60)):e.domRef.player.removeEventListener("timeupdate",e.decreaseAdCountdown)},e.removeAdCountdown=()=>{const t=e.domRef.wrapper.querySelector(".ad_countdown");t&&t.parentElement.removeChild(t)},e.toggleAdCountdown=t=>{const o=e.domRef.wrapper.querySelector(".ad_countdown");o&&(o.style.display=t?"inline-block":"none")},e.addAdPlayingText=t=>{const o=document.createElement("div");e.displayOptions.layoutControls.primaryColor&&(o.style.backgroundColor=e.displayOptions.layoutControls.primaryColor,o.style.opacity=1),o.className="fluid_ad_playing",o.innerText=t,e.domRef.wrapper.appendChild(o)},e.positionTextElements=t=>{const o=["top left","top right","bottom left","bottom right"],n=e.domRef.wrapper.querySelector(".skip_button"),r=e.domRef.wrapper.querySelector(".fluid_ad_playing"),i=e.domRef.wrapper.querySelector(".fluid_ad_cta");let a=0,s=0;let l=!1,d=0,c=[];const u={top:{left:{h:34,v:34},right:{h:0,v:34}},bottom:{left:{h:34,v:50},right:{h:0,v:50}}};let p,f,m;null!==n&&(d=n.offsetHeight+8,e.domRef.wrapper.classList.contains("mobile")&&(u.top={left:{h:0,v:8},right:{h:0,v:8}},u.bottom={left:{h:0,v:50},right:{h:0,v:50}})),null!==i&&(p=e.rollsById[t.rollListId].adCTATextPosition?e.rollsById[t.rollListId].adCTATextPosition.toLowerCase():e.displayOptions.vastOptions.adCTATextPosition,-1===o.indexOf(p)&&(console.log('[FP Error] Invalid position for CTAText. Reverting to "bottom right"'),p="bottom right"),i.classList.add.apply(i.classList,p.split(" ")),c=p.split(" "),l="bottom"===c[0],i.style[c[0]]=u[c[0]][c[1]].v+"px",i.style[c[1]]=u[c[0]][c[1]].h+"px",l&&"right"===c[1]&&(i.style[c[0]]=u[c[0]][c[1]].v+d+"px"),a=i.offsetHeight+8+"px"),null!==r&&(f=e.rollsById[t.rollListId].adTextPosition?e.rollsById[t.rollListId].adTextPosition.toLowerCase():e.displayOptions.vastOptions.adTextPosition,-1===o.indexOf(f)&&(console.log('[FP Error] Invalid position for adText. Reverting to "top left"'),f="top left"),m=f.split(" "),r.style[m[0]]=u[m[0]][m[1]].v+"px",r.style[m[1]]=u[m[0]][m[1]].h+"px",s=r.offsetHeight+8+"px"),a>0&&s>0&&p===f&&(l?"right"===c[1]?r.style.bottom=u[m[0]][m[1]].v+d+a+"px":r.style.bottom=u[m[0]][m[1]].v+a+"px":i.style.top=u[c[0]][c[1]].v+s+"px")},e.removeAdPlayingText=()=>{const t=e.domRef.wrapper.querySelector(".fluid_ad_playing");t&&t.parentElement.removeChild(t)},e.addCTAButton=t=>{if(e.vastOptions.titleCTA){const{text:t,link:o,tracking:n}=e.vastOptions.titleCTA;return e.createAndAppendCTAButton(t,o,n)}if(t&&"string"==typeof e.displayOptions.vastOptions.adCTAText)return e.createAndAppendCTAButton(e.displayOptions.vastOptions.adCTAText,t,e.vastOptions.clickthroughUrl)},e.createAndAppendCTAButton=(t,o,n)=>{const r=document.createElement("div");r.className="fluid_ad_cta";const i=document.createElement("span");let a=t;o&&(a+='<br/><span class="add_icon_clickthrough">'+o+"</span>"),i.innerHTML=a,r.addEventListener("click",()=>(e.domRef.player.paused||e.domRef.player.pause(),window.open(n,"_blank").focus(),!0),!1),r.appendChild(i),e.domRef.wrapper.appendChild(r)},e.removeCTAButton=()=>{const t=e.domRef.wrapper.querySelector(".fluid_ad_cta");t&&t.parentElement.removeChild(t)},e.decreaseSkipOffset=()=>{if(typeof e.vastOptions>"u"||null===e.vastOptions)return;let t=e.vastOptions.skipoffset-Math.floor(e.domRef.player.currentTime);const o=e.domRef.wrapper.querySelector(".skip_button");if(!o)return void e.domRef.player.removeEventListener("timeupdate",e.decreaseSkipOffset);if(t>=1)return void(o.innerHTML=e.displayOptions.vastOptions.skipButtonCaption.replace("[seconds]",t));const n=document.createElement("a");n.href="#",n.className="js-skipHref",n.innerHTML=e.displayOptions.vastOptions.skipButtonClickCaption,n.onclick=t=>{t.preventDefault(),t.stopPropagation(),e.pressSkipButton()},o.innerHTML="",o.appendChild(n),o.className=o.className.replace(/\bskip_button_disabled\b/,""),e.domRef.player.removeEventListener("timeupdate",e.decreaseSkipOffset)},e.pressSkipButton=()=>{if(e.removeSkipButton(),e.removeAdPlayingText(),e.removeCTAButton(),e.vastOptions.vpaid)return void e.skipVpaidAd();e.displayOptions.vastOptions.vastAdvanced.vastVideoSkippedCallback();const t=document.createEvent("Event");t.initEvent("ended",!1,!0),e.domRef.player.dispatchEvent(t)},e.removeSkipButton=()=>{const t=e.domRef.wrapper.querySelector(".skip_button");t&&t.parentElement.removeChild(t)},e.addClickthroughLayer=()=>{const t=e.domRef.wrapper,o=document.createElement("div");o.className="vast_clickthrough_layer",o.setAttribute("style","position: absolute; cursor: pointer; top: 0; left: 0; width: "+e.domRef.player.offsetWidth+"px; height: "+e.domRef.player.offsetHeight+"px;"),t.appendChild(o);const n=function(){window.open(e.vastOptions.clickthroughUrl),typeof e.vastOptions.clicktracking<"u"&&e.callUris(e.vastOptions.clicktracking)},r=e.domRef.wrapper.querySelector(".vast_clickthrough_layer"),i="iPhone"===e.mobileInfo.device&&!1!==e.mobileInfo.userOsMajor&&e.mobileInfo.userOsMajor<=9;r.onclick=()=>{e.domRef.player.paused?i&&!e.suppressClickthrough?(n(),e.suppressClickthrough=!0):e.domRef.player.play():(n(),e.domRef.player.pause())}},e.removeClickthrough=()=>{const t=e.domRef.wrapper.querySelector(".vast_clickthrough_layer");t&&t.parentNode.removeChild(t)}},function(e,t){e.initialiseStreamers=()=>{switch(e.detachStreamers(),e.displayOptions.layoutControls.mediaType){case"application/dash+xml":e.dashScriptLoaded||window.dashjs&&!window.dashjs.isDefaultSubject?e.initialiseDash():(e.dashScriptLoaded=!0,import("./dash.all.min-Dpdy5kEu.mjs").then(e=>e.d).then(t=>{window.dashjs=t.default,e.initialiseDash()}));break;case"application/x-mpegurl":const{displayOptions:t,domRef:o}=e,{player:n}=o,{hls:r}=t;if(n.canPlayType("application/x-mpegurl")&&!r.overrideNative){e.debugMessage("Native HLS support found, skipping hls.js");break}e.hlsScriptLoaded||window.Hls?e.initialiseHls():(e.hlsScriptLoaded=!0,import("./hls-DdVBxpbO.mjs").then(t=>{window.Hls=t.default,e.initialiseHls()}))}},e.initialiseDash=()=>{if("function"==typeof(window.MediaSource||window.WebKitMediaSource)){const t=e.autoplayAfterAd?e.displayOptions.layoutControls.autoPlay:e.autoplayAfterAd,o={debug:{logLevel:typeof FP_DEBUG<"u"&&!0===FP_DEBUG?dashjs.Debug.LOG_LEVEL_DEBUG:dashjs.Debug.LOG_LEVEL_FATAL}},n=dashjs.MediaPlayer().create(),r=e.displayOptions.modules.configureDash(o);n.updateSettings(r),e.displayOptions.modules.onBeforeInitDash(n),n.initialize(e.domRef.player,e.originalSrc,t),n.on("streamInitializing",()=>{e.toggleLoader(!0)}),n.on("canPlay",()=>{e.toggleLoader(!1)}),n.on("playbackPlaying",()=>{e.toggleLoader(!1)}),n.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,()=>{e.isLiveStream=!!n.isDynamic(),n.isDynamic()&&e.showLiveIndicator()}),e.displayOptions.modules.onAfterInitDash(n),e.dashPlayer=n}else e.nextSource(),console.log("[FP_WARNING] Media type not supported by this browser using DASH.js. (application/dash+xml)")},e.initialiseHls=()=>{if(typeof Hls<"u"&&Hls.isSupported()){e.debugMessage("Initializing hls.js");const t={debug:typeof FP_DEBUG<"u"&&!0===FP_DEBUG,startPosition:0,p2pConfig:{logLevel:!1},enableWebVTT:!1,enableCEA708Captions:!1},o=e.displayOptions.modules.configureHls(t),n=new Hls(o);e.displayOptions.modules.onBeforeInitHls(n),n.attachMedia(e.domRef.player),n.loadSource(e.originalSrc),n.once(Hls.Events.LEVEL_LOADED,function(t,o){e.isLiveStream=!!o.details.live,o.details.live?e.showLiveIndicator():e.hideLiveIndicator()}),e.displayOptions.modules.onAfterInitHls(n),e.hlsPlayer=n,!e.firstPlayLaunched&&e.displayOptions.layoutControls.autoPlay&&e.domRef.player.play(),e.createHLSVideoSourceSwitch()}else e.nextSource(),console.log("[FP_WARNING] Media type not supported by this browser using HLS.js. (application/x-mpegURL)")},e.createHLSVideoSourceSwitch=()=>{e.hlsPlayer.on(Hls.Events.MANIFEST_PARSED,function(){try{const t=function(){const t=e.hlsPlayer.levels.map((e,t)=>({id:t,title:e.height+"p",isHD:"HDR"===e.videoRange,bitrate:e.bitrate})),o={id:-1,title:"auto",isHD:!1,bitrate:0};return[...t,o]}(),o=function(e){return[...e].sort((e,t)=>t.height!==e.height?t.height-e.height:t.bitrate-e.bitrate)}(t);if(e.videoSources=o,o.length<=2)return;const n=e.domRef.wrapper.querySelector(".fluid_control_video_source");!function(e,t){e.length>1?t.style.display="inline-block":t.style.display="none"}(o,n);const r=function(t){const o=document.createElement("div");return o.className="fluid_video_sources_list",o.style.display="none",t.forEach(t=>{const n=function(t){const o=function(t){const o=e.videoSources.filter(t=>t.title===e.fluidStorage.fluidQuality);if(o.length>1){if(o[0].id===t.id)return"source_selected"}else if(1===o.length)return o[0].id===t.id?"source_selected":"";return o.length||"auto"!==t.title?"":"source_selected"}(t),n=t.isHD?'<sup style="color:'.concat(e.displayOptions.layoutControls.primaryColor,'" class="fp_hd_source"></sup>'):"",r=document.createElement("div");return r.className="fluid_video_source_list_item js-source_".concat(t.title),r.innerHTML='<span class="source_button_icon '.concat(o,'"></span>').concat(t.title).concat(n),r.addEventListener("click",o=>function(t,o){t.stopPropagation();const n=t.currentTarget;(function(){const t=e.domRef.wrapper.getElementsByClassName("source_button_icon");Array.from(t).forEach(e=>e.classList.remove("source_selected"))})(),n.firstChild.classList.add("source_selected"),e.videoSources.forEach(t=>{t.title===n.innerText.replace(/(\r\n\t|\n|\r\t)/gm,"")&&(e.hlsPlayer.currentLevel=o.id,e.fluidStorage.fluidQuality=o.title)}),e.openCloseVideoSourceSwitch()}(o,t)),r}(t);o.appendChild(n)}),o}(o);(function(t,o){t.appendChild(o),t.removeEventListener("click",e.openCloseVideoSourceSwitch),t.addEventListener("click",e.openCloseVideoSourceSwitch)})(n,r),function(t){const o=t.find(t=>t.title===e.fluidStorage.fluidQuality);if(o)e.hlsPlayer.currentLevel=o.id;else{const o=t.find(e=>"auto"===e.title);e.hlsPlayer.currentLevel=o.id}}(o)}catch(e){console.error(e)}})},e.detachStreamers=()=>{e.dashPlayer?(e.dashPlayer.reset(),e.dashPlayer=!1):e.hlsPlayer&&(e.hlsPlayer.detachMedia(),e.hlsPlayer=!1)}},function(e,t){e.isTouchDevice=()=>!(!("ontouchstart"in window)&&!navigator.maxTouchPoints),e.getMobileOs=()=>{const e=navigator.userAgent||"",t={device:!1,userOs:!1,userOsVer:!1,userOsMajor:!1};let o;if(e.match(/Android/i)?(t.userOs="Android",o=e.indexOf("Android ")):e.match(/iPhone/i)?(t.device="iPhone",t.userOs="iOS",o=e.indexOf("OS ")):e.match(/iPad/i)?(t.device="iPad",t.userOs="iOS",o=e.indexOf("OS ")):t.userOs=!1,"iOS"===t.userOs&&o>-1){const n=e.substr(o+3);-1!==n.indexOf(" ")&&(t.userOsVer=n.substring(0,n.indexOf(" ")).replace(/_/g,"."),t.userOsMajor=parseInt(t.userOsVer))}else"Android"===t.userOs&&o>-1?t.userOsVer=e.substr(o+8,3):t.userOsVer=!1;return t},e.getBrowserVersion=()=>{const e=navigator.userAgent||"",t={browserName:!1,fullVersion:!1,majorVersion:!1,userOsMajor:!1};let o,n;try{t.browserName=navigator.appName,-1!==(o=e.indexOf("OPR/"))?(t.browserName="Opera",t.fullVersion=e.substring(o+4)):-1!==(o=e.indexOf("Opera"))?(t.browserName="Opera",t.fullVersion=e.substring(o+6),-1!==(o=e.indexOf("Version"))&&(t.fullVersion=e.substring(o+8))):-1!==(o=e.indexOf("MSIE"))?(t.browserName="Microsoft Internet Explorer",t.fullVersion=e.substring(o+5)):-1!==(o=e.indexOf("Chrome"))?(t.browserName="Google Chrome",t.fullVersion=e.substring(o+7)):-1!==(o=e.indexOf("Safari"))?(t.browserName="Safari",t.fullVersion=e.substring(o+7),-1!==(o=e.indexOf("Version"))&&(t.fullVersion=e.substring(o+8))):-1!==(o=e.indexOf("Firefox"))?(t.browserName="Mozilla Firefox",t.fullVersion=e.substring(o+8)):(n=e.lastIndexOf(" ")+1)<(o=e.lastIndexOf("/"))&&(t.browserName=e.substring(n,o),t.fullVersion=e.substring(o+1),t.browserName.toLowerCase()===t.browserName.toUpperCase()&&(t.browserName=navigator.appName)),-1!==(n=t.fullVersion.indexOf(";"))&&(t.fullVersion=t.fullVersion.substring(0,n)),-1!==(n=t.fullVersion.indexOf(" "))&&(t.fullVersion=t.fullVersion.substring(0,n)),t.majorVersion=parseInt(""+t.fullVersion,10),isNaN(t.majorVersion)&&(t.fullVersion=""+parseFloat(navigator.appVersion),t.majorVersion=parseInt(navigator.appVersion,10))}catch(e){}return t},e.compareVersion=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)return!1;e=e.split("."),t=t.split(".");const o=Math.min(e.length,t.length);for(let n=0;n<o;++n){if(e[n]=parseInt(e[n],10),t[n]=parseInt(t[n],10),e[n]>t[n])return 1;if(e[n]<t[n])return-1}return e.length===t.length?0:e.length<t.length?-1:1},e.convertTimeStringToSeconds=e=>{if(!e||!e.match(/^(\d){2}(:[0-5][0-9]){2}(.(\d){1,3})?$/))return!1;const t=e.split(":");return 3600*parseInt(t[0],10)+60*parseInt(t[1],10)+parseInt(t[2],10)},e.formatTime=t=>{const o=new Date(1e3*t),n=e.pad(o.getUTCHours()),r=e.pad(o.getUTCMinutes()),i=e.pad(o.getSeconds());return n>=1?n+":"+r+":"+i:r+":"+i},e.pad=e=>e<10?"0"+e:e,e.isElementVisible=e=>{if(!e)return null;const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},e.observe=()=>{new IntersectionObserver(function(t){t.forEach(function(t){t.intersectionRatio>=.5&&(e.domRef.player.inView=!0),0==t.intersectionRatio&&t.target.glast&&(e.domRef.player.inView=!1)})},{threshold:[0,.5]}).observe(e.domRef.wrapper)},e.throttle=function(e,t){let o=!1;return function(){o||(e.apply(this,arguments),o=!0,setTimeout(function(){o=!1},t))}},e.getImageTwoMostProminentColours=e=>new Promise((t,o)=>{const n=new Image;n.crossOrigin="Anonymous",n.src=e,n.onload=()=>{const e=document.createElement("canvas"),o=e.getContext("2d");e.width=n.width,e.height=n.height,o.drawImage(n,0,0,n.width,n.height);const r=o.getImageData(0,0,n.width,n.height).data,i={};for(let e=0;e<r.length;e+=4){const t=r[e],o=r[e+1],n=r[e+2],a="rgb(".concat(t,",").concat(o,",").concat(n,")");i[a]?i[a]++:i[a]=1}const a=Object.keys(i).map(e=>{const[t,o,n]=e.match(/\d+/g).map(Number),[r,i,a]=((e,t,o)=>{e/=255,t/=255,o/=255;const n=Math.max(e,t,o),r=Math.min(e,t,o);let i,a,s=(n+r)/2;if(n===r)i=a=0;else{const l=n-r;switch(a=s>.5?l/(2-n-r):l/(n+r),n){case e:i=(t-o)/l+(t<o?6:0);break;case t:i=(o-e)/l+2;break;case o:i=(e-t)/l+4}i/=6}return[i,a,s]})(t,o,n);return{color:e,h:r,s:i,l:a,score:i+(1-Math.abs(2*a-1))}}).sort((e,t)=>t.score-e.score),s=e=>{const t=e.match(/\d+/g).map(Number);return t[0]<40&&t[1]<40&&t[2]<40};let l=[];for(const e of a){if(2===l.length)break;s(e.color)||l.every(t=>{const o=Math.abs(e.h-t.h),n=Math.abs(e.s-t.s),r=Math.abs(e.l-t.l);return o>=.1&&n>=.1&&r>=.1})&&l.push(e)}l.length<2&&(l=a.slice(0,2)),t(l.map(e=>e.color))},n.onerror=()=>{o(new Error("Failed to load image"))}})},function(e,t){e.suggestedVideosGrid=null,e.generateSuggestedVideoList=()=>{const t=e.displayOptions.suggestedVideos.configUrl;t&&e.sendRequestAsync(t,!1,5e3).then(t=>{let{response:o}=t;const n=JSON.parse(o),r=e.generateSuggestedVideoGrid(n);e.suggestedVideosGrid=r}).catch(e=>{console.error("[FP_ERROR] given suggested videos config url is invalid or not found.",e)})},e.generateSuggestedVideoGrid=t=>{const o=document.createElement("div");o.className="suggested_tile_grid";for(let n=0;n<12;n++){const r=e.createVideoTile(t[n]);o.appendChild(r)}return o},e.displaySuggestedVideos=()=>{e.domRef.wrapper.appendChild(e.suggestedVideosGrid)},e.clickSuggestedVideo=(t,o,n)=>{e.toggleLoader(!0),e.hideSuggestedVideos(),e.resetPlayer(t,o,n),e.generateSuggestedVideoList()},e.resetPlayer=(t,o,n)=>{const r=e.domRef.wrapper.querySelector("#".concat(e.videoPlayerId));r.innerHTML="";let i="";t&&t.forEach(e=>{i+="<source src='".concat(e.url,"' ").concat(e.hd?"data-fluid-hd":"",' title="').concat(e.resolution,"\" type='").concat(e.mimeType,"'/>")}),o&&o.forEach(e=>{i+='<track label="'.concat(e.label,'" kind="metadata" srclang="').concat(e.lang,'" src="').concat(e.url,'" ').concat(e.default?"default":"",">")}),r.innerHTML=i,e.removeVideoSourcesListFromDOM();e.domRef.wrapper.getElementsByClassName("fluid_control_video_source")[0].innerHTML="",e.domRef.player.src="",e.domRef.player.removeAttribute("src"),e.setVideoSource(t[0].url),e.createVideoSourceSwitch(!1),e.resetSubtitles(),e.setPersistentSettings(!0),e.loadInNewVideo(),e.resetAds(),n&&(e.displayOptions.suggestedVideos.configUrl=n,e.generateSuggestedVideoList())},e.createVideoTile=t=>{const o=document.createElement("div");o.addEventListener("click",function(){e.clickSuggestedVideo(t.sources,t.subtitles,t.configUrl)},!1),o.className="suggested_tile",o.id="suggested_tile_"+t.id,e.getImageTwoMostProminentColours(t.thumbnailUrl).then(e=>{e&&e.length&&(o.style="background: ".concat(e[0],";"))});const n=document.createElement("img");n.src=t.thumbnailUrl,n.className="suggested_tile_image";const r=document.createElement("div");r.className="suggested_tile_overlay";const i=document.createElement("p");return i.className="suggested_tile_title",i.innerText=t.title,r.appendChild(i),o.appendChild(n),o.appendChild(r),o},e.resetSubtitles=()=>{e.removeSubtitlesListFromDOM();e.domRef.wrapper.getElementsByClassName("fluid_control_subtitles")[0].innerHTML="",e.domRef.player.load(),e.createSubtitles(!1)},e.loadInNewVideo=()=>{e.displayOptions.layoutControls.mediaType=e.getCurrentSrcType(),e.initialiseStreamers(),e.domRef.player.currentTime=0,e.domRef.player.mainVideoCurrentTime=0,e.setBuffering()},e.resetAds=()=>{e.timerPool={},e.rollsById={},e.adPool={},e.adGroupedByRolls={},e.onPauseRollAdPods=[],e.currentOnPauseRollAd="",e.isTimer=!1,e.timer=null,e.firstPlayLaunched=!1,e.preRollAdsResolved=!1,e.preRollAdPods=[],e.preRollAdPodsLength=0,e.preRollVastResolved=0,e.autoplayAfterAd=!0;const t=setInterval(()=>{!isNaN(e.domRef.player.duration)&&e.domRef.player.duration>0&&(e.toggleLoader(!0),e.mainVideoDuration=e.domRef.player.duration,clearInterval(t),e.setVastList(),e.checkForNextAd(),e.playPauseToggle())},100)},e.removeVideoSourcesListFromDOM=()=>{const t=e.domRef.wrapper.getElementsByClassName("fluid_video_source_list_item");for(let e=0;e<t.length;e++)t[e].remove()},e.removeSubtitlesListFromDOM=()=>{const t=e.domRef.wrapper.getElementsByClassName("fluid_subtitle_list_item");for(let e=0;e<t.length;e++)t[e].remove()},e.hideSuggestedVideos=()=>{const t=e.domRef.wrapper.getElementsByClassName("suggested_tile_grid")[0];t&&t.remove()},e.isShowingSuggestedVideos=()=>!!e.domRef.wrapper.getElementsByClassName("suggested_tile_grid")[0]},function(e){const t="fluid_mini_player_mode",o="mini-player-close-button-wrapper",n="mini-player-close-button",r="fluidplayer-miniplayer-player-placeholder",i="disable-mini-player-mobile";let a=null,s=null,l=null,d=null,c=!1,u=null,p=!1,f=!1;function m(l){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.debugMessage("[MiniPlayer] Toggling MiniPlayer, forceToggle: ".concat(l));const f=e.displayOptions.layoutControls.miniPlayer;f.enabled?"on"===l&&e.miniPlayerToggledOn||"off"===l&&!e.miniPlayerToggledOn?e.debugMessage("[MiniPlayer] Can't force toggle Mini Player to it's same state"):(d&&b(),window.matchMedia("(max-width: 768px)").matches&&(p=!0),e.resetDisplayMode("miniPlayer"),c||function(){if(!e.domRef.player.parentNode.querySelector(".".concat(n))){const t=document.createElement("div");t.classList.add(o);const r=document.createElement("span");r.classList.add(n),r.addEventListener("click",()=>{m("off",!0),e.domRef.player.paused||e.playPauseToggle()}),t.appendChild(r),e.domRef.player.parentNode.append(t)}p&&function(){const t=document.createElement("div");let o,r=0,a=0;t.classList.add(i);const s=document.createElement("span");s.classList.add(n),t.appendChild(s),t.ontouchstart=e=>{o=!1,e.timeStamp,a=e.changedTouches[0].screenX,e.preventDefault()},t.ontouchmove=t=>{r=Math.min(Math.max(a-t.changedTouches[0].screenX,-50),50),Math.abs(r)>5?(e.domRef.wrapper.style.transform="translateX(".concat(-1*r,"px)"),o=!0):e.domRef.wrapper.style.transform="translateX(0px)"},t.ontouchend=t=>{Math.abs(r)>5?(m("off",!0),e.domRef.player.paused||e.playPauseToggle(),t.preventDefault()):o||(m("off",!0),setTimeout(()=>{e.domRef.wrapper.scrollIntoView({behavior:"smooth",block:"center"})})),r=0,e.domRef.wrapper.style.transform=""},t.onmouseup=()=>m("off",!0),e.domRef.wrapper.insertBefore(t,e.domRef.player.nextSibling)}(),c=!0}(),"off"===l||e.miniPlayerToggledOn?function(){const o=e.domRef.wrapper;e.domRef.wrapper.parentElement.removeChild(u),u=null,o.classList.remove(t),o.style.width="".concat(a,"px"),o.style.height="".concat(s,"px"),a=null,s=null,y(),v(),e.miniPlayerToggledOn=!1,g()}():("on"===l||!e.miniPlayerToggledOn)&&function(o,n,i,l){const d=e.domRef.wrapper,c=o>400?o:400,f=n>225?n:225,b=i>40?i:40;a=h(d,"width","clientWidth"),s=h(d,"height","clientHeight"),d.classList.add(t,"".concat(t,"--").concat(l.trim().replace(/\s/,"-"))),p?(d.style.width="".concat(b,"vw"),d.style.height="auto",d.style.aspectRatio="16 / 9"):(d.style.width="".concat(c,"px"),d.style.height="".concat(f,"px")),function(t,o){u=document.createElement("div"),u.classList.add(r),u.style.height="".concat(o,"px"),u.style.width="".concat(t,"px"),u.innerText=e.displayOptions.layoutControls.miniPlayer.placeholderText||"",u.onclick=()=>m("off",!0),e.domRef.wrapper.parentElement.insertBefore(u,e.domRef.wrapper)}(a,s),y(c,f,b),v(),e.miniPlayerToggledOn=!0,g()}(f.width,f.height,f.widthMobile,f.position)):e.debugMessage("[MiniPlayer] Prevent toggle MiniPlayer, it's currently disabled")}function g(){e.domRef.player.dispatchEvent(new CustomEvent("miniPlayerToggle",{detail:{isToggledOn:e.miniPlayerToggledOn}}))}function h(e,t,o){return t&&e.style[t]&&e.style[t].match("px")?parseInt(e.style[t]):String(e[o]).match("px")?parseInt(e[o]):e[o]}function y(t,o,n){const r=e.domRef.wrapper.querySelector(".fluid_nonLinear_ad img, .fluid_vpaid_nonlinear_slot_iframe"),i=e.domRef.wrapper.querySelector(".fluid_vpaidNonLinear_frame");if(!r)return;p&&(t=window.innerWidth*n/100);const a=h(r,null,"width"),s=h(r,null,"height");if(l&&d)r.width=l,r.height=d,i&&(i.style.width="".concat(l,"px"),i.style.height="".concat(d,"px")),l=d=null;else if(a>t||s>o){const e=(t-(p?4:32))/a;l=a,d=s,r.width=Math.round(a*e),r.height=Math.round(s*e),i&&(i.style.width="".concat(Math.round(a*e),"px"),i.style.height="".concat(Math.round(s*e),"px"))}}function v(){const t=e.domRef.wrapper.querySelector(".vast_clickthrough_layer");t&&(t.style.width="".concat(e.domRef.player.offsetWidth,"px"),t.style.height="".concat(e.domRef.player.offsetHeight,"px"))}function b(){const t=e.displayOptions.layoutControls.miniPlayer.autoToggle;!f&&t?(f=!0,document.addEventListener("scroll",w,{passive:!0})):document.removeEventListener("scroll",w)}const w=e.throttle(function(){if(e.domRef.player.paused)return;const t=e.isElementVisible(e.domRef.player),o=e.isElementVisible(e.domRef.wrapper.querySelector(".".concat(r)));t||e.miniPlayerToggledOn?o&&e.miniPlayerToggledOn&&m("off"):m("on")},16.666666666666668);e.toggleMiniPlayer=m,e.toggleMiniPlayerScreenDetection=b}],Te=typeof FP_ENV<"u"&&"development"===FP_ENV,Oe=typeof FP_DEBUG<"u"&&!0===FP_DEBUG;let Ae=0;const Ee=function(){const e=this;e.domRef={player:null},e.version=typeof FP_BUILD_VERSION<"u"?FP_BUILD_VERSION:"",e.homepage=typeof FP_HOMEPAGE<"u"?FP_HOMEPAGE+"/?utm_source=player&utm_medium=context_menu&utm_campaign=organic":"",e.destructors=[],e.init=(t,o)=>{const n={development:Te,debug:Oe};for(const t of Le)t(e,n);let r;if(t instanceof HTMLVideoElement)r=t,t.id||(t.id="fluid_player_instance_"+(Ae++).toString());else{if(!("string"==typeof t||t instanceof String))throw"Invalid initializer - player target must be HTMLVideoElement or ID";r=document.getElementById(t)}if(!r)throw"Could not find a HTML node to attach to for target "+t+'"';if(r.classList.contains("js-fluid-player"))throw"Invalid initializer - player target already is initialized";r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline",""),r.classList.add("js-fluid-player"),e.domRef.player=r,e.vrROTATION_POSITION=.1,e.vrROTATION_SPEED=80,e.vrMode=!1,e.vrPanorama=null,e.vrViewer=null,e.vpaidTimer=null,e.vpaidAdUnit=null,e.vastOptions=null,e.videoPlayerId=r.id,e.originalSrc=e.getCurrentSrc(),e.isCurrentlyPlayingAd=!1,e.recentWaiting=!1,e.latestVolume=1,e.currentVideoDuration=0,e.firstPlayLaunched=!1,e.suppressClickthrough=!1,e.timelinePreviewData=[],e.mainVideoCurrentTime=0,e.mainVideoDuration=0,e.isTimer=!1,e.timer=null,e.timerPool={},e.rollsById={},e.adPool={},e.adGroupedByRolls={},e.onPauseRollAdPods=[],e.currentOnPauseRollAd="",e.preRollAdsResolved=!1,e.preRollAdPods=[],e.preRollAdPodsLength=0,e.preRollVastResolved=0,e.temporaryAdPods=[],e.availableRolls=["preRoll","midRoll","postRoll","onPauseRoll"],e.supportedNonLinearAd=["300x250","468x60","728x90"],e.autoplayAfterAd=!0,e.nonLinearDuration=15,e.supportedStaticTypes=["image/gif","image/jpeg","image/png"],e.inactivityTimeout=null,e.isUserActive=null,e.nonLinearVerticalAlign="bottom",e.vpaidNonLinearCloseButton=!0,e.showTimeOnHover=!0,e.initialAnimationSet=!0,e.theatreMode=!1,e.theatreModeAdvanced=!1,e.fullscreenMode=!1,e.originalWidth=r.offsetWidth,e.originalHeight=r.offsetHeight,e.dashPlayer=!1,e.hlsPlayer=!1,e.dashScriptLoaded=!1,e.hlsScriptLoaded=!1,e.isPlayingMedia=!1,e.isSwitchingSource=!1,e.isLoading=!1,e.isInIframe=e.inIframe(),e.mainVideoReadyState=!1,e.xmlCollection=[],e.inLineFound=null,e.fluidStorage={},e.fluidPseudoPause=!1,e.mobileInfo=e.getMobileOs(),e.events={},e.timeSkipOffsetAmount=10,e.currentMediaSourceType="source",e.isLiveStream=null,e.displayOptions={layoutControls:{mediaType:e.getCurrentSrcType(),primaryColor:!1,posterImage:!1,posterImageSize:"contain",adProgressColor:"#f9d300",playButtonShowing:!0,playPauseAnimation:!0,closeButtonCaption:"Close",fillToContainer:!1,autoPlay:!1,preload:"auto",mute:!1,loop:null,keyboardControl:!0,allowDownload:!1,playbackRateEnabled:!1,subtitlesEnabled:!1,subtitlesOnByDefault:!0,showCardBoardView:!1,showCardBoardJoystick:!1,allowTheatre:!0,doubleclickFullscreen:!0,autoRotateFullScreen:!1,theatreSettings:{width:"100%",height:"60%",marginTop:0,horizontalAlign:"center",keepPosition:!1},theatreAdvanced:{theatreElement:null},title:null,logo:{imageUrl:null,position:"top left",clickUrl:null,opacity:1,mouseOverImageUrl:null,imageMargin:"2px",hideWithControls:!1,showOverAds:!1},controlBar:{autoHide:!1,autoHideTimeout:3,animated:!0,playbackRates:["x2","x1.5","x1","x0.5"]},timelinePreview:{spriteImage:!1,spriteRelativePath:!1},htmlOnPauseBlock:{html:null,height:null,width:null},layout:"default",playerInitCallback:function(){},persistentSettings:{volume:!0,quality:!0,speed:!0,theatre:!0},controlForwardBackward:{show:!1,doubleTapMobile:!0},contextMenu:{controls:!0,links:[]},miniPlayer:{enabled:!0,width:400,height:225,widthMobile:50,placeholderText:"Playing in Miniplayer",position:"bottom right",autoToggle:!1},roundedCorners:0},suggestedVideos:{configUrl:null},vastOptions:{adList:{},skipButtonCaption:"Skip ad in [seconds]",skipButtonClickCaption:'Skip Ad <span class="skip_button_icon"></span>',adText:null,adTextPosition:"top left",adCTAText:"Visit now!",adCTATextPosition:"bottom right",adCTATextVast:!1,adClickable:!0,vastTimeout:5e3,showProgressbarMarkers:!1,allowVPAID:!1,showPlayButton:!1,maxAllowedVastTagRedirects:3,vpaidTimeout:3e3,vastAdvanced:{vastLoadedCallback:function(){},noVastVideoCallback:function(){},vastVideoSkippedCallback:function(){},vastVideoEndedCallback:function(){}}},hls:{overrideNative:!1},captions:{play:"Play",pause:"Pause",mute:"Mute",unmute:"Unmute",fullscreen:"Fullscreen",subtitles:"Subtitles",exitFullscreen:"Exit Fullscreen"},debug:Oe,modules:{configureHls:e=>e,onBeforeInitHls:e=>{},onAfterInitHls:e=>{},configureDash:e=>e,onBeforeInitDash:e=>{},onAfterInitDash:e=>{}},onBeforeXMLHttpRequestOpen:e=>{},onBeforeXMLHttpRequest:e=>{(Oe||Te)&&console.debug("[FP_DEBUG] Request made",e)}},o.hlsjsConfig&&console.error("[FP_ERROR] player option hlsjsConfig is removed and has no effect. Use module callbacks instead!"),function e(t,o){return Object.keys(o).forEach(n=>{"object"!=typeof o[n]||null===o[n]||Array.isArray(o[n])?typeof o[n]<"u"&&(t[n]=o[n]):e(t[n],o[n])}),t}(e.displayOptions,o),e.domRef.wrapper=e.setupPlayerWrapper(),r.addEventListener("webkitfullscreenchange",e.recalculateAdDimensions),r.addEventListener("fullscreenchange",e.recalculateAdDimensions),r.addEventListener("waiting",e.onRecentWaiting),r.addEventListener("pause",e.onFluidPlayerPause),r.addEventListener("error",e.onErrorDetection),r.addEventListener("ended",e.onMainVideoEnded),r.addEventListener("durationchange",()=>{e.currentVideoDuration=e.getCurrentVideoDuration()}),r.readyState>0?e.mainVideoReady():r.addEventListener("loadedmetadata",e.mainVideoReady),e.displayOptions.layoutControls.showCardBoardView&&r.setAttribute("crossOrigin","anonymous"),e.currentVideoDuration=e.getCurrentVideoDuration(),(isNaN(e.currentVideoDuration)||!isFinite(e.currentVideoDuration))&&(e.currentVideoDuration=0),e.setLayout(),e.latestVolume=r.volume,e.initialAnimationSet=e.displayOptions.layoutControls.playPauseAnimation,e.handleFullscreen(),e.initLogo(),e.initTitle(),e.initMute(),e.initLoop(),e.displayOptions.layoutControls.playerInitCallback(),e.createVideoSourceSwitch(),e.createSubtitles(),e.createCardboard(),e.userActivityChecker(),e.setVastList(),e.setPersistentSettings(),e.generateSuggestedVideoList(),e.initialiseStreamers();const i=r.play;r.play=function(){let t=null;e.displayOptions.layoutControls.showCardBoardView&&typeof DeviceOrientationEvent<"u"&&"function"==typeof DeviceOrientationEvent.requestPermission&&DeviceOrientationEvent.requestPermission().then(function(t){"granted"===t&&e.debugMessage("DeviceOrientationEvent permission granted!")}).catch(console.error);try{return t=i.apply(this,arguments),null!=t&&(t.then(()=>{e.isPlayingMedia=!0,clearTimeout(e.promiseTimeout)}).catch(t=>{console.error("[FP_ERROR] Playback error",t),typeof t.name<"u"&&"AbortError"===t.name||e.announceLocalError(202,"Failed to play video."),clearTimeout(e.promiseTimeout)}),e.promiseTimeout=setTimeout(function(){!1===e.isPlayingMedia&&e.announceLocalError(204,"[FP_ERROR] Timeout error. Failed to play video?")},5e3)),t}catch(t){console.error("[FP_ERROR] Playback error",t),e.announceLocalError(201,"Failed to play video.")}};const a=r.pause;if(r.pause=function(){if(!0===e.isPlayingMedia)return e.isPlayingMedia=!1,a.apply(this,arguments);if(e.isCurrentlyPlayingVideo(e.domRef.player))try{return e.isPlayingMedia=!1,a.apply(this,arguments)}catch(t){e.announceLocalError(203,"Failed to play video.")}},e.displayOptions.layoutControls.autoPlay&&!e.dashScriptLoaded&&!e.hlsScriptLoaded){if("Safari"===e.getBrowserVersion().browserName)return;r.play()}e.mobileInfo.userOs?(e.hideControlBar(),e.domRef.wrapper.addEventListener("touchstart",e.showControlBar,{passive:!0})):(e.displayOptions.layoutControls.controlBar.autoHide||e.domRef.wrapper.addEventListener("mouseleave",e.handleMouseleave,!1),e.domRef.wrapper.addEventListener("mouseenter",e.showControlBar,!1),e.domRef.wrapper.addEventListener("mouseenter",e.showTitle,!1)),e.displayOptions.layoutControls.keyboardControl&&e.keyboardControl(),e.displayOptions.layoutControls.controlBar.autoHide&&e.linkControlBarUserActivity();try{if(e.domRef.player.textTracks)for(const t of e.domRef.player.textTracks)t.mode="hidden"}catch(e){}},e.getCurrentVideoDuration=()=>e.domRef.player?e.domRef.player.duration:0,e.toggleLoader=t=>{e.isLoading=!!t;const o=e.domRef.wrapper.querySelector(".vast_video_loading");o&&(o.style.display=t?"table":"none")},e.sendRequest=(t,o,n,r)=>{const i=new XMLHttpRequest;i.onreadystatechange=r,e.displayOptions.onBeforeXMLHttpRequestOpen(i),i.open("GET",t,!0),i.withCredentials=o,i.timeout=n,e.displayOptions.onBeforeXMLHttpRequest(i),i.send()},e.sendRequestAsync=async(t,o,n)=>await new Promise((r,i)=>{const a=new XMLHttpRequest;a.onreadystatechange=e=>{const t=e.target;4===t.readyState&&t.status>=200&&t.status<300?r(t):4===t.readyState&&i(t)},e.displayOptions.onBeforeXMLHttpRequestOpen(a),a.open("GET",t,!0),a.withCredentials=o,a.timeout=n,e.displayOptions.onBeforeXMLHttpRequest(a),a.send()}),e.announceLocalError=(e,t)=>{let o="[Error] ("+(typeof e<"u"?parseInt(e):900)+"): ";o+=t||"Failed to load Vast",console.warn(o)},e.debugMessage=function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];e.displayOptions.debug&&console.log("%cFP DEBUG","color: #fff; font-weight: bold; background-color: #1a5e87; padding: 3px 6px; border-radius: 3px;",...o)},e.onMainVideoEnded=t=>{e.debugMessage("onMainVideoEnded is called"),(!e.isCurrentlyPlayingAd||!e.autoplayAfterAd)&&(Math.floor(e.getCurrentTime())>=Math.floor(e.mainVideoDuration)&&(e.adKeytimePlay(Math.floor(e.mainVideoDuration)),clearInterval(e.timer)),e.displayOptions.layoutControls.loop&&(e.switchToMainVideo(),e.playPauseToggle()),setTimeout(()=>{!e.isCurrentlyPlayingAd&&e.displayOptions.suggestedVideos.configUrl&&e.displaySuggestedVideos()},100))},e.getCurrentTime=()=>e.isCurrentlyPlayingAd?e.mainVideoCurrentTime:e.domRef.player.currentTime,e.getCurrentSrc=()=>{const t=e.domRef.player.getElementsByTagName("source");return t.length?t[0].getAttribute("src"):null},e.getCurrentSrcType=()=>{const t=e.domRef.player.getElementsByTagName("source");if(!t.length)return null;for(let o=0;o<t.length;o++)if(t[o].getAttribute("src")===e.originalSrc)return t[o].getAttribute("type").toLowerCase();return null},e.onRecentWaiting=()=>{e.recentWaiting=!0,setTimeout(function(){e.recentWaiting=!1},1e3)},e.onFluidPlayerPause=()=>{setTimeout(function(){if(e.recentWaiting)return;const t=document.createEvent("CustomEvent");t.initEvent("fluidplayerpause",!1,!0),e.domRef.player.dispatchEvent(t)},100)},e.checkShouldDisplayVolumeBar=()=>"iOS"!==e.getMobileOs().userOs,e.generateCustomControlTags=e=>{const t={};t.loader=document.createElement("div"),t.loader.className="vast_video_loading",t.loader.style.display="none",t.root=document.createElement("div"),t.root.className="fluid_controls_container",e.displayVolumeBar||(t.root.className=t.root.className+" no_volume_bar"),e.controlForwardBackward&&(t.root.className=t.root.className+" skip_controls"),t.leftContainer=document.createElement("div"),t.leftContainer.className="fluid_controls_left",t.root.appendChild(t.leftContainer),t.playPause=document.createElement("div"),t.playPause.className="fluid_button fluid_button_play fluid_control_playpause",t.leftContainer.appendChild(t.playPause),e.controlForwardBackward&&(t.skipBack=document.createElement("div"),t.skipBack.className="fluid_button fluid_button_skip_back",t.leftContainer.appendChild(t.skipBack),t.skipForward=document.createElement("div"),t.skipForward.className="fluid_button fluid_button_skip_forward",t.leftContainer.appendChild(t.skipForward)),t.progressContainer=document.createElement("div"),t.progressContainer.className="fluid_controls_progress_container fluid_slider",t.root.appendChild(t.progressContainer),t.progressWrapper=document.createElement("div"),t.progressWrapper.className="fluid_controls_progress",t.progressContainer.appendChild(t.progressWrapper),t.progressCurrent=document.createElement("div"),t.progressCurrent.className="fluid_controls_currentprogress",t.progressCurrent.style.backgroundColor=e.primaryColor,t.progressWrapper.appendChild(t.progressCurrent),t.progress_current_marker=document.createElement("div"),t.progress_current_marker.className="fluid_controls_currentpos",t.progressCurrent.appendChild(t.progress_current_marker),t.bufferedIndicator=document.createElement("div"),t.bufferedIndicator.className="fluid_controls_buffered",t.progressContainer.appendChild(t.bufferedIndicator),t.adMarkers=document.createElement("div"),t.adMarkers.className="fluid_controls_ad_markers_holder",t.progressContainer.appendChild(t.adMarkers),t.rightContainer=document.createElement("div"),t.rightContainer.className="fluid_controls_right",t.root.appendChild(t.rightContainer),t.fullscreen=document.createElement("div"),t.fullscreen.className="fluid_button fluid_control_fullscreen fluid_button_fullscreen",t.fullscreen.title="Full Screen",t.rightContainer.appendChild(t.fullscreen),e.miniPlayer.enabled&&(t.miniPlayer=document.createElement("div"),t.miniPlayer.className="fluid_button fluid_control_mini_player fluid_button_mini_player",t.miniPlayer.title="Mini Player",t.rightContainer.appendChild(t.miniPlayer)),t.theatre=document.createElement("div"),t.theatre.className="fluid_button fluid_control_theatre fluid_button_theatre",t.theatre.title="Theatre Mode",t.rightContainer.appendChild(t.theatre),t.cardboard=document.createElement("div"),t.cardboard.className="fluid_button fluid_control_cardboard fluid_button_cardboard",t.cardboard.title="Cardboard",t.rightContainer.appendChild(t.cardboard),t.subtitles=document.createElement("div"),t.subtitles.className="fluid_button fluid_control_subtitles fluid_button_subtitles",t.subtitles.title="Captions",t.rightContainer.appendChild(t.subtitles),t.videoSource=document.createElement("div"),t.videoSource.className="fluid_button fluid_control_video_source fluid_button_video_source",t.videoSource.title="Source",t.rightContainer.appendChild(t.videoSource),t.playbackRate=document.createElement("div"),t.playbackRate.className="fluid_button fluid_control_playback_rate fluid_button_playback_rate",t.playbackRate.title="Playback Rate",t.rightContainer.appendChild(t.playbackRate),t.download=document.createElement("div"),t.download.className="fluid_button fluid_control_download fluid_button_download",t.download.title="Download",t.rightContainer.appendChild(t.download),t.volumeContainer=document.createElement("div"),t.volumeContainer.className="fluid_control_volume_container fluid_slider",t.rightContainer.appendChild(t.volumeContainer),t.volume=document.createElement("div"),t.volume.className="fluid_control_volume",t.volumeContainer.appendChild(t.volume),t.volumeCurrent=document.createElement("div"),t.volumeCurrent.className="fluid_control_currentvolume",t.volume.appendChild(t.volumeCurrent),t.volumeCurrentPos=document.createElement("div"),t.volumeCurrentPos.className="fluid_control_volume_currentpos",t.volumeCurrent.appendChild(t.volumeCurrentPos),t.mute=document.createElement("div"),t.mute.className="fluid_button fluid_button_volume fluid_control_mute",t.rightContainer.appendChild(t.mute);const o=document.createElement("div");return o.className="fluid_control_duration",t.duration=document.createElement("div"),t.duration.className="fluid_fluid_control_duration",t.duration.innerText="00:00 / 00:00",e.displayVolumeBar||(o.className=o.className+" no_volume_bar"),t.live_indicator=document.createElement("div"),t.live_indicator.className="fluid_control_live_indicator",o.append(t.live_indicator,t.duration),t.rightContainer.appendChild(o),t},e.showLiveIndicator=()=>{if(!e.domRef.player.parentNode.getElementsByClassName("fluid_button_live_indicator").length){const t=e.domRef.player.parentNode.getElementsByClassName("fluid_control_live_indicator"),o=document.createElement("span");o.className="fluid_button_live_indicator",o.innerHTML='LIVE<span class="live_circle"></span>',o.addEventListener("click",()=>{e.domRef.player.currentTime=e.currentVideoDuration});for(let e=0;e<t.length;e++)t[e].appendChild(o)}},e.hideLiveIndicator=()=>{const t=e.domRef.player.parentNode.getElementsByClassName("fluid_button_live_indicator")[0];t&&t.remove()},e.controlPlayPauseToggle=()=>{const t=e.domRef.player.parentNode.getElementsByClassName("fluid_control_playpause"),o=e.domRef.wrapper.querySelector(".context_option_play"),n=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_container"),r=e.domRef.wrapper.querySelector(".logo_holder");if(e.domRef.wrapper.querySelector(".fluid_initial_play")&&(e.domRef.wrapper.querySelector(".fluid_initial_play").style.display="none",e.domRef.wrapper.querySelector(".fluid_initial_play_button_container").style.opacity="1"),!e.domRef.player.paused){for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/\bfluid_button_play\b/g,"fluid_button_pause");for(let e=0;e<n.length;e++)n[e].classList.remove("initial_controls_show");return r&&r.classList.remove("initial_controls_show"),void(null!==o&&(o.innerHTML=e.displayOptions.captions.pause))}for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/\bfluid_button_pause\b/g,"fluid_button_play");for(let e=0;e<n.length;e++)n[e].classList.add("initial_controls_show");e.isCurrentlyPlayingAd&&e.displayOptions.vastOptions.showPlayButton&&(e.domRef.wrapper.querySelector(".fluid_initial_play").style.display="block",e.domRef.wrapper.querySelector(".fluid_initial_play_button_container").style.opacity="1"),r&&r.classList.add("initial_controls_show"),null!==o&&(o.innerHTML=e.displayOptions.captions.play)},e.playPauseAnimationToggle=t=>{if(e.isCurrentlyPlayingAd||!e.displayOptions.layoutControls.playPauseAnimation||e.isSwitchingSource)return;const o=e.domRef.wrapper.querySelector(".fluid_initial_play_button, .fluid_initial_pause_button");t?(o.classList.remove("fluid_initial_pause_button"),o.classList.add("fluid_initial_play_button")):(o.classList.remove("fluid_initial_play_button"),o.classList.add("fluid_initial_pause_button")),e.domRef.wrapper.querySelector(".fluid_initial_play").classList.add("transform-active"),setTimeout(function(){e.domRef.wrapper.querySelector(".fluid_initial_play").classList.remove("transform-active")},800)},e.contolProgressbarUpdate=()=>{const t=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress");for(let o=0;o<t.length;o++)t[o].style.width=e.domRef.player.currentTime/e.currentVideoDuration*100+"%"},e.controlDurationUpdate=()=>{const t=e.formatTime(e.domRef.player.currentTime);let o,n=!1;if(e.hlsPlayer&&(n=e.hlsPlayer.levels&&e.hlsPlayer.levels[e.hlsPlayer.currentLevel]&&e.hlsPlayer.levels[e.hlsPlayer.currentLevel].details.live),isNaN(e.currentVideoDuration)||!isFinite(e.currentVideoDuration)||n)o=t;else{o=t+" / "+e.formatTime(e.currentVideoDuration)}const r=e.domRef.player.parentNode.getElementsByClassName("fluid_control_duration");for(let t=0;t<r.length;t++){if(r[t].innerHTML="",e.isLiveStream){const o=document.createElement("span");o.className="fluid_button_live_indicator",o.innerHTML='LIVE<span class="live_circle"></span>',o.addEventListener("pointerdown",()=>{e.domRef.player.currentTime=e.currentVideoDuration}),r[t].appendChild(o)}const n=document.createElement("span");n.className="fluid_fluid_control_duration",n.innerText=o,r[t].appendChild(n)}},e.contolVolumebarUpdate=()=>{const t=e.domRef.wrapper.querySelector(".fluid_control_currentvolume"),o=e.domRef.wrapper.querySelector(".fluid_control_volume_currentpos"),n=e.domRef.wrapper.querySelector(".fluid_control_volume").clientWidth,r=o.clientWidth,i=e.domRef.player.parentNode.getElementsByClassName("fluid_control_mute"),a=e.domRef.wrapper.querySelector(".context_option_mute");if(0!==e.domRef.player.volume?(e.latestVolume=e.domRef.player.volume,e.fluidStorage.fluidMute=!1):e.fluidStorage.fluidMute=!0,e.domRef.player.volume&&!e.domRef.player.muted){for(let e=0;e<i.length;e++)i[e].className=i[e].className.replace(/\bfluid_button_mute\b/g,"fluid_button_volume");null!==a&&(a.innerHTML=e.displayOptions.captions.mute)}else{for(let e=0;e<i.length;e++)i[e].className=i[e].className.replace(/\bfluid_button_volume\b/g,"fluid_button_mute");null!==a&&(a.innerHTML=e.displayOptions.captions.unmute)}t.style.width=e.domRef.player.volume*n+"px",o.style.left=e.domRef.player.volume*n-r/2+"px"},e.muteToggle=()=>{0===e.domRef.player.volume||e.domRef.player.muted?(e.domRef.player.volume=e.latestVolume,e.domRef.player.muted=!1):(e.domRef.player.volume=0,e.domRef.player.muted=!0),e.fluidStorage.fluidVolume=e.latestVolume,e.fluidStorage.fluidMute=e.domRef.player.muted},e.checkFullscreenSupport=()=>{const t=e.domRef.wrapper;return t.mozRequestFullScreen?{goFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",isFullscreen:"mozFullScreenElement"}:t.webkitRequestFullscreen?{goFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",isFullscreen:"webkitFullscreenElement"}:t.msRequestFullscreen?{goFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",isFullscreen:"msFullscreenElement"}:t.requestFullscreen?{goFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",isFullscreen:"fullscreenElement"}:!!e.domRef.player.webkitSupportsFullscreen&&{goFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",isFullscreen:"webkitDisplayingFullscreen"}},e.fullscreenOff=(t,o)=>{for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/\bfluid_button_fullscreen_exit\b/g,"fluid_button_fullscreen");null!==o&&(o.innerHTML="Fullscreen"),e.fullscreenMode=!1},e.fullscreenOn=(t,o)=>{for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/\bfluid_button_fullscreen\b/g,"fluid_button_fullscreen_exit");null!==o&&(o.innerHTML=e.displayOptions.captions.exitFullscreen),e.fullscreenMode=!0},e.fullscreenToggle=()=>{e.debugMessage("Toggling Full Screen");const t=e.domRef.player,o=e.domRef.wrapper,n=e.checkFullscreenSupport(),r=t.parentNode.getElementsByClassName("fluid_control_fullscreen"),i=o.querySelector(".context_option_fullscreen");let a;e.resetDisplayMode("fullScreen"),n?"webkitEnterFullscreen"===n.goFullscreen?t[n.isFullscreen]||(a="videoPlayerTag."+n.goFullscreen+"();",e.fullscreenOn(r,i),new Function("videoPlayerTag",a)(t)):(null===document[n.isFullscreen]?(a="videoPlayerTag."+n.goFullscreen+"();",e.fullscreenOn(r,i)):(a="document."+n.exitFullscreen+"();",e.fullscreenOff(r,i)),new Function("videoPlayerTag",a)(o)):-1!==o.className.search(/\bpseudo_fullscreen\b/g)?(o.className=o.className.replace(/\bpseudo_fullscreen\b/g,""),e.fullscreenOff(r,i)):(o.className+=" pseudo_fullscreen",e.fullscreenOn(r,i)),e.resizeVpaidAuto(),e.domRef.player.addEventListener("webkitendfullscreen",()=>{e.fullscreenOff(r,i)})},e.findClosestParent=(e,t)=>{let o,n=null;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)}),e[n](t))return e;for(;e;){if(o=e.parentElement,o&&o[n](t))return o;e=o}return null},e.getTranslateX=e=>{let t=null;try{const o=e.style.transform.match(/translate3d\((-?\d+px,\s?){2}-?\d+px\)/);o&&o.length&&(t=o[0].replace("translate3d(","").replace(")","").replace(/\s/g,"").replace(/px/g,"").split(","))}catch(e){t=null}return t&&3===t.length?parseInt(t[0]):0},e.getEventOffsetX=(t,o)=>{let n,r=0,i=0;for(;o&&!isNaN(o.offsetLeft);)i=e.getTranslateX(o),"BODY"===o.tagName?r+=o.offsetLeft+o.clientLeft+i-(o.scrollLeft||document.documentElement.scrollLeft):r+=o.offsetLeft+o.clientLeft+i-o.scrollLeft,o=o.offsetParent;return n=typeof t.touches<"u"&&typeof t.touches[0]<"u"?t.touches[0].clientX:t.clientX,n-r},e.getEventOffsetY=(t,o)=>{let n=1;const r=e.checkFullscreenSupport();r&&document[r.isFullscreen]&&(n=0);let i=0;for(;o&&!isNaN(o.offsetTop);)"BODY"===o.tagName?i+=o.offsetTop-(o.scrollTop||document.documentElement.scrollTop)*n:i+=o.offsetTop-o.scrollTop*n,o=o.offsetParent;return t.clientY-i},e.onProgressbarMouseDown=t=>{let o;if(e.displayOptions.layoutControls.playPauseAnimation=!1,o=e.displayOptions.layoutControls.showCardBoardView?e.getEventOffsetX(t,t.target.parentNode):e.getEventOffsetX(t,e.domRef.wrapper.querySelector(".fluid_controls_progress_container")),e.isCurrentlyPlayingAd)return;e.fluidPseudoPause=!0;const n=e.domRef.player.paused;n||e.domRef.player.pause();const r=t=>{const o=e.domRef.wrapper.querySelector(".fluid_controls_progress_container").clientWidth;if(!o)return void e.hideSuggestedVideos();const n=Math.abs(e.currentVideoDuration*t/o);e.domRef.player.currentTime=n,"safari"===e.getBrowserVersion().browserName.toLowerCase()&&(e.domRef.player.safariPlayheadPosition=n),e.hideSuggestedVideos()},i=t=>{const n=e.getEventOffsetX(t,t.target.parentNode);o=NaN,r(n),e.contolProgressbarUpdate(),e.controlDurationUpdate()},a=t=>{document.removeEventListener("mousemove",i),document.removeEventListener("touchmove",i),document.removeEventListener("mouseup",a),document.removeEventListener("touchend",a);let s=e.getEventOffsetX(t,t.target.parentNode);isNaN(s)&&!isNaN(o)&&(s=o),isNaN(s)||r(s),n||e.play(),e.initialAnimationSet&&setTimeout(()=>{e.displayOptions.layoutControls.playPauseAnimation=e.initialAnimationSet},200),e.fluidPseudoPause=!1};document.addEventListener("mouseup",a),document.addEventListener("touchend",a,{passive:!0}),document.addEventListener("mousemove",i),document.addEventListener("touchmove",i,{passive:!0})},e.onVolumeBarMouseDown=()=>{const t=t=>{const o=e.domRef.controls.volumeContainer.clientWidth;if(o){let n=t/o;n<.05?(n=0,e.domRef.player.muted=!0):n>.95&&(n=1),e.domRef.player.muted&&n>0&&(e.domRef.player.muted=!1),e.setVolume(n)}},o=o=>{const n=e.getEventOffsetX(o,e.domRef.controls.volumeContainer);t(n)},n=r=>{document.removeEventListener("mousemove",o),document.removeEventListener("touchmove",o),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",n);const i=e.getEventOffsetX(r,e.domRef.controls.volumeContainer);isNaN(i)||t(i)};document.addEventListener("mouseup",n),document.addEventListener("touchend",n,{passive:!0}),document.addEventListener("mousemove",o),document.addEventListener("touchmove",o,{passive:!0})},e.findRoll=t=>{const o=[];if(o.length=0,t&&e.hasOwnProperty("rollsById")){for(let n in e.rollsById)e.rollsById.hasOwnProperty(n)&&e.rollsById[n].roll===t&&o.push(n);return o}},e.onKeyboardVolumeChange=t=>{let o=e.domRef.player.volume;"asc"===t?o+=.05:"desc"===t&&(o-=.05),o<.05?o=0:o>.95&&(o=1),e.setVolume(o)},e.onKeyboardSeekPosition=t=>{e.isCurrentlyPlayingAd||(e.domRef.player.currentTime=e.getNewCurrentTimeValueByKeyCode(t,e.domRef.player.currentTime,e.domRef.player.duration))},e.getNewCurrentTimeValueByKeyCode=(e,t,o)=>{let n=t;switch(e){case 35:n=o;break;case 36:n=0;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(e<58&&e>47){n=o*(10*(e-48))/100}}return n},e.handleMouseleave=t=>{typeof t.clientX<"u"&&e.domRef.wrapper.contains(document.elementFromPoint(t.clientX,t.clientY))||(e.hideControlBar(),e.hideTitle())},e.handleMouseenterForKeyboard=()=>{e.captureKey||(e.captureKey=t=>{t.stopPropagation();const o=t.keyCode;switch(o){case 70:e.fullscreenToggle(),t.preventDefault();break;case 13:case 32:e.playPauseToggle(),t.preventDefault();break;case 77:e.muteToggle(),t.preventDefault();break;case 38:e.onKeyboardVolumeChange("asc"),t.preventDefault();break;case 40:e.onKeyboardVolumeChange("desc"),t.preventDefault();break;case 37:e.skipRelative(-e.timeSkipOffsetAmount);break;case 39:e.skipRelative(e.timeSkipOffsetAmount);break;case 35:case 36:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:e.onKeyboardSeekPosition(o),t.preventDefault();break;case 73:e.toggleMiniPlayer(void 0,!0);break;case 187:case 61:case 43:case 107:case 171:e.displayOptions.layoutControls.subtitlesEnabled&&e.adjustSubtitleSizeByOperation("+");break;case 189:case 173:case 45:case 109:e.displayOptions.layoutControls.subtitlesEnabled&&e.adjustSubtitleSizeByOperation("-")}return!1},document.addEventListener("keydown",e.captureKey,!0))},e.keyboardControl=()=>{e.domRef.wrapper.addEventListener("click",e.handleMouseenterForKeyboard,!1);const t=e.handleWindowClick.bind(e);e.destructors.push(()=>{window.removeEventListener("click",t)}),window.addEventListener("click",t)},e.handleWindowClick=t=>{e.domRef.wrapper?e.domRef.wrapper.contains(t.target)||t.target.classList.contains(".js-skipHref")||(document.removeEventListener("keydown",e.captureKey,!0),delete e.captureKey,e.theatreMode&&!e.theatreModeAdvanced&&e.theatreToggle()):console.warn("Dangling click event listener should be collected for unknown wrapper.Did you forget to call destroy on player instance?")},e.initialPlay=()=>{if(e.domRef.player.addEventListener("playing",()=>{e.toggleLoader(!1)}),e.domRef.player.addEventListener("timeupdate",()=>{e.toggleLoader(!1)}),e.domRef.player.addEventListener("waiting",()=>{e.toggleLoader(!0)}),!e.displayOptions.layoutControls.playButtonShowing){e.domRef.wrapper.querySelector(".fluid_controls_container").classList.remove("initial_controls_show");const t=e.domRef.wrapper.querySelector(".logo_holder");t&&t.classList.remove("initial_controls_show")}e.firstPlayLaunched||(e.playPauseToggle(),e.domRef.player.removeEventListener("play",e.initialPlay))},e.playPauseToggle=()=>{e.hideSuggestedVideos();const t=!e.firstPlayLaunched,o=e.findRoll("preRoll");if(t&&0!==o.length){e.isCurrentlyPlayingAd=!0;const t=e.getBrowserVersion(),n=!1!==e.mobileInfo.userOs&&"Android"===e.mobileInfo.userOs&&"Google Chrome"===t.browserName;("Safari"===t.browserName||n)&&(e.domRef.player.src="https://cdn.fluidplayer.com/static/blank.mp4",e.domRef.player.play(),e.playPauseAnimationToggle(!0)),e.firstPlayLaunched=!0,e.prepareVast("preRoll"),e.preRollAdPodsLength=o.length}else t&&0===o.length&&(e.firstPlayLaunched=!0,e.displayOptions.vastOptions.vastAdvanced.noVastVideoCallback()),e.domRef.player.paused?(e.isCurrentlyPlayingAd&&null!==e.vastOptions&&e.vastOptions.vpaid?e.resumeVpaidAd():(0!==Math.floor(e.domRef.player.currentTime)&&Math.floor(e.currentVideoDuration)===Math.floor(e.domRef.player.currentTime)&&(e.initialiseStreamers(),e.domRef.player.currentTime=0),e.hlsPlayer&&!e.hlsPlayer.config.autoStartLoad&&e.hlsPlayer.startLoad(),e.dashPlayer?e.dashPlayer.play():e.domRef.player.play()),e.playPauseAnimationToggle(!0)):t||(e.isCurrentlyPlayingAd&&null!==e.vastOptions&&e.vastOptions.vpaid?e.pauseVpaidAd():e.domRef.player.pause(),e.playPauseAnimationToggle(!1)),e.toggleOnPauseAd();const n=()=>{e.prepareVast("onPauseRoll"),e.scheduleOnDemandRolls()};if(t){const t=e.domRef.wrapper.querySelector(".fluid_pseudo_poster");t&&t.parentNode.removeChild(t),e.mainVideoDuration>0?n():e.domRef.player.addEventListener("mainVideoDurationSet",n)}e.adTimer();const r=e.domRef.wrapper.querySelector(".fluid_html_on_pause_container");r&&!e.isCurrentlyPlayingAd&&(e.domRef.player.paused?r.style.display="flex":r.style.display="none")},e.setCustomControls=()=>{e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_playpause",()=>{e.firstPlayLaunched||e.domRef.player.removeEventListener("play",e.initialPlay),e.playPauseToggle()},!1),e.domRef.player.addEventListener("play",()=>{e.controlPlayPauseToggle(),e.contolVolumebarUpdate()},!1),e.domRef.player.addEventListener("fluidplayerpause",()=>{e.controlPlayPauseToggle()},!1),e.domRef.player.addEventListener("timeupdate",()=>{e.contolProgressbarUpdate(),e.controlDurationUpdate()});const t=e.getMobileOs().userOs?"touchstart":"mousedown";e.displayOptions.layoutControls.showCardBoardView?e.trackEvent(e.domRef.player.parentNode,t,".fluid_controls_progress_container",t=>e.onProgressbarMouseDown(t),!1):e.domRef.wrapper.querySelector(".fluid_controls_progress_container").addEventListener(t,t=>e.onProgressbarMouseDown(t),{passive:!0}),e.domRef.wrapper.querySelector(".fluid_control_volume_container").addEventListener(t,t=>e.onVolumeBarMouseDown(),{passive:!0}),e.domRef.player.addEventListener("volumechange",()=>e.contolVolumebarUpdate()),e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_mute",()=>e.muteToggle()),e.setBuffering(),e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_fullscreen",()=>e.fullscreenToggle()),e.displayOptions.layoutControls.allowTheatre&&!e.isInIframe?(e.domRef.wrapper.querySelector(".fluid_control_theatre").style.display="inline-block",e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_theatre",()=>e.theatreToggle())):e.domRef.wrapper.querySelector(".fluid_control_theatre").style.display="none",e.displayOptions.layoutControls.miniPlayer.enabled&&!e.isInIframe&&e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_mini_player",()=>e.toggleMiniPlayer(void 0,!0)),e.domRef.player.addEventListener("ratechange",()=>{e.isCurrentlyPlayingAd&&(e.playbackRate=1)})},e.createTimePositionPreview=()=>{if(!e.showTimeOnHover)return;const t=e.domRef.wrapper.querySelector(".fluid_controls_progress_container"),o=document.createElement("div");o.className="fluid_timeline_preview",o.style.display="none",o.style.position="absolute",t.appendChild(o),e.domRef.wrapper.querySelector(".fluid_controls_progress_container").addEventListener("mousemove",t=>{const o=e.domRef.wrapper.querySelector(".fluid_controls_progress_container"),n=o.clientWidth,r=e.domRef.wrapper.querySelector(".fluid_timeline_preview"),i=e.getEventOffsetX(t,o),a=e.currentVideoDuration*i/n;r.innerText=e.formatTime(a),r.style.display="block",r.style.left=a/e.domRef.player.duration*100+"%"},!1),e.domRef.wrapper.querySelector(".fluid_controls_progress_container").addEventListener("mouseout",()=>{e.domRef.wrapper.querySelector(".fluid_timeline_preview").style.display="none"},!1)},e.setCustomContextMenu=()=>{const t=e.domRef.wrapper,o=e.displayOptions.layoutControls.contextMenu.controls,n=e.displayOptions.layoutControls.contextMenu.links,r=document.createElement("div");r.className="fluid_context_menu",r.style.display="none",r.style.position="absolute";const i=document.createElement("ul");if(r.appendChild(i),Array.isArray(n)&&n.forEach(function(e,t){const o=document.createElement("li");o.innerHTML=e.label,o.addEventListener("click",()=>window.open(e.href,"_blank"),!1),i.appendChild(o)}),o){const t=document.createElement("li");t.className="context_option_play",t.innerHTML=e.displayOptions.captions.play,t.addEventListener("click",()=>e.playPauseToggle(),!1),i.appendChild(t);const o=document.createElement("li");o.className="context_option_mute",o.innerHTML=e.displayOptions.captions.mute,o.addEventListener("click",()=>e.muteToggle(),!1),i.appendChild(o);const n=document.createElement("li");n.className="context_option_fullscreen",n.innerHTML=e.displayOptions.captions.fullscreen,n.addEventListener("click",()=>e.fullscreenToggle(),!1),i.appendChild(n)}const a=document.createElement("li");a.innerHTML="Fluid Player "+e.version,a.addEventListener("click",()=>window.open(e.homepage,"_blank"),!1),i.appendChild(a),e.domRef.player.parentNode.insertBefore(r,e.domRef.player.nextSibling),t.addEventListener("contextmenu",t=>{t.preventDefault(),r.style.left=e.getEventOffsetX(t,e.domRef.player)+"px",r.style.top=e.getEventOffsetY(t,e.domRef.player)+"px",r.style.display="block"},!1),document.addEventListener("click",t=>{(t.target!==e.domRef.player||2!==t.button)&&(r.style.display="none")},!1)},e.setDefaultLayout=()=>{e.domRef.wrapper.className+=" fluid_player_layout_"+e.displayOptions.layoutControls.layout,e.setCustomContextMenu();const t=e.generateCustomControlTags({displayVolumeBar:e.checkShouldDisplayVolumeBar(),primaryColor:e.displayOptions.layoutControls.primaryColor?e.displayOptions.layoutControls.primaryColor:"red",controlForwardBackward:!!e.displayOptions.layoutControls.controlForwardBackward.show,miniPlayer:e.displayOptions.layoutControls.miniPlayer});e.domRef.player.removeAttribute("controls"),e.domRef.player.parentNode.insertBefore(t.root,e.domRef.player.nextSibling),e.domRef.player.parentNode.insertBefore(t.loader,e.domRef.player.nextSibling),e.domRef.controls=t;let o=100,n=setInterval(function(){o?e.checkIfVolumebarIsRendered()?(clearInterval(n),e.contolVolumebarUpdate()):o--:clearInterval(n)},100);if(e.destructors.push(()=>clearInterval(n)),e.displayOptions.layoutControls.doubleclickFullscreen&&!(e.isTouchDevice()||!e.displayOptions.layoutControls.controlForwardBackward.doubleTapMobile)&&e.domRef.player.addEventListener("dblclick",e.fullscreenToggle),"iOS"===e.getMobileOs().userOs){let t=!1;new IntersectionObserver(o=>{o.forEach(o=>{o.isIntersecting?(e.domRef.player.inView=!0,e.displayOptions.layoutControls.autoRotateFullScreen&&e.isTouchDevice()&&!t&&(window.matchMedia("(orientation: landscape)").addEventListener("change",e.handleOrientationChange),t=!0)):e.domRef.player.inView=!1})}).observe(e.domRef.player)}e.initHtmlOnPauseBlock(),e.setCustomControls(),e.setupThumbnailPreview(),e.createTimePositionPreview(),e.posterImage(),e.initPlayButton(),e.setVideoPreload(),e.createPlaybackList(),e.createDownload(),e.toggleMiniPlayerScreenDetection(),e.displayOptions.layoutControls.controlForwardBackward.show&&e.initSkipControls(),e.displayOptions.layoutControls.controlForwardBackward.doubleTapMobile&&e.initDoubleTapSkip(),e.initSkipAnimationElements()},e.initSkipControls=()=>{e.domRef.controls.skipBack.addEventListener("click",e.skipRelative.bind(this,-e.timeSkipOffsetAmount)),e.domRef.controls.skipForward.addEventListener("click",e.skipRelative.bind(this,e.timeSkipOffsetAmount))},e.handleOrientationChange=()=>{const t=window.matchMedia("(orientation: landscape)").matches,o=e.domRef.player,n=e.domRef.wrapper,r=e.checkFullscreenSupport(),i=o.parentNode.getElementsByClassName("fluid_control_fullscreen"),a=n.querySelector(".context_option_fullscreen");let s;t&&e.domRef.player.inView?r?"webkitEnterFullscreen"===r.goFullscreen?(s="videoPlayerTag."+r.goFullscreen+"();",e.fullscreenOn(i,a),new Function("videoPlayerTag",s)(o)):(null===document[r.isFullscreen]&&(s="videoPlayerTag."+r.goFullscreen+"();",e.fullscreenOn(i,a)),new Function("videoPlayerTag",s)(n)):(n.className+=" pseudo_fullscreen",e.fullscreenOn(i,a)):(n.className=n.className.replace(/\bpseudo_fullscreen\b/g,""),r?(s="document."+r.exitFullscreen+"();",e.fullscreenOff(i,a),new Function("videoPlayerTag",s)(n)):-1!==n.className.search(/\bpseudo_fullscreen\b/g)&&(n.className=n.className.replace(/\bpseudo_fullscreen\b/g,""),e.fullscreenOff(i,a))),e.resizeVpaidAuto()},e.initSkipAnimationElements=function(){const t=document.createElement("div");t.classList.add("fluid_player_skip_offset");const o=document.createElement("div");o.classList.add("fluid_player_skip_offset__backward"),t.appendChild(o);const n=document.createElement("div");n.classList.add("fluid_player_skip_offset__backward-icon"),n.ontransitionend=()=>n.classList.remove("animate"),o.appendChild(n);const r=document.createElement("div");r.classList.add("fluid_player_skip_offset__forward"),t.appendChild(r);const i=document.createElement("div");i.classList.add("fluid_player_skip_offset__forward-icon"),i.ontransitionend=()=>i.classList.remove("animate"),r.appendChild(i),e.domRef.player.parentNode.insertBefore(t,e.domRef.player.nextSibling)},e.initDoubleTapSkip=()=>{let t=!1,o=[];e.domRef.player.addEventListener("pointerdown",n=>{if(!e.isTouchDevice())return;const r=e.isControlBarVisible(),{offsetX:i}=n,{clientWidth:a}=e.domRef.player;if(o.push(setTimeout(()=>{t=!1,r&&e.playPauseToggle()},300)),t)return o.forEach(e=>clearTimeout(e)),o=[],t=!1,e.skipRelative(i<a/2?-e.timeSkipOffsetAmount:e.timeSkipOffsetAmount);t=!0})},e.skipRelative=function(t){if(e.debugMessage("skipping video time by ",t),e.isCurrentlyPlayingAd)return;let o=e.domRef.player.currentTime+t;o<0&&(o=0),e.domRef.player.currentTime=o,t>=0?e.domRef.wrapper.querySelector(".fluid_player_skip_offset__forward-icon").classList.add("animate"):e.domRef.wrapper.querySelector(".fluid_player_skip_offset__backward-icon").classList.add("animate")},e.checkIfVolumebarIsRendered=()=>{const t=e.domRef.wrapper.querySelector(".fluid_control_volume_currentpos"),o=e.domRef.wrapper.querySelector(".fluid_control_volume").clientWidth;return t.clientWidth!==o},e.setLayout=()=>{e.isTouchDevice()||e.domRef.player.addEventListener("click",()=>e.playPauseToggle(),!1),e.domRef.player.addEventListener("play",e.initialPlay,!1),e.setDefaultLayout()},e.handleFullscreen=()=>{typeof document.vastFullsreenChangeEventListenersAdded<"u"||(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(t=>{"object"==typeof document["on"+t]&&document.addEventListener(t,function(t){e.recalculateAdDimensions()},!1)}),document.vastFullsreenChangeEventListenersAdded=!0)},e.setupPlayerWrapper=()=>{const t=document.createElement("div");t.id="fluid_video_wrapper_"+e.videoPlayerId,t.className=e.isTouchDevice()?"fluid_video_wrapper mobile":"fluid_video_wrapper",e.displayOptions.layoutControls.fillToContainer?(t.style.width="100%",t.style.height="100%"):(t.style.height=e.domRef.player.clientHeight+"px",t.style.width=e.domRef.player.clientWidth+"px");return t.style.borderRadius=e.domRef.player.style.borderRadius=(()=>{const t=e.displayOptions.layoutControls.roundedCorners,o=Number(t);return isNaN(o)||0===o?t:"".concat(o,"px")})(),t.style.overflow="hidden",e.domRef.player.style.height="100%",e.domRef.player.style.width="100%",e.domRef.player.parentNode.insertBefore(t,e.domRef.player),t.appendChild(e.domRef.player),t},e.onErrorDetection=()=>{e.domRef.player.networkState===e.domRef.player.NETWORK_NO_SOURCE&&e.isCurrentlyPlayingAd&&e.playMainVideoWhenVastFails(401)},e.createVideoSourceSwitch=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const o=[],n=e.domRef.player.querySelectorAll("source");[].forEach.call(n,e=>{e.title&&e.src&&o.push({title:e.title,url:e.src,isHD:null!=e.getAttribute("data-fluid-hd")})});const r=e.domRef.wrapper.querySelector(".fluid_control_video_source");if(e.videoSources=o,e.videoSources.length>1?r.style.display="inline-block":r.style.display="none",e.videoSources.length<=1)return;let i=!1;const a=document.createElement("div");a.className="fluid_video_sources_list",a.style.display="none";let s=!0;for(const o of e.videoSources){const n=o.url.split(".").pop();if("iOS"===e.mobileInfo.userOs&&"mkv"===n)continue;s&&!t&&(e.domRef.player.src=o.url);const r=s?"source_selected":"",l=o.isHD?'<sup style="color:'+e.displayOptions.layoutControls.primaryColor+'" class="fp_hd_source"></sup>':"";s=!1;const d=document.createElement("div");d.className="fluid_video_source_list_item js-source_"+o.title,d.innerHTML='<span class="source_button_icon '+r+'"></span>'+o.title+l,d.addEventListener("click",function(t){t.stopPropagation(),e.domRef.player.style.width=e.domRef.player.clientWidth+"px",e.domRef.player.style.height=e.domRef.player.clientHeight+"px";const o=this,n=e.domRef.wrapper.getElementsByClassName("source_button_icon");for(let e=0;e<n.length;e++)n[e].className=n[e].className.replace("source_selected","");o.firstChild.className+=" source_selected",e.videoSources.forEach(t=>{t.title===o.innerText.replace(/(\r\n\t|\n|\r\t)/gm,"")&&(e.setBuffering(),e.setVideoSource(t.url),e.fluidStorage.fluidQuality=t.title)}),e.openCloseVideoSourceSwitch()}),a.appendChild(d),i=!0}i?(r.appendChild(a),r.removeEventListener("click",e.openCloseVideoSourceSwitch),r.addEventListener("click",e.openCloseVideoSourceSwitch)):e.domRef.wrapper.querySelector(".fluid_control_video_source").style.display="none"},e.openCloseVideoSourceSwitch=()=>{const t=e.domRef.wrapper.querySelector(".fluid_video_sources_list");if(e.isCurrentlyPlayingAd||e.isShowingSuggestedVideos())return void(t.style.display="none");if("none"!==t.style.display)return void(t.style.display="none");t.style.display="block";const o=()=>{t.removeEventListener("mouseleave",o),t.style.display="none"};t.addEventListener("mouseleave",o)},e.setVideoSource=t=>{if("iOS"===e.mobileInfo.userOs&&t.indexOf(".mkv")>0)return console.log("[FP_ERROR] .mkv files not supported by iOS devices."),!1;if(e.isCurrentlyPlayingAd)return void(e.originalSrc=t);e.isSwitchingSource=!0;let o=!1;e.domRef.player.paused||(e.domRef.player.pause(),o=!0);const n=e.domRef.player.currentTime;e.setCurrentTimeAndPlay(n,o),e.domRef.player.src=t,e.originalSrc=t,e.displayOptions.layoutControls.mediaType=e.getCurrentSrcType(),e.initialiseStreamers()},e.setCurrentTimeAndPlay=(t,o)=>{const n=()=>{e.domRef.player.currentTime=t,e.domRef.player.removeEventListener("loadedmetadata",n),("iOS"===e.mobileInfo.userOs||"safari"===e.getBrowserVersion().browserName.toLowerCase())&&e.domRef.player.addEventListener("playing",r),o?e.domRef.player.play():(e.domRef.player.pause(),e.controlPlayPauseToggle()),e.isSwitchingSource=!1,e.domRef.player.style.width="100%",e.domRef.player.style.height="100%"};let r=()=>{e.currentTime=t,e.domRef.player.removeEventListener("playing",r)};e.domRef.player.addEventListener("loadedmetadata",n,!1),e.domRef.player.load()},e.initTitle=()=>{if(!e.displayOptions.layoutControls.title)return;const t=document.createElement("div");e.domRef.player.parentNode.insertBefore(t,null),t.innerHTML+=e.displayOptions.layoutControls.title,t.classList.add("fp_title")},e.hasTitle=()=>{const t=e.domRef.wrapper.querySelector(".fp_title"),o=e.displayOptions.layoutControls.title;return t&&null!=o},e.hideTitle=()=>{const t=e.domRef.wrapper.querySelector(".fp_title");e.hasTitle()&&t.classList.add("fade_out")},e.showTitle=()=>{const t=e.domRef.wrapper.querySelector(".fp_title");e.hasTitle()&&t.classList.remove("fade_out")},e.initLogo=()=>{if(!e.displayOptions.layoutControls.logo.imageUrl)return;const t=document.createElement("div");t.className="logo_holder",e.displayOptions.layoutControls.logo.hideWithControls?t.classList.add("initial_controls_show","fp_logo"):t.classList.add("logo_maintain_display");const o=document.createElement("img");e.displayOptions.layoutControls.logo.imageUrl&&(o.src=e.displayOptions.layoutControls.logo.imageUrl),o.style.position="absolute",o.style.margin=e.displayOptions.layoutControls.logo.imageMargin;const n=e.displayOptions.layoutControls.logo.position.toLowerCase();-1!==n.indexOf("bottom")?o.style.bottom=0:o.style.top=0,-1!==n.indexOf("right")?o.style.right=0:o.style.left=0,e.displayOptions.layoutControls.logo.opacity&&(o.style.opacity=e.displayOptions.layoutControls.logo.opacity),null!==e.displayOptions.layoutControls.logo.clickUrl&&(o.style.cursor="pointer",o.addEventListener("click",function(){window.open(e.displayOptions.layoutControls.logo.clickUrl,"_blank").focus()})),e.displayOptions.layoutControls.logo.mouseOverImageUrl&&(o.addEventListener("mouseover",function(){o.src=e.displayOptions.layoutControls.logo.mouseOverImageUrl},!1),o.addEventListener("mouseout",function(){o.src=e.displayOptions.layoutControls.logo.imageUrl},!1)),e.domRef.player.parentNode.insertBefore(t,null),t.appendChild(o,null)},e.initHtmlOnPauseBlock=()=>{if(e.hasValidOnPauseAd()||!e.displayOptions.layoutControls.htmlOnPauseBlock.html)return;const t=document.createElement("div");t.className="fluid_html_on_pause_container",t.style.display="none",t.innerHTML=e.displayOptions.layoutControls.htmlOnPauseBlock.html,t.onclick=function(t){e.playPauseToggle()},e.displayOptions.layoutControls.htmlOnPauseBlock.width&&(t.style.width=e.displayOptions.layoutControls.htmlOnPauseBlock.width+"px"),e.displayOptions.layoutControls.htmlOnPauseBlock.height&&(t.style.height=e.displayOptions.layoutControls.htmlOnPauseBlock.height+"px"),e.domRef.player.parentNode.insertBefore(t,null)},e.initPlayButton=()=>{const t=document.createElement("div");t.className="fluid_html_on_pause fluid_initial_play_button_container";const o=e.displayOptions.layoutControls.primaryColor?e.displayOptions.layoutControls.primaryColor:"#333333";t.innerHTML='<div class="fluid_initial_play" style="background-color:'+o+'"><div class="fluid_initial_play_button"></div></div>';const n=["click","touchend"],r=function(){e.playPauseToggle(),n.forEach(e=>t.removeEventListener(e,r))};n.forEach(e=>t.addEventListener(e,r)),e.displayOptions.layoutControls.playButtonShowing||(e.domRef.wrapper.querySelector(".fluid_controls_container").classList.add("initial_controls_show"),t.style.opacity="0"),e.domRef.player.parentNode.insertBefore(t,null)},e.mainVideoReady=()=>{if(0!==e.mainVideoDuration||e.isCurrentlyPlayingAd||!1!==e.mainVideoReadyState)return;const t=new CustomEvent("mainVideoDurationSet");e.mainVideoDuration=e.domRef.player.duration,e.mainVideoReadyState=!0,e.domRef.player.dispatchEvent(t),e.domRef.player.removeEventListener("loadedmetadata",e.mainVideoReady)},e.userActivityChecker=()=>{const t=e.domRef.wrapper;e.newActivity=null;let o=!1;const n=t=>{("touchstart"===t.type||"mousedown"===t.type)&&(o=!0),("touchend"===t.type||"mouseup"===t.type)&&(o=!1),e.newActivity=!0},r=setInterval(()=>{if(!0===e.newActivity){if(!o&&!e.isLoading&&(e.newActivity=!1),!1===e.isUserActive||!e.isControlBarVisible()){let t=new CustomEvent("userActive");e.domRef.player.dispatchEvent(t),e.isUserActive=!0}clearTimeout(e.inactivityTimeout),e.inactivityTimeout=setTimeout(()=>{if(!0===e.newActivity)return void clearTimeout(e.inactivityTimeout);e.isUserActive=!1;let t=new CustomEvent("userInactive");e.domRef.player.dispatchEvent(t)},1e3*e.displayOptions.layoutControls.controlBar.autoHideTimeout)}},300);e.destructors.push(()=>clearInterval(r));const i=e.isTouchDevice()?["touchstart","touchmove","touchend"]:["mousemove","mousedown","mouseup"];for(let e=0;e<i.length;e++)t.addEventListener(i[e],n,{passive:!0})},e.hasControlBar=()=>!!e.domRef.wrapper.querySelector(".fluid_controls_container"),e.isControlBarVisible=()=>{if(!1===e.hasControlBar())return!1;const t=e.domRef.wrapper.querySelector(".fluid_controls_container"),o=window.getComputedStyle(t,null);return!(0===o.opacity||"hidden"===o.visibility)},e.setVideoPreload=()=>{e.domRef.player.setAttribute("preload",e.displayOptions.layoutControls.preload)},e.hideControlBar=()=>{if(e.isCurrentlyPlayingAd&&!e.domRef.player.paused&&e.toggleAdCountdown(!0),e.domRef.player.style.cursor="none",!e.hasControlBar())return;const t=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_container"),o=e.domRef.player.parentNode.getElementsByClassName("fp_logo");for(let o=0;o<t.length;o++)e.displayOptions.layoutControls.controlBar.animated?(t[o].classList.remove("fade_in"),t[o].classList.add("fade_out")):t[o].style.display="none";if(e.displayOptions.layoutControls.logo.hideWithControls)for(let t=0;t<o.length;t++)e.displayOptions.layoutControls.controlBar.animated?o[t]&&(o[t].classList.remove("fade_in"),o[t].classList.add("fade_out")):o[t]&&(o[t].style.display="none");e.repositionSubtitlesContainer("12px")},e.showControlBar=t=>{if(e.isCurrentlyPlayingAd&&!e.domRef.player.paused&&e.toggleAdCountdown(!1),("mouseenter"===t.type||"userActive"===t.type)&&(e.domRef.player.style.cursor="default"),!e.hasControlBar())return;const o=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_container"),n=e.domRef.player.parentNode.getElementsByClassName("fp_logo");for(let t=0;t<o.length;t++)e.displayOptions.layoutControls.controlBar.animated?(o[t].classList.remove("fade_out"),o[t].classList.add("fade_in")):o[t].style.display="block";if(e.displayOptions.layoutControls.logo.hideWithControls)for(let t=0;t<n.length;t++)e.displayOptions.layoutControls.controlBar.animated?n[t]&&(n[t].classList.remove("fade_out"),n[t].classList.add("fade_in")):n[t]&&(n[t].style.display="block");e.repositionSubtitlesContainer("46px")},e.linkControlBarUserActivity=()=>{e.domRef.player.addEventListener("userInactive",e.hideControlBar),e.domRef.player.addEventListener("userInactive",e.hideTitle),e.domRef.player.addEventListener("userActive",e.showControlBar),e.domRef.player.addEventListener("userActive",e.showTitle)},e.initMute=()=>{!0===e.displayOptions.layoutControls.mute&&(e.domRef.player.volume=0)},e.initLoop=()=>{e.domRef.player.loop=!!e.displayOptions.layoutControls.loop},e.setBuffering=()=>{let t;const o=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_buffered");for(let e=0;e<o.length;e++)o[e].style.width=0;t=setInterval(()=>{const n=e.domRef.player.duration;if(!(n<=0))for(let r=0;r<e.domRef.player.buffered.length;r++){if(e.domRef.player.buffered.start(e.domRef.player.buffered.length-1-r)>=e.domRef.player.currentTime)continue;const i=e.domRef.player.buffered.end(e.domRef.player.buffered.length-1-r)/n*100+"%";for(let e=0;e<o.length;e++)o[e].style.width=i;t&&e.domRef.player.buffered.end(e.domRef.player.buffered.length-1-r)/n===1&&clearInterval(t);break}},500),e.destructors.push(()=>clearInterval(t))},e.createPlaybackList=()=>{if(!e.displayOptions.layoutControls.playbackRateEnabled)return;const t=e.domRef.wrapper.querySelector(".fluid_control_playback_rate");t.style.display="inline-block";const o=document.createElement("div");o.className="fluid_video_playback_rates",o.style.display="none",(!Array.isArray(e.displayOptions.layoutControls.controlBar.playbackRates)||e.displayOptions.layoutControls.controlBar.playbackRates.some(e=>"string"!=typeof e||Number.isNaN(Number(e.replace("x","")))))&&(e.displayOptions.layoutControls.controlBar.playbackRates=["x2","x1.5","x1","x0.5"]),e.displayOptions.layoutControls.controlBar.playbackRates.forEach(function(t){const n=document.createElement("div");n.className="fluid_video_playback_rates_item",n.innerText=t,n.addEventListener("click",function(t){t.stopPropagation();let o=this.innerText.replace("x","");e.setPlaybackSpeed(o),e.openCloseVideoPlaybackRate()}),o.appendChild(n)}),t.appendChild(o),t.addEventListener("click",function(){e.openCloseVideoPlaybackRate()})},e.openCloseVideoPlaybackRate=()=>{const t=e.domRef.wrapper.querySelector(".fluid_video_playback_rates");if(e.isCurrentlyPlayingAd||"none"!==t.style.display)return void(t.style.display="none");t.style.display="block";const o=function(){t.removeEventListener("mouseleave",o),t.style.display="none"};t.addEventListener("mouseleave",o)},e.createDownload=()=>{const t=e.domRef.wrapper.querySelector(".fluid_control_download");if(!e.displayOptions.layoutControls.allowDownload)return;t.style.display="inline-block";let o=document.createElement("a");o.className="fp_download_click",o.onclick=function(e){const t=this;typeof e.stopImmediatePropagation<"u"&&e.stopImmediatePropagation(),setTimeout(function(){t.download="",t.href=""},100)},t.appendChild(o),t.addEventListener("click",function(){const t=e.domRef.wrapper.querySelector(".fp_download_click");t.download=e.originalSrc,t.href=e.originalSrc,o.click()})},e.theatreToggle=()=>{if(e.debugMessage("Toggling Theater Mode"),e.isInIframe)return;if(this.resetDisplayMode("theaterMode"),e.displayOptions.layoutControls.theatreAdvanced){const t=e.domRef.wrapper.querySelector("#".concat(e.displayOptions.layoutControls.theatreAdvanced.theatreElement)),o=e.displayOptions.layoutControls.theatreAdvanced.classToApply;null!=t&&null!=o?(e.theatreMode?t.classList.remove(o):t.classList.add(o),e.theatreModeAdvanced=!e.theatreModeAdvanced):(console.log("[FP_ERROR] Theatre mode elements could not be found, defaulting behaviour."),e.defaultTheatre())}else e.defaultTheatre();e.theatreMode=!e.theatreMode,e.fluidStorage.fluidTheatre=e.theatreMode;const t=e.theatreMode?"theatreModeOn":"theatreModeOff",o=document.createEvent("CustomEvent");o.initEvent(t,!1,!0),e.domRef.player.dispatchEvent(o),e.resizeVpaidAuto()},e.defaultTheatre=()=>{const t=e.domRef.wrapper;if(e.theatreMode)return t.classList.remove("fluid_theatre_mode"),t.style.maxHeight="",t.style.marginTop="",t.style.left="",t.style.right="",t.style.position="",void(e.displayOptions.layoutControls.fillToContainer?(t.style.width="100%",t.style.height="100%"):(t.style.width=e.originalWidth+"px",t.style.height=e.originalHeight+"px"));t.classList.add("fluid_theatre_mode");const o=e.displayOptions.layoutControls.theatreSettings.width;let n="10px";switch(t.style.width=o,t.style.height=e.displayOptions.layoutControls.theatreSettings.height,t.style.maxHeight=screen.height+"px",t.style.marginTop=e.displayOptions.layoutControls.theatreSettings.marginTop+"px",e.displayOptions.layoutControls.theatreSettings.horizontalAlign){case"center":"string"==typeof o&&"%"===o.substr(o.length-1)?n=(100-parseInt(o.substring(0,o.length-1)))/2+"%":"string"==typeof o&&"px"===o.substr(o.length-2)?n=(screen.width-parseInt(o.substring(0,o.length-2)))/screen.width*100/2+"%":console.log("[FP_ERROR] Theatre width specified invalid."),t.style.left=n;break;case"right":t.style.right=n;break;default:t.style.left=n}},e.posterImage=()=>{if(!e.displayOptions.layoutControls.posterImage)return;const t=document.createElement("div");t.className="fluid_pseudo_poster",-1!==["auto","contain","cover"].indexOf(e.displayOptions.layoutControls.posterImageSize)?(t.style.background="url('"+e.displayOptions.layoutControls.posterImage+"') center center / "+e.displayOptions.layoutControls.posterImageSize+" no-repeat black",e.domRef.player.parentNode.insertBefore(t,null)):console.log("[FP_ERROR] Not allowed value in posterImageSize")},e.nextSource=()=>{const t=e.domRef.player.getElementsByTagName("source");if(!t.length)return null;for(let o=0;o<t.length-1;o++)if(t[o].getAttribute("src")===e.originalSrc&&t[o+1].getAttribute("src"))return void e.setVideoSource(t[o+1].getAttribute("src"))},e.inIframe=()=>{try{return window.self!==window.top}catch(e){return!0}},e.setPersistentSettings=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(!(typeof Storage<"u"&&typeof localStorage<"u"))return}catch(e){return}const o="_fp_storage_enabled",n=localStorage;try{n.setItem(o,"1"),n.removeItem(o)}catch(e){return!1}if(e.fluidStorage=localStorage,typeof e.fluidStorage.fluidVolume<"u"&&e.displayOptions.layoutControls.persistentSettings.volume&&!t&&(e.setVolume(e.fluidStorage.fluidVolume),typeof e.fluidStorage.fluidMute<"u"&&"true"===e.fluidStorage.fluidMute&&e.muteToggle()),typeof e.fluidStorage.fluidQuality<"u"&&e.displayOptions.layoutControls.persistentSettings.quality){const t=e.domRef.wrapper.querySelector(".js-source_"+e.fluidStorage.fluidQuality),o=e.domRef.wrapper.querySelector(".fluid_control_video_source");t&&(t.click(),o.click())}typeof e.fluidStorage.fluidSpeed<"u"&&e.displayOptions.layoutControls.persistentSettings.speed&&e.setPlaybackSpeed(e.fluidStorage.fluidSpeed),typeof e.fluidStorage.fluidTheatre<"u"&&"true"===e.fluidStorage.fluidTheatre&&e.displayOptions.layoutControls.persistentSettings.theatre&&e.theatreToggle()},e.play=()=>{if(e.domRef.player.paused)return e.playPauseToggle(),!0},e.pause=()=>(e.domRef.player.paused||e.playPauseToggle(),!0),e.skipTo=t=>{e.domRef.player.currentTime=t},e.setPlaybackSpeed=t=>{e.isCurrentlyPlayingAd||(e.domRef.player.playbackRate=t,e.fluidStorage.fluidSpeed=t)},e.setVolume=t=>{e.domRef.player.volume=t;const o=0===t?1:t;e.latestVolume=o,e.fluidStorage.fluidVolume=o},e.isCurrentlyPlayingVideo=e=>e&&e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2,e.setHtmlOnPauseBlock=t=>{if("object"!=typeof t||typeof t.html>"u")return!1;const o=e.domRef.wrapper.querySelector(".fluid_html_on_pause_container");if(!o){const o=document.createElement("div");return o.className="fluid_html_on_pause",o.style.display="none",o.innerHTML=t.html,o.onclick=function(){e.playPauseToggle()},t.width&&(o.style.width=t.width+"px"),t.height&&(o.style.height=t.height+"px"),void e.domRef.player.parentNode.insertBefore(o,null)}o.innerHTML=t.html,t.width&&(o.style.width=t.width+"px"),t.height&&(o.style.height=t.height+"px")},e.toggleControlBar=t=>{const o=e.domRef.wrapper.querySelector(".fluid_controls_container");t?o.className+=" initial_controls_show":o.className=o.className.replace(" initial_controls_show","")},e.on=(o,n)=>{const r=function(o){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t(t({},{mediaSourceType:e.currentMediaSourceType}),r);return n(o,i)},i={play:()=>e.domRef.player.addEventListener("play",r),seeked:()=>e.domRef.player.addEventListener("seeked",r),ended:()=>e.domRef.player.addEventListener("ended",r),pause:()=>e.domRef.player.addEventListener("pause",t=>{e.fluidPseudoPause||r(t)}),playing:()=>e.domRef.player.addEventListener("playing",r),waiting:()=>e.domRef.player.addEventListener("waiting",r),theatreModeOn:()=>e.domRef.player.addEventListener("theatreModeOn",r),theatreModeOff:()=>e.domRef.player.addEventListener("theatreModeOff",r),timeupdate:()=>e.domRef.player.addEventListener("timeupdate",t=>{r(t,{currentTime:e.domRef.player.currentTime})}),miniPlayerToggle:()=>e.domRef.player.addEventListener("miniPlayerToggle",r)};i[o]?i[o]():console.error('[FP_ERROR] Event "'.concat(o,'" is not recognized'))},e.toggleLogo=t=>{if("object"!=typeof t||!t.imageUrl)return!1;const o=e.domRef.wrapper.querySelector(".fp_logo");e.displayOptions.layoutControls.logo.imageUrl=t.imageUrl?t.imageUrl:null,e.displayOptions.layoutControls.logo.position=t.position?t.position:"top left",e.displayOptions.layoutControls.logo.clickUrl=t.clickUrl?t.clickUrl:null,e.displayOptions.layoutControls.logo.opacity=t.opacity?t.opacity:1,e.displayOptions.layoutControls.logo.mouseOverImageUrl=t.mouseOverImageUrl?t.mouseOverImageUrl:null,e.displayOptions.layoutControls.logo.imageMargin=t.imageMargin?t.imageMargin:"2px",e.displayOptions.layoutControls.logo.hideWithControls=!!t.hideWithControls&&t.hideWithControls,e.displayOptions.layoutControls.logo.showOverAds=!!t.showOverAds&&t.showOverAds,o&&o.remove(),e.initLogo()},e.trackEvent=(t,o,n,r)=>{typeof e.events[n]>"u"&&(e.events[n]={}),typeof e.events[n][o]>"u"&&(e.events[n][o]=[]),e.events[n][o].push(r),e.registerListener(t,o,n,r)},e.registerListener=(e,t,o,n)=>{const r=e.querySelectorAll(o);for(let e=0;e<r.length;e++)r[e].addEventListener(t,n)},e.copyEvents=t=>{for(let o in e.events)if(e.events.hasOwnProperty(o))for(let n in e.events[o])if(e.events[o].hasOwnProperty(n))for(let r=0;r<e.events[o][n].length;r++)e.registerListener(t,n,o,e.events[o][n][r])},e.resetDisplayMode=t=>{e.fullscreenMode&&"fullScreen"!==t&&e.fullscreenToggle(),e.theatreMode&&"theaterMode"!==t&&e.theatreToggle(),e.miniPlayerToggledOn&&"miniPlayer"!==t&&e.toggleMiniPlayer("off")},e.destroy=()=>{if(e.domRef.player.classList.remove("js-fluid-player"),0===e.destructors.length)return;e.destructors.forEach(t=>t.call(e));const t=e.domRef.wrapper;t?"function"!=typeof t.remove?t.parentNode?t.parentNode.removeChild(t):console.error("Unable to remove wrapper element for Fluid Player instance - no parent"):t.remove():console.warn("Unable to remove wrapper element for Fluid Player instance - element not found")}},Pe=function(e){this.play=()=>e.play(),this.pause=()=>e.pause(),this.skipTo=t=>e.skipTo(t),this.setPlaybackSpeed=t=>e.setPlaybackSpeed(t),this.setVolume=t=>e.setVolume(t),this.setHtmlOnPauseBlock=t=>e.setHtmlOnPauseBlock(t),this.toggleControlBar=t=>e.toggleControlBar(t),this.toggleFullScreen=t=>e.fullscreenToggle(t),this.toggleMiniPlayer=t=>(void 0===t&&(t=!e.miniPlayerToggledOn),e.toggleMiniPlayer(t?"on":"off",!0)),this.destroy=()=>e.destroy(),this.dashInstance=()=>e.dashPlayer?e.dashPlayer:null,this.hlsInstance=()=>e.hlsPlayer?e.hlsPlayer:null,this.on=(t,o)=>e.on(t,o),this.setDebug=t=>{e.displayOptions.debug=t}};if(Te&&console.log("Fluid Player - Development Build"+(Oe?" (in debug mode)":"")),typeof FP_HOMEPAGE>"u"&&(globalThis.FP_HOMEPAGE="https://fluidplayer.com"),typeof FP_BUILD_VERSION>"u"&&(globalThis.FP_BUILD_VERSION="v3"),typeof FP_ENV>"u"){const e=globalThis&&globalThis.location&&("localhost"===globalThis.location.hostname||"127.0.0.1"===globalThis.location.hostname||""===globalThis.location.hostname);typeof process<"u"&&process&&process.env&&process.env.NODE_ENV?globalThis.FP_ENV=process.env.NODE_ENV:globalThis&&!e?globalThis.FP_ENV="production":globalThis.FP_ENV="development"}typeof FP_DEBUG>"u"&&(globalThis.FP_DEBUG=!1);const Ve=function(e,t){const o=new Ee;t||(t={}),o.init(e,t);const n=new Pe(o);if(window&&Te){const r={id:e,options:t,instance:n,internals:o};typeof window.fluidPlayerDebug>"u"&&(window.fluidPlayerDebug=[]),window.fluidPlayerDebug.push(r),console.log("Created instance of Fluid Player. Debug API available at window.fluidPlayerDebug["+(window.fluidPlayerDebug.length-1)+"].",r)}return n},Ne="function"==typeof Buffer;"function"==typeof TextDecoder&&new TextDecoder;const xe="function"==typeof TextEncoder?new TextEncoder:void 0,Ie=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=");(()=>{let e={};Ie.forEach((t,o)=>e[t]=o)})();const Me=String.fromCharCode.bind(String);"function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array);const Be="function"==typeof btoa?e=>btoa(e):Ne?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,o,n,r,i="";const a=e.length%3;for(let a=0;a<e.length;){if((o=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=o<<16|n<<8|r,i+=Ie[t>>18&63]+Ie[t>>12&63]+Ie[t>>6&63]+Ie[63&t]}return a?i.slice(0,a-3)+"===".substring(a):i},De=Ne?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let o=0,n=e.length;o<n;o+=4096)t.push(Me.apply(null,e.subarray(o,o+4096)));return Be(t.join(""))},Fe=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?Me(192|t>>>6)+Me(128|63&t):Me(224|t>>>12&15)+Me(128|t>>>6&63)+Me(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return Me(240|t>>>18&7)+Me(128|t>>>12&63)+Me(128|t>>>6&63)+Me(128|63&t)},Ue=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,qe=Ne?e=>Buffer.from(e,"utf8").toString("base64"):xe?e=>De(xe.encode(e)):e=>Be((e=>e.replace(Ue,Fe))(e));class je{constructor(e,t){r(this,"target"),r(this,"options"),r(this,"adData",{isLinear:!0,isVideoAdData:!0,currentTime:0,videoAdStatus:"",videoAdDuration:0,updatedAt:0});const o=document.createElement("video");o.defaultMuted=!0,o.muted=!0,e.appendChild(o),this.target=o,this.options=t}async create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n,r;const i=Ve(this.target,{layoutControls:{roundedCorners:8,fillToContainer:!0,autoPlay:!0,mute:!0,doubleclickFullscreen:!1,keyboardControl:!1,loop:!1,allowTheatre:!1,miniPlayer:{enabled:!1},preload:"auto",persistentSettings:{volume:!1,quality:!1,speed:!1,theatre:!1},layout:"in-renderer-js",logo:{imageUrl:null==(n=this.options.logo)?void 0:n.imageUrl,clickUrl:null==(r=this.options.logo)?void 0:r.clickUrl,position:"bottom left"}},vastOptions:{allowVPAID:!0,showPlayButton:!1,maxAllowedVastTagRedirects:5,showProgressbarMarkers:!1,adClickable:!1,vastTimeout:12e3,adList:[{adText:Se.t("LearnMore"),adClickable:!0,roll:"preRoll",vastTag:await this.getVastTag(this.options.vastUrl,this.options.vastXml)}],vastAdvanced:{vastLoadedCallback:()=>{t.vastLoaded&&t.vastLoaded()},noVastVideoCallback:()=>{t.noVastVideo&&t.noVastVideo()},vastVideoEndedCallback:()=>{console.log("vastVideoEndedCallback"),t.vastVideoEnded&&t.vastVideoEnded()}}}});return i.on("playing",e=>{this.adData.videoAdStatus||(this.adData.videoAdStatus="started",this.adData.videoAdDuration=e.srcElement.duration,o.start&&o.start(this.adData))}),i.on("ended",()=>{this.adData.videoAdStatus="complete"}),i.on("timeupdate",(e,t)=>{this.adData.currentTime=t.currentTime,this.adData.updatedAt=Date.now(),o.progress&&o.progress(this.adData)}),i}async getVastTag(e,t){if(t)return e&&navigator.sendBeacon(e),this.getVastDataUrl(t);if(e){const t=await this.getVastByVastUrl(e);return this.getVastDataUrl(t)}throw new l}async getVastByVastUrl(e){return await(await fetch(e)).text()}getVastDataUrl(e){return this.getVastDataUrlFromVastXml(e)}getVastDataUrlFromVastXml(e){return"data:text/xml;charset=utf-8;base64,"+function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"))(qe(e)):qe(e)}(e.replace(/\\"/g,'"'))}}class He{constructor(e){r(this,"viewableTracker"),this.viewableTracker=e}render(e,t,o,n){this.renderContainer(e,t,n),this.viewableTracker.trackViewable(e,()=>{o.play()}),this.viewableTracker.trackViewableLost(e,()=>{o.pause()}),document.addEventListener("visibilitychange",()=>{document.hidden?o.pause():o.play()})}renderContainer(e,t,o){const n=t.playerHeight/t.playerWidth;e.style.display="block",e.style.width="100%",o&&e.classList.add("full-click-area");const r=e.offsetWidth*n;e.style.height=r+"px",window.addEventListener("resize",()=>{const t=e.offsetWidth*n;e.style.height=t+"px"})}}class ze{constructor(e,t){r(this,"domainLogger"),r(this,"viewableTracker"),this.domainLogger=e,this.viewableTracker=t}async render(e,t,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};try{const i=await new je(e,{vastUrl:t.vastUrl,vastXml:t.vastXml,logo:o.logo}).create(()=>this.render(e,t,o,n,r),n,r);new He(this.viewableTracker).render(e,t,i,o.fullClickArea),this.viewableTracker.trackViewableVideo50(e,()=>{o.onImpressionViewable&&o.onImpressionViewable()})}catch(e){if(!(e instanceof l))throw e;this.domainLogger.invalidBid()}}}class We{trackViewable(e,t){new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&t()})}).observe(e)}trackViewableLost(e,t){new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting||t()})}).observe(e)}trackViewableMrc50(e,t){this.createObserver(t,.5,1e3).observe(e)}trackViewableMrc100(e,t){this.createObserver(t,1,1e3).observe(e)}trackViewableVideo50(e,t){this.createObserver(t,.5,2e3).observe(e)}createObserver(e,t,o){let n=null;const r=new IntersectionObserver(i=>{i.forEach(i=>{i.isIntersecting&&i.intersectionRatio>=t?null===n&&(n=window.setTimeout(()=>{e(),r.disconnect(),n=null},o)):null!==n&&(window.clearTimeout(n),n=null)})},{threshold:t,root:null});return r}}class Ke{async render(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;const d=new a(new s),c=document.getElementById(e);if(!c)throw new i;const u=new We;if("video"!==t.mediaType)throw new l("Unsupported formats.");new ze(d,u).render(c,t,o,n,r)}getCurrentAdData(){return{}}}export{Ke as I,Y as a,Q as c,$ as g};
